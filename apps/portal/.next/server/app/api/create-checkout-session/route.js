"use strict";(()=>{var e={};e.id=1737,e.ids=[1737],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},73837:e=>{e.exports=require("util")},39484:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>E,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>S,staticGenerationAsyncStorage:()=>_});var s={};r.r(s),r.d(s,{OPTIONS:()=>l,POST:()=>d});var o=r(49303),a=r(88716),n=r(60670),c=r(87070),i=r(44273);let u={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"},p={starter:{name:"HVAC Starter",price:9900},lite:{name:"HVAC Lite",price:19900},growth:{name:"HVAC Growth",price:29700}};async function l(){return c.NextResponse.json({},{headers:u})}async function d(e){try{let{name:t,email:r,phone:s,plan:o="starter"}=await e.json(),a=process.env.STRIPE_SECRET_KEY;if(!a)return console.error("[STRIPE] No STRIPE_SECRET_KEY configured"),c.NextResponse.json({status:"error",message:"Stripe not configured. Please contact support at (863) 213-2505."},{status:500,headers:u});let n=new i.Z(a,{apiVersion:"2025-12-15.clover"}),l=p[o]||p.starter;console.log("[STRIPE] Creating checkout session for:",{name:t,email:r,plan:l.name});let d=await n.checkout.sessions.create({payment_method_types:["card"],mode:"subscription",customer_email:r,line_items:[{price_data:{currency:"usd",product_data:{name:l.name,description:"AI Automation for HVAC businesses - 14-Day Money-Back Guarantee"},unit_amount:l.price,recurring:{interval:"month"}},quantity:1}],subscription_data:{trial_period_days:14,metadata:{customer_name:t,customer_phone:s,plan:o}},success_url:`${process.env.NEXT_PUBLIC_BASE_URL||"https://www.aiserviceco.com"}/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${process.env.NEXT_PUBLIC_BASE_URL||"https://www.aiserviceco.com"}/checkout?plan=${o}&cancelled=true`,metadata:{customer_name:t,customer_phone:s}});return console.log("[STRIPE] Session created:",d.id),c.NextResponse.json({status:"success",url:d.url,sessionId:d.id},{headers:u})}catch(e){return console.error("[STRIPE] Error:",e.message),c.NextResponse.json({status:"error",message:e.message||"Failed to create checkout session"},{status:500,headers:u})}}let m=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/create-checkout-session/route",pathname:"/api/create-checkout-session",filename:"route",bundlePath:"app/api/create-checkout-session/route"},resolvedPagePath:"C:\\Users\\nearm\\.gemini\\antigravity\\scratch\\empire-unified\\apps\\portal\\src\\app\\api\\create-checkout-session\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:_,serverHooks:S}=m,g="/api/create-checkout-session/route";function E(){return(0,n.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:_})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972,4273],()=>r(39484));module.exports=s})();