"use strict";(()=>{var e={};e.id=5350,e.ids=[5350],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},21260:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var r={};a.r(r),a.d(r,{GET:()=>p,POST:()=>d});var s=a(49303),n=a(88716),o=a(60670),i=a(87070),c=a(37857);function u(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,t=process.env.SUPABASE_SERVICE_ROLE_KEY;return e&&t?(0,c.eI)(e,t):null}async function p(e){let t=u(),{searchParams:a}=new URL(e.url),r=parseInt(a.get("limit")||"20"),s=parseInt(a.get("offset")||"0");if(!t)return i.NextResponse.json({success:!0,data:[{id:1,name:"John Smith",email:"john@hvacpro.com",phone:"555-0101",status:"captured",source:"HVAC Landing",created_at:new Date().toISOString()},{id:2,name:"Maria Garcia",email:"maria@coolingsolutions.com",phone:"555-0102",status:"call_scheduled",source:"Direct",created_at:new Date().toISOString()},{id:3,name:"HomeHeart HVAC",email:"info@homehearthvac.com",phone:"555-0103",status:"hot",source:"Campaign",created_at:new Date().toISOString()}],pagination:{limit:r,offset:s,hasMore:!1},isMock:!0});try{let{data:e,error:a}=await t.from("leads").select("*").order("created_at",{ascending:!1}).range(s,s+r-1);if(a)throw a;return i.NextResponse.json({success:!0,data:e,pagination:{limit:r,offset:s,hasMore:(e?.length||0)===r}})}catch(e){return i.NextResponse.json({success:!0,data:[],pagination:{limit:r,offset:s,hasMore:!1},error:"Database unavailable"})}}async function d(e){let t=u();if(!t)return i.NextResponse.json({success:!1,error:"Database not configured"},{status:500});try{let{name:a,email:r,phone:s,source:n,notes:o}=await e.json(),{data:c,error:u}=await t.from("leads").insert([{name:a,email:r,phone:s,source:n,notes:o,status:"new"}]).select().single();if(u)throw u;return i.NextResponse.json({success:!0,data:c})}catch(e){return i.NextResponse.json({success:!1,error:"Failed to create lead"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/leads/route",pathname:"/api/leads",filename:"route",bundlePath:"app/api/leads/route"},resolvedPagePath:"C:\\Users\\nearm\\.gemini\\antigravity\\scratch\\empire-unified\\apps\\portal\\src\\app\\api\\leads\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:g}=l,f="/api/leads/route";function v(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972,7857],()=>a(21260));module.exports=r})();