"use strict";(()=>{var e={};e.id=961,e.ids=[961],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6096:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>m,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>v,staticGenerationAsyncStorage:()=>d});var s={};a.r(s),a.d(s,{GET:()=>u});var r=a(9303),n=a(8716),i=a(670),o=a(7070),c=a(7857);async function u(e){new URL(e.url);let t=function(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,t=process.env.SUPABASE_SERVICE_ROLE_KEY;return e&&t?(0,c.eI)(e,t):null}();if(!t)return o.NextResponse.json({success:!0,data:{leads:127,pipeline:48500,calls:23,reservations:8,lastUpdated:new Date().toISOString(),isMock:!0}});try{let{count:e}=await t.from("leads").select("*",{count:"exact",head:!0}),{data:a}=await t.from("deals").select("value").eq("status","active"),s=a?.reduce((e,t)=>e+(t.value||0),0)||0,r=new Date().toISOString().split("T")[0],{count:n}=await t.from("calls").select("*",{count:"exact",head:!0}).gte("created_at",r),{count:i}=await t.from("reservations").select("*",{count:"exact",head:!0});return o.NextResponse.json({success:!0,data:{leads:e||0,pipeline:s,calls:n||0,reservations:i||0,lastUpdated:new Date().toISOString()}})}catch(e){return o.NextResponse.json({success:!0,data:{leads:127,pipeline:48500,calls:23,reservations:8,lastUpdated:new Date().toISOString(),isMock:!0}})}}let p=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/stats/route",pathname:"/api/stats",filename:"route",bundlePath:"app/api/stats/route"},resolvedPagePath:"C:\\Users\\nearm\\.gemini\\antigravity\\scratch\\empire-unified\\apps\\portal\\src\\app\\api\\stats\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:v}=p,m="/api/stats/route";function x(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:d})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,972,857],()=>a(6096));module.exports=s})();