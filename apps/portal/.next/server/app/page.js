(()=>{var e={};e.id=931,e.ids=[931],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},82361:e=>{"use strict";e.exports=require("events")},6194:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c}),r(35480),r(32029),r(35866);var i=r(23191),n=r(88716),s=r(37922),o=r.n(s),a=r(95231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,35480)),"C:\\Users\\nearm\\.gemini\\antigravity\\scratch\\empire-unified\\apps\\portal\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"C:\\Users\\nearm\\.gemini\\antigravity\\scratch\\empire-unified\\apps\\portal\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\nearm\\.gemini\\antigravity\\scratch\\empire-unified\\apps\\portal\\src\\app\\page.tsx"],d="/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},50549:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},95787:()=>{},52052:(e,t,r)=>{Promise.resolve().then(r.bind(r,63850))},37651:(e,t,r)=>{"use strict";let i,n,s,o,a,l,c,u;function d(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function h(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=p(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function f(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,m(i.key),i)}}function g(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function _(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t,r,i,n,s,o){try{var a=e[s](o),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(i,n)}function k(e){return function(){var t=this,r=arguments;return new Promise(function(i,n){var s=e.apply(t,r);function o(e){S(s,i,n,o,a,"next",e)}function a(e){S(s,i,n,o,a,"throw",e)}o(void 0)})}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,s,o,a=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=s.call(r)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.r(t),r.d(t,{DAILY_ACCESS_LEVEL_FULL:()=>r2,DAILY_ACCESS_LEVEL_LOBBY:()=>r5,DAILY_ACCESS_LEVEL_NONE:()=>r3,DAILY_ACCESS_UNKNOWN:()=>r1,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:()=>iu,DAILY_CAMERA_ERROR_CAM_IN_USE:()=>il,DAILY_CAMERA_ERROR_CONSTRAINTS:()=>im,DAILY_CAMERA_ERROR_MIC_IN_USE:()=>ic,DAILY_CAMERA_ERROR_NOT_FOUND:()=>ip,DAILY_CAMERA_ERROR_PERMISSIONS:()=>id,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:()=>ih,DAILY_CAMERA_ERROR_UNKNOWN:()=>ig,DAILY_EVENT_ACCESS_STATE_UPDATED:()=>iO,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:()=>i3,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:()=>i4,DAILY_EVENT_APP_MSG:()=>iK,DAILY_EVENT_CAMERA_ERROR:()=>iE,DAILY_EVENT_CPU_LOAD_CHANGE:()=>i8,DAILY_EVENT_ERROR:()=>nu,DAILY_EVENT_EXIT_FULLSCREEN:()=>nt,DAILY_EVENT_FACE_COUNTS_UPDATED:()=>i7,DAILY_EVENT_FULLSCREEN:()=>ne,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:()=>iy,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:()=>iv,DAILY_EVENT_INPUT_SETTINGS_UPDATED:()=>nl,DAILY_EVENT_JOINED_MEETING:()=>iT,DAILY_EVENT_JOINING_MEETING:()=>ix,DAILY_EVENT_LANG_UPDATED:()=>no,DAILY_EVENT_LEFT_MEETING:()=>iC,DAILY_EVENT_LIVE_STREAMING_ERROR:()=>ns,DAILY_EVENT_LIVE_STREAMING_STARTED:()=>nr,DAILY_EVENT_LIVE_STREAMING_STOPPED:()=>nn,DAILY_EVENT_LIVE_STREAMING_UPDATED:()=>ni,DAILY_EVENT_LOADED:()=>iS,DAILY_EVENT_LOADING:()=>iw,DAILY_EVENT_LOAD_ATTEMPT_FAILED:()=>i_,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:()=>i5,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:()=>i1,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:()=>i2,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:()=>iL,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:()=>iI,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:()=>iD,DAILY_EVENT_NETWORK_CONNECTION:()=>i6,DAILY_EVENT_NETWORK_QUALITY_CHANGE:()=>i9,DAILY_EVENT_NONFATAL_ERROR:()=>nc,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:()=>ij,DAILY_EVENT_PARTICIPANT_JOINED:()=>iA,DAILY_EVENT_PARTICIPANT_LEFT:()=>iM,DAILY_EVENT_PARTICIPANT_UPDATED:()=>iP,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:()=>na,DAILY_EVENT_RECORDING_DATA:()=>iH,DAILY_EVENT_RECORDING_ERROR:()=>iW,DAILY_EVENT_RECORDING_STARTED:()=>iz,DAILY_EVENT_RECORDING_STATS:()=>iG,DAILY_EVENT_RECORDING_STOPPED:()=>iJ,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:()=>iY,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:()=>iX,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:()=>i0,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:()=>iZ,DAILY_EVENT_STARTED_CAMERA:()=>ik,DAILY_EVENT_THEME_UPDATED:()=>ib,DAILY_EVENT_TRACK_STARTED:()=>iV,DAILY_EVENT_TRACK_STOPPED:()=>iq,DAILY_EVENT_TRANSCRIPTION_ERROR:()=>i$,DAILY_EVENT_TRANSCRIPTION_MSG:()=>iQ,DAILY_EVENT_TRANSCRIPTION_STARTED:()=>iU,DAILY_EVENT_TRANSCRIPTION_STOPPED:()=>iB,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:()=>iN,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:()=>iF,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:()=>iR,DAILY_FATAL_ERROR_CONNECTION:()=>ia,DAILY_FATAL_ERROR_EJECTED:()=>r6,DAILY_FATAL_ERROR_EOL:()=>is,DAILY_FATAL_ERROR_EXP_ROOM:()=>ie,DAILY_FATAL_ERROR_EXP_TOKEN:()=>it,DAILY_FATAL_ERROR_MEETING_FULL:()=>ii,DAILY_FATAL_ERROR_NBF_ROOM:()=>r8,DAILY_FATAL_ERROR_NBF_TOKEN:()=>r7,DAILY_FATAL_ERROR_NOT_ALLOWED:()=>io,DAILY_FATAL_ERROR_NO_ROOM:()=>ir,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:()=>r9,DAILY_RECEIVE_SETTINGS_BASE_KEY:()=>r4,DAILY_STATE_ERROR:()=>rY,DAILY_STATE_JOINED:()=>rG,DAILY_STATE_JOINING:()=>rJ,DAILY_STATE_LEFT:()=>rW,DAILY_STATE_NEW:()=>rB,DAILY_TRACK_STATE_BLOCKED:()=>rH,DAILY_TRACK_STATE_INTERRUPTED:()=>rZ,DAILY_TRACK_STATE_LOADING:()=>rX,DAILY_TRACK_STATE_OFF:()=>rK,DAILY_TRACK_STATE_PLAYABLE:()=>r0,DAILY_TRACK_STATE_SENDABLE:()=>rQ,default:()=>s$});var T,C,A={exports:{}},P=function(){if(C)return A.exports;C=1;var e,t="object"==typeof Reflect?Reflect:null,r=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function n(){n.init.call(this)}A.exports=n,A.exports.once=function(e,t){return new Promise(function(r,i){var n;function s(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",s),r([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&(n={once:!0},"function"==typeof e.on&&m(e,"error",s,n))})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var s=10;function o(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function l(e,t,r,i){var n,s,l;if(o(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),l=s[t]),void 0===l)l=s[t]=r,++e._eventsCount;else if("function"==typeof l?l=s[t]=i?[r,l]:[l,r]:i?l.unshift(r):l.push(r),(n=a(e))>0&&l.length>n&&!l.warned){l.warned=!0;var c=Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,console&&console.warn&&console.warn(c)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=c.bind(i);return n.listener=r,i.wrapFn=n,n}function d(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function m(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function n(s){i.once&&e.removeEventListener(t,n),r(s)})}}return Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return a(this)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=p(l,c);for(i=0;i<c;++i)r(u[i],this,t)}return!0},n.prototype.addListener=function(e,t){return l(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return l(this,e,t,!0)},n.prototype.once=function(e,t){return o(t),this.on(e,u(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,u(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,i,n,s,a;if(o(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},n.prototype.listeners=function(e){return d(this,e,!0)},n.prototype.rawListeners=function(e){return d(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},n.prototype.listenerCount=h,n.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},A.exports}(),M=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(P),j=Object.prototype.hasOwnProperty;function O(e,t,r){for(r of e.keys())if(D(r,t))return r}function D(e,t){var r,i,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((i=e.length)===t.length)for(;i--&&D(e[i],t[i]););return -1===i}if(r===Set){if(e.size!==t.size)return!1;for(i of e)if((n=i)&&"object"==typeof n&&!(n=O(t,n))||!t.has(n))return!1;return!0}if(r===Map){if(e.size!==t.size)return!1;for(i of e)if((n=i[0])&&"object"==typeof n&&!(n=O(t,n))||!D(i[1],t.get(n)))return!1;return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((i=e.byteLength)===t.byteLength)for(;i--&&e.getInt8(i)===t.getInt8(i););return -1===i}if(ArrayBuffer.isView(e)){if((i=e.byteLength)===t.byteLength)for(;i--&&e[i]===t[i];);return -1===i}if(!r||"object"==typeof e){for(r in i=0,e)if(j.call(e,r)&&++i&&!j.call(t,r)||!(r in t)||!D(e[r],t[r]))return!1;return Object.keys(t).length===i}}return e!=e&&t!=t}let I={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},L={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},N={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},R={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},F={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class V{static getFirstMatch(e,t){let r=t.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,t){let r=t.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){let t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){let t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){let i=V.getVersionPrecision(e),n=V.getVersionPrecision(t),s=Math.max(i,n),o=0,a=V.map([e,t],e=>{let t=s-V.getVersionPrecision(e),r=e+Array(t+1).join(".0");return V.map(r.split("."),e=>Array(20-e.length).join("0")+e).reverse()});for(r&&(o=s-Math.min(i,n)),s-=1;s>=o;){if(a[0][s]>a[1][s])return 1;if(a[0][s]===a[1][s]){if(s===o)return 0;s-=1}else if(a[0][s]<a[1][s])return -1}}static map(e,t){let r;let i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i}static find(e,t){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){let i=e[r];if(t(i,r))return i}}static assign(e,...t){let r,i;if(Object.assign)return Object.assign(e,...t);for(r=0,i=t.length;r<i;r+=1){let i=t[r];"object"==typeof i&&null!==i&&Object.keys(i).forEach(t=>{e[t]=i[t]})}return e}static getBrowserAlias(e){return I[e]}static getBrowserTypeByAlias(e){return L[e]||""}}let q=/version\/(\d+(\.?_?\d+)+)/i,U=[{test:[/googlebot/i],describe(e){let t={name:"Googlebot"},r=V.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){let t={name:"Opera"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){let t={name:"Opera"},r=V.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){let t={name:"Samsung Internet for Android"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){let t={name:"NAVER Whale Browser"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){let t={name:"MZ Browser"},r=V.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){let t={name:"Focus"},r=V.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){let t={name:"Swing"},r=V.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){let t={name:"Opera Coast"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){let t={name:"Opera Touch"},r=V.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){let t={name:"Yandex Browser"},r=V.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){let t={name:"UC Browser"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){let t={name:"Maxthon"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){let t={name:"Epiphany"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){let t={name:"Puffin"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){let t={name:"Sleipnir"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){let t={name:"K-Meleon"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){let t={name:"WeChat"},r=V.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){let t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=V.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){let t={name:"Internet Explorer"},r=V.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){let t={name:"Microsoft Edge"},r=V.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){let t={name:"Microsoft Edge"},r=V.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){let t={name:"Vivaldi"},r=V.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){let t={name:"SeaMonkey"},r=V.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){let t={name:"Sailfish"},r=V.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){let t={name:"Amazon Silk"},r=V.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){let t={name:"PhantomJS"},r=V.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){let t={name:"SlimerJS"},r=V.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){let t={name:"BlackBerry"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){let t={name:"WebOS Browser"},r=V.getFirstMatch(q,e)||V.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){let t={name:"Bada"},r=V.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){let t={name:"Tizen"},r=V.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){let t={name:"QupZilla"},r=V.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){let t={name:"Firefox"},r=V.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){let t={name:"Electron"},r=V.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){let t={name:"Miui"},r=V.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){let t={name:"Chromium"},r=V.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){let t={name:"Chrome"},r=V.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){let t={name:"Google Search"},r=V.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){let t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){let t={name:"Android Browser"},r=V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){let t={name:"PlayStation 4"},r=V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){let t={name:"Safari"},r=V.getFirstMatch(q,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){let t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:V.getFirstMatch(t,e),version:V.getSecondMatch(t,e)}}}];var B=[{test:[/Roku\/DVP/],describe(e){let t=V.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:R.Roku,version:t}}},{test:[/windows phone/i],describe(e){let t=V.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:R.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){let t=V.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=V.getWindowsVersionName(t);return{name:R.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){let t={name:R.iOS},r=V.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){let t=V.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=V.getMacOSVersionName(t),i={name:R.MacOS,version:t};return r&&(i.versionName=r),i}},{test:[/(ipod|iphone|ipad)/i],describe(e){let t=V.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:R.iOS,version:t}}},{test(e){let t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){let t=V.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=V.getAndroidVersionName(t),i={name:R.Android,version:t};return r&&(i.versionName=r),i}},{test:[/(web|hpw)[o0]s/i],describe(e){let t=V.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:R.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){let t=V.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||V.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||V.getFirstMatch(/\bbb(\d+)/i,e);return{name:R.BlackBerry,version:t}}},{test:[/bada/i],describe(e){let t=V.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:R.Bada,version:t}}},{test:[/tizen/i],describe(e){let t=V.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:R.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:R.Linux})},{test:[/CrOS/],describe:()=>({name:R.ChromeOS})},{test:[/PlayStation 4/],describe(e){let t=V.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:R.PlayStation4,version:t}}}],$=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){let t=V.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:N.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:N.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:N.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:N.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:N.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:N.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:N.tablet})},{test(e){let t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){let t=V.getFirstMatch(/(ipod|iphone)/i,e);return{type:N.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:N.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:N.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:N.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:N.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:N.mobile,vendor:"Microsoft"})},{test(e){let t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:N.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:N.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:N.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:N.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:N.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:N.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:N.tv})}],z=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:F.Blink};let t=V.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:F.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){let t={name:F.Trident},r=V.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:e=>e.test(/presto/i),describe(e){let t={name:F.Presto},r=V.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){let t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){let t={name:F.Gecko},r=V.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:F.Blink})},{test:[/(apple)?webkit/i],describe(e){let t={name:F.WebKit},r=V.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class J{constructor(e,t=!1){if(null==e||""===e)throw Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};let e=V.find(U,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};let e=V.find(B,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){let{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){let{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};let e=V.find($,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};let e=V.find(z,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return V.assign({},this.parsedResult)}satisfies(e){let t={},r=0,i={},n=0;if(Object.keys(e).forEach(s=>{let o=e[s];"string"==typeof o?(i[s]=o,n+=1):"object"==typeof o&&(t[s]=o,r+=1)}),r>0){let e=Object.keys(t),r=V.find(e,e=>this.isOS(e));if(r){let e=this.satisfies(t[r]);if(void 0!==e)return e}let i=V.find(e,e=>this.isPlatform(e));if(i){let e=this.satisfies(t[i]);if(void 0!==e)return e}}if(n>0){let e=Object.keys(i),t=V.find(e,e=>this.isBrowser(e,!0));if(void 0!==t)return this.compareVersion(i[t])}}isBrowser(e,t=!1){let r=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),n=V.getBrowserTypeByAlias(i);return t&&n&&(i=n.toLowerCase()),i===r}compareVersion(e){let t=[0],r=e,i=!1,n=this.getBrowserVersion();if("string"==typeof n)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(i=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(i=!0,r=e.substr(1)),t.indexOf(V.compareVersions(n,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(e=>this.is(e))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class G{static getParser(e,t=!1){if("string"!=typeof e)throw Error("UserAgent should be a string");return new J(e,t)}static parse(e){return new J(e).getResult()}static get BROWSER_MAP(){return L}static get ENGINE_MAP(){return F}static get OS_MAP(){return R}static get PLATFORMS_MAP(){return N}}function W(){return Date.now()+Math.random().toString()}function Y(){throw Error("Method must be implemented in subclass")}function H(e,t){return null!=t&&t.proxyUrl?t.proxyUrl+("/"===t.proxyUrl.slice(-1)?"":"/")+e.substring(8):e}function K(e){return null!=e&&e.callObjectBundleUrlOverride?e.callObjectBundleUrlOverride:H("https://c.daily.co/call-machine/versioned/".concat("0.85.0","/static/call-machine-object-bundle.js"),e)}function Q(e){try{new URL(e)}catch(e){return!1}return!0}let X="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Z="8.55.0",ee=globalThis;function et(e,t,r){let i=r||ee,n=i.__SENTRY__=i.__SENTRY__||{},s=n[Z]=n[Z]||{};return s[e]||(s[e]=t())}let er="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ei=["debug","info","warn","error","log","assert","trace"],en={};function es(e){if(!("console"in ee))return e();let t=ee.console,r={},i=Object.keys(en);i.forEach(e=>{let i=en[e];r[e]=t[e],t[e]=i});try{return e()}finally{i.forEach(e=>{t[e]=r[e]})}}let eo=et("logger",function(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return er?ei.forEach(r=>{t[r]=(...t)=>{e&&es(()=>{ee.console[r](`Sentry Logger [${r}]:`,...t)})}}):ei.forEach(e=>{t[e]=()=>{}}),t}),ea=/\(error: (.*)\)/,el=/captureMessage|captureException/;function ec(e){return e[e.length-1]||{}}let eu="<anonymous>";function ed(e){try{return e&&"function"==typeof e&&e.name||eu}catch(e){return eu}}function eh(e){let t=e.exception;if(t){let e=[];try{return t.values.forEach(t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)}),e}catch(e){return}}}let ep={},em={};function ef(e,t){ep[e]=ep[e]||[],ep[e].push(t)}function eg(e,t){if(!em[e]){em[e]=!0;try{t()}catch(t){er&&eo.error(`Error while instrumenting ${e}`,t)}}}function ev(e,t){let r=e&&ep[e];if(r)for(let i of r)try{i(t)}catch(t){er&&eo.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${ed(i)}
Error:`,t)}}let ey=null;function eb(){ey=ee.onerror,ee.onerror=function(e,t,r,i,n){return ev("error",{column:i,error:n,line:r,msg:e,url:t}),!!ey&&ey.apply(this,arguments)},ee.onerror.__SENTRY_INSTRUMENTED__=!0}let ew=null;function e_(){ew=ee.onunhandledrejection,ee.onunhandledrejection=function(e){return ev("unhandledrejection",e),!ew||ew.apply(this,arguments)},ee.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function eS(){return ek(ee),ee}function ek(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Z,t[Z]=t[Z]||{}}let eE=Object.prototype.toString;function ex(e){switch(eE.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return eL(e,Error)}}function eT(e,t){return eE.call(e)===`[object ${t}]`}function eC(e){return eT(e,"ErrorEvent")}function eA(e){return eT(e,"DOMError")}function eP(e){return eT(e,"String")}function eM(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function ej(e){return null===e||eM(e)||"object"!=typeof e&&"function"!=typeof e}function eO(e){return eT(e,"Object")}function eD(e){return"undefined"!=typeof Event&&eL(e,Event)}function eI(e){return!!(e&&e.then&&"function"==typeof e.then)}function eL(e,t){try{return e instanceof t}catch(e){return!1}}function eN(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function eR(e,t={}){if(!e)return"<unknown>";try{let r,i=e,n=[],s=0,o=0,a=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||80;for(;i&&s++<5&&(r=function(e,t){let r=[];if(!e||!e.tagName)return"";if(ee.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}r.push(e.tagName.toLowerCase());let i=t&&t.length?t.filter(t=>e.getAttribute(t)).map(t=>[t,e.getAttribute(t)]):null;if(i&&i.length)i.forEach(e=>{r.push(`[${e[0]}="${e[1]}"]`)});else{e.id&&r.push(`#${e.id}`);let t=e.className;if(t&&eP(t))for(let e of t.split(/\s+/))r.push(`.${e}`)}for(let t of["aria-label","type","name","title","alt"]){let i=e.getAttribute(t);i&&r.push(`[${t}="${i}"]`)}return r.join("")}(i,a),!("html"===r||s>1&&o+3*n.length+r.length>=l));)n.push(r),o+=r.length,i=i.parentNode;return n.reverse().join(" > ")}catch(e){return"<unknown>"}}function eF(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function eV(e,t){if(!Array.isArray(e))return"";let r=[];for(let t=0;t<e.length;t++){let i=e[t];try{eN(i)?r.push("[VueViewModel]"):r.push(String(i))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function eq(e,t=[],r=!1){return t.some(t=>(function(e,t,r=!1){return!!eP(e)&&(eT(t,"RegExp")?t.test(e):!!eP(t)&&(r?e===t:e.includes(t)))})(e,t,r))}function eU(e,t,r){if(!(t in e))return;let i=e[t],n=r(i);"function"==typeof n&&e$(n,i);try{e[t]=n}catch(r){er&&eo.log(`Failed to replace method "${t}" in object`,e)}}function eB(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){er&&eo.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function e$(e,t){try{let r=t.prototype||{};e.prototype=t.prototype=r,eB(e,"__sentry_original__",t)}catch(e){}}function ez(e){return e.__sentry_original__}function eJ(e){if(ex(e))return{message:e.message,name:e.name,stack:e.stack,...eW(e)};if(eD(e)){let t={type:e.type,target:eG(e.target),currentTarget:eG(e.currentTarget),...eW(e)};return"undefined"!=typeof CustomEvent&&eL(e,CustomEvent)&&(t.detail=e.detail),t}return e}function eG(e){try{return"undefined"!=typeof Element&&eL(e,Element)?eR(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function eW(e){if("object"==typeof e&&null!==e){let t={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function eY(e){return function e(t,r){if(function(e){if(!eO(e))return!1;try{let t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(t)){let i=r.get(t);if(void 0!==i)return i;let n={};for(let i of(r.set(t,n),Object.getOwnPropertyNames(t)))void 0!==t[i]&&(n[i]=e(t[i],r));return n}if(Array.isArray(t)){let i=r.get(t);if(void 0!==i)return i;let n=[];return r.set(t,n),t.forEach(t=>{n.push(e(t,r))}),n}return t}(e,new Map)}function eH(){return Date.now()/1e3}let eK=function(){let{performance:e}=ee;if(!e||!e.now)return eH;let t=Date.now()-e.now(),r=null==e.timeOrigin?t:e.timeOrigin;return()=>(r+e.now())/1e3}();function eQ(){let e=ee.crypto||ee.msCrypto,t=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(t=()=>{let t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(e){}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function eX(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function eZ(e){let{message:t,event_id:r}=e;if(t)return t;let i=eX(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||r||"<unknown>":r||"<unknown>"}function e0(e,t,r){let i=e.exception=e.exception||{},n=i.values=i.values||[],s=n[0]=n[0]||{};s.value||(s.value=t||""),s.type||(s.type=r||"Error")}function e1(e,t){let r=eX(e);if(!r)return;let i=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...i,...t},t&&"data"in t){let e={...i&&i.data,...t.data};r.mechanism.data=e}}function e2(e){if(function(e){try{return e.__sentry_captured__}catch(e){}}(e))return!0;try{eB(e,"__sentry_captured__",!0)}catch(e){}return!1}function e5(e){return new e4(t=>{t(e)})}function e3(e){return new e4((t,r)=>{r(e)})}(()=>{let{performance:e}=ee;if(!e||!e.now)return;let t=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+t-r):36e5,n=e.timing&&e.timing.navigationStart,s="number"==typeof n?Math.abs(n+t-r):36e5;(i<36e5||s<36e5)&&i<=s&&e.timeOrigin})(),function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(T||(T={}));class e4{constructor(e){e4.prototype.__init.call(this),e4.prototype.__init2.call(this),e4.prototype.__init3.call(this),e4.prototype.__init4.call(this),this._state=T.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new e4((r,i)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){i(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){i(e)}else i(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new e4((t,r)=>{let i,n;return this.then(t=>{n=!1,i=t,e&&e()},t=>{n=!0,i=t,e&&e()}).then(()=>{n?r(i):t(i)})})}__init(){this._resolve=e=>{this._setResult(T.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(T.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===T.PENDING&&(eI(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===T.PENDING)return;let e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(this._state===T.RESOLVED&&e[1](this._value),this._state===T.REJECTED&&e[2](this._value),e[0]=!0)})}}}function e9(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||eK(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:eQ()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{let t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function e6(){return eQ().substring(16)}function e8(e,t,r=2){if(!t||"object"!=typeof t||r<=0)return t;if(e&&t&&0===Object.keys(t).length)return e;let i={...e};for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=e8(i[e],t[e],r-1));return i}let e7="_sentrySpan";function te(e,t){t?eB(e,e7,t):delete e[e7]}class tt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:eQ(),spanId:e6()}}clone(){let e=new tt;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,te(e,this[e7]),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&e9(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;let t="function"==typeof e?e(this):e,[r,i]=t instanceof tr?[t.getScopeData(),t.getRequestSession()]:eO(t)?[e,e.requestSession]:[],{tags:n,extra:s,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,te(this,void 0),this._attachments=[],this.setPropagationContext({traceId:eQ()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){let r="number"==typeof t?t:100;if(r<=0)return this;let i={timestamp:eH(),...e};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[e7]}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=e8(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:e6(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,t){let r=t&&t.event_id?t.event_id:eQ();if(!this._client)return eo.warn("No client configured on scope - will not capture exception!"),r;let i=Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:r},this),r}captureMessage(e,t,r){let i=r&&r.event_id?r.event_id:eQ();if(!this._client)return eo.warn("No client configured on scope - will not capture message!"),i;let n=Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:n,...r,event_id:i},this),i}captureEvent(e,t){let r=t&&t.event_id?t.event_id:eQ();return this._client?this._client.captureEvent(e,{...t,event_id:r},this):eo.warn("No client configured on scope - will not capture event!"),r}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}let tr=tt;class ti{constructor(e,t){let r,i;r=e||new tr,i=t||new tr,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){let t;let r=this._pushScope();try{t=e(r)}catch(e){throw this._popScope(),e}return eI(t)?t.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function tn(){let e=ek(eS());return e.stack=e.stack||new ti(et("defaultCurrentScope",()=>new tr),et("defaultIsolationScope",()=>new tr))}function ts(e){return tn().withScope(e)}function to(e,t){let r=tn();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function ta(e){return tn().withScope(()=>e(tn().getIsolationScope()))}function tl(e){let t=ek(e);return t.acs?t.acs:{withIsolationScope:ta,withScope:ts,withSetScope:to,withSetIsolationScope:(e,t)=>ta(t),getCurrentScope:()=>tn().getScope(),getIsolationScope:()=>tn().getIsolationScope()}}function tc(){return tl(eS()).getCurrentScope()}function tu(){return tl(eS()).getIsolationScope()}function td(){return tc().getClient()}let th=/^sentry-/;function tp(e){return e.split(",").map(e=>e.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((e,[t,r])=>(t&&r&&(e[t]=r),e),{})}let tm=!1;function tf(e){return"number"==typeof e?tg(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?tg(e.getTime()):eK()}function tg(e){return e>9999999999?e/1e3:e}function tv(e){if("function"==typeof e.getSpanJSON)return e.getSpanJSON();try{let{spanId:t,traceId:r}=e.spanContext();if(e.attributes&&e.startTime&&e.name&&e.endTime&&e.status){let{attributes:i,startTime:n,name:s,endTime:o,parentSpanId:a,status:l}=e;return eY({span_id:t,trace_id:r,data:i,description:s,parent_span_id:a,start_timestamp:tf(n),timestamp:tf(o)||void 0,status:function(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}(l),op:i["sentry.op"],origin:i["sentry.origin"],_metrics_summary:function(e){let t=e._sentryMetrics;if(!t)return;let r={};for(let[,[e,i]]of t)(r[e]||(r[e]=[])).push(eY(i));return r}(e)})}return{span_id:t,trace_id:r}}catch(e){return{}}}function ty(e){return e._sentryRootSpan||e}let tb="production";function tw(e,t){let r=t.getOptions(),{publicKey:i}=t.getDsn()||{},n=eY({environment:r.environment||tb,release:r.release,public_key:i,trace_id:e});return t.emit("createDsc",n),n}let t_=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function tS(e,t=!1){let{host:r,path:i,pass:n,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&n?`:${n}`:""}@${r}${s?`:${s}`:""}/${i?`${i}/`:i}${o}`}function tk(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function tE(e,t=100,r=1/0){try{return function e(t,r,i=1/0,n=1/0,s=function(){let e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){let[o,a]=s;if(null==r||["boolean","string"].includes(typeof r)||"number"==typeof r&&Number.isFinite(r))return r;let l=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(eN(t))return"[VueViewModel]";if(eO(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${ed(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;let r=function(e){let t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}}(t,r);if(!l.startsWith("[object "))return l;if(r.__sentry_skip_normalization__)return r;let c="number"==typeof r.__sentry_override_normalization_depth__?r.__sentry_override_normalization_depth__:i;if(0===c)return l.replace("object ","");if(o(r))return"[Circular ~]";if(r&&"function"==typeof r.toJSON)try{return e("",r.toJSON(),c-1,n,s)}catch(e){}let u=Array.isArray(r)?[]:{},d=0,h=eJ(r);for(let t in h){if(!Object.prototype.hasOwnProperty.call(h,t))continue;if(d>=n){u[t]="[MaxProperties ~]";break}let r=h[t];u[t]=e(t,r,c-1,n,s),d++}return a(r),u}("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function tx(e,t=[]){return[e,t]}function tT(e,t){for(let r of e[1])if(t(r,r[0].type))return!0;return!1}function tC(e){return ee.__SENTRY__&&ee.__SENTRY__.encodePolyfill?ee.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}let tA={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function tP(e){if(!e||!e.sdk)return;let{name:t,version:r}=e.sdk;return{name:t,version:r}}function tM(e,t){let{extra:r,tags:i,user:n,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:h,transactionName:p,span:m}=t;tj(e,"extra",r),tj(e,"tags",i),tj(e,"user",n),tj(e,"contexts",s),e.sdkProcessingMetadata=e8(e.sdkProcessingMetadata,a,2),o&&(e.level=o),p&&(e.transactionName=p),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function tj(e,t,r){e[t]=e8(e[t],r,1)}let tO=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function tD(e,t){return tc().captureEvent(e,t)}function tI(e){let t=td(),r=tu(),i=tc(),{release:n,environment:s=tb}=t&&t.getOptions()||{},{userAgent:o}=ee.navigator||{},a=function(e){let t=eK(),r={sid:eQ(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>eY({sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:"number"==typeof r.did||"string"==typeof r.did?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})};return e&&e9(r,e),r}({release:n,environment:s,user:i.getUser()||r.getUser(),...o&&{userAgent:o},...e}),l=r.getSession();return l&&"ok"===l.status&&e9(l,{status:"exited"}),tL(),r.setSession(a),i.setSession(a),a}function tL(){let e;let t=tu(),r=tc(),i=r.getSession()||t.getSession();i&&(e={},"ok"===i.status&&(e={status:"exited"}),e9(i,e)),tN(),t.setSession(),r.setSession()}function tN(){let e=tu(),t=tc(),r=td(),i=t.getSession()||e.getSession();i&&r&&r.captureSession(i)}function tR(e=!1){e?tL():tN()}let tF=[];function tV(e,t){for(let r of t)r&&r.afterAllSetup&&r.afterAllSetup(e)}function tq(e,t,r){if(r[t.name])X&&eo.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===tF.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),tF.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,i)=>r(t,i,e))}if("function"==typeof t.processEvent){let r=t.processEvent.bind(t),i=Object.assign((t,i)=>r(t,i,e),{id:t.name});e.addEventProcessor(i)}X&&eo.log(`Integration installed: ${t.name}`)}}class tU extends Error{constructor(e,t="warn"){super(e),this.message=e,this.logLevel=t}}let tB="Not capturing exception because it's already been captured.";class t${constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){let t="string"==typeof e?function(e){let t=t_.exec(e);if(!t)return void es(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});let[r,i,n="",s="",o="",a=""]=t.slice(1),l="",c=a,u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){let e=c.match(/^\d+/);e&&(c=e[0])}return tk({host:s,pass:n,path:l,projectId:c,port:o,protocol:r,publicKey:i})}(e):tk(e);if(t&&function(e){if(!er)return!0;let{port:t,projectId:r,protocol:i}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(eo.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(r.match(/^\d+$/)?"http"===i||"https"===i?t&&isNaN(parseInt(t,10))&&(eo.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(eo.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),1):(eo.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}(e.dsn):X&&eo.warn("No DSN provided, client will not send events."),this._dsn){let t=function(e,t,r){return t||`${function(e){let t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/?${function(e,t){let r={sentry_version:"7"};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(r).toString()}(e,r)}`}(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}let t=["enableTracing","tracesSampleRate","tracesSampler"].find(t=>t in e&&null==e[t]);t&&es(()=>{console.warn(`[Sentry] Deprecation warning: \`${t}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(e,t,r){let i=eQ();if(e2(e))return X&&eo.log(tB),i;let n={event_id:i,...t};return this._process(this.eventFromException(e,n).then(e=>this._captureEvent(e,n,r))),n.event_id}captureMessage(e,t,r,i){let n={event_id:eQ(),...r},s=eM(e)?e:String(e),o=ej(e)?this.eventFromMessage(s,t,n):this.eventFromException(e,n);return this._process(o.then(e=>this._captureEvent(e,n,i))),n.event_id}captureEvent(e,t,r){let i=eQ();if(t&&t.originalException&&e2(t.originalException))return X&&eo.log(tB),i;let n={event_id:i,...t},s=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,n,s||r)),n.event_id}captureSession(e){"string"!=typeof e.release?X&&eo.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),e9(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){let t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>t.flush(e).then(e=>r&&e))):e5(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){let t=this._integrations[e.name];tq(this,e,this._integrations),t||tV(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=function(e,t,r,i){var n;let s=tP(r),o=e.type&&"replay_event"!==e.type?e.type:"event";(n=r&&r.sdk)&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||n.name,e.sdk.version=e.sdk.version||n.version,e.sdk.integrations=[...e.sdk.integrations||[],...n.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...n.packages||[]]);let a=function(e,t,r,i){let n=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&i&&{dsn:tS(i)},...n&&{trace:eY({...n})}}}(e,s,i,t);return delete e.sdkProcessingMetadata,tx(a,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(let e of t.attachments||[])r=function(e,t){let[r,i]=e;return[r,[...i,t]]}(r,function(e){let t="string"==typeof e.data?tC(e.data):e.data;return[eY({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}(e));let i=this.sendEnvelope(r);i&&i.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){let t=function(e,t,r,i){let n=tP(r);return tx({sent_at:(new Date).toISOString(),...n&&{sdk:n},...!!i&&t&&{dsn:tS(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){let i="number"==typeof r?r:1,n=`${e}:${t}`;X&&eo.log(`Recording outcome: "${n}"${i>1?` (${i} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+i}}on(e,t){let r=this._hooks[e]=this._hooks[e]||[];return r.push(t),()=>{let e=r.indexOf(t);e>-1&&r.splice(e,1)}}emit(e,...t){let r=this._hooks[e];r&&r.forEach(e=>e(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,e=>(X&&eo.error("Error while sending envelope:",e),e)):(X&&eo.error("Transport disabled"),e5({}))}_setupIntegrations(){let{integrations:e}=this._options;this._integrations=function(e,t){let r={};return t.forEach(t=>{t&&tq(e,t,r)}),r}(this,e),tV(this,e)}_updateSessionFromEvent(e,t){let r="fatal"===t.level,i=!1,n=t.exception&&t.exception.values;if(n)for(let e of(i=!0,n)){let t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}let s="ok"===e.status;(s&&0===e.errors||s&&r)&&(e9(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new e4(t=>{let r=0,i=setInterval(()=>{0==this._numProcessing?(clearInterval(i),t(!0)):(r+=1,e&&r>=e&&(clearInterval(i),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r=tc(),o=tu()){let a=this.getOptions(),l=Object.keys(this._integrations);return!t.integrations&&l.length>0&&(t.integrations=l),this.emit("preprocessEvent",e,t),e.type||o.setLastEventId(e.event_id||t.event_id),(function(e,t,r,o,a,l){let{normalizeDepth:c=3,normalizeMaxBreadth:u=1e3}=e,d={...t,event_id:t.event_id||r.event_id||eQ(),timestamp:t.timestamp||eH()},h=r.integrations||e.integrations.map(e=>e.name);(function(e,t){let{environment:r,release:i,dist:n,maxValueLength:s=250}=t;e.environment=e.environment||r||tb,!e.release&&i&&(e.release=i),!e.dist&&n&&(e.dist=n),e.message&&(e.message=eF(e.message,s));let o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=eF(o.value,s));let a=e.request;a&&a.url&&(a.url=eF(a.url,s))})(d,e),h.length>0&&(d.sdk=d.sdk||{},d.sdk.integrations=[...d.sdk.integrations||[],...h]),a&&a.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){let r=function(e){let t=ee._sentryDebugIds;if(!t)return{};let r=Object.keys(t);return s&&r.length===n||(n=r.length,s=r.reduce((r,n)=>{i||(i={});let s=i[n];if(s)r[s[0]]=s[1];else{let s=e(n);for(let e=s.length-1;e>=0;e--){let o=s[e],a=o&&o.filename,l=t[n];if(a&&l){r[a]=l,i[n]=[a,l];break}}}return r},{})),s}(t);try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{r&&e.filename&&(e.debug_id=r[e.filename])})})}catch(e){}}(d,e.stackParser);let p=function(e,t){if(!t)return e;let r=e?e.clone():new tr;return r.update(t),r}(o,r.captureContext);r.mechanism&&e1(d,r.mechanism);let m=a?a.getEventProcessors():[],f=et("globalScope",()=>new tr).getScopeData();l&&tM(f,l.getScopeData()),p&&tM(f,p.getScopeData());let g=[...r.attachments||[],...f.attachments];return g.length&&(r.attachments=g),function(e,t){let{fingerprint:r,span:i,breadcrumbs:n,sdkProcessingMetadata:s}=t;(function(e,t){let{extra:r,tags:i,user:n,contexts:s,level:o,transactionName:a}=t,l=eY(r);l&&Object.keys(l).length&&(e.extra={...l,...e.extra});let c=eY(i);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});let u=eY(n);u&&Object.keys(u).length&&(e.user={...u,...e.user});let d=eY(s);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&"transaction"!==e.type&&(e.transaction=a)})(e,t),i&&function(e,t){e.contexts={trace:function(e){let{spanId:t,traceId:r,isRemote:i}=e.spanContext();return eY({parent_span_id:i?t:tv(e).parent_span_id,span_id:i?e6():t,trace_id:r})}(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:function(e){let t=td();if(!t)return{};let r=ty(e),i=r._frozenDsc;if(i)return i;let n=r.spanContext().traceState,s=n&&n.get("sentry.dsc"),o=s&&function(e){let t=function(e){if(e&&(eP(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce((e,t)=>(Object.entries(tp(t)).forEach(([t,r])=>{e[t]=r}),e),{}):tp(e)}(e);if(!t)return;let r=Object.entries(t).reduce((e,[t,r])=>(t.match(th)&&(e[t.slice(7)]=r),e),{});return Object.keys(r).length>0?r:void 0}(s);if(o)return o;let a=tw(e.spanContext().traceId,t),l=tv(r),c=l.data||{},u=c["sentry.sample_rate"];null!=u&&(a.sample_rate=`${u}`);let d=c["sentry.source"],h=l.description;return"url"!==d&&h&&(a.transaction=h),function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let t=td(),r=t&&t.getOptions();return!!r&&(r.enableTracing||"tracesSampleRate"in r||"tracesSampler"in r)}()&&(a.sampled=String(function(e){let{traceFlags:t}=e.spanContext();return 1===t}(r))),t.emit("createDsc",a,r),a}(t),...e.sdkProcessingMetadata};let r=tv(ty(t)).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,i),e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],r&&(e.fingerprint=e.fingerprint.concat(r)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint,function(e,t){let r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,n),e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...s}}(d,f),(function e(t,r,i,n=0){return new e4((s,o)=>{let a=t[n];if(null===r||"function"!=typeof a)s(r);else{let l=a({...r},i);X&&a.id&&null===l&&eo.log(`Event processor "${a.id}" dropped event`),eI(l)?l.then(r=>e(t,r,i,n+1).then(s)).then(null,o):e(t,l,i,n+1).then(s).then(null,o)}})})([...m,...f.eventProcessors],d,r).then(e=>(e&&function(e){let t={};try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})})}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let r=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{r.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof c&&c>0?function(e,t,r){if(!e)return null;let i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:tE(e.data,t,r)}}))},...e.user&&{user:tE(e.user,t,r)},...e.contexts&&{contexts:tE(e.contexts,t,r)},...e.extra&&{extra:tE(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=tE(e.contexts.trace.data,t,r))),e.spans&&(i.spans=e.spans.map(e=>({...e,...e.data&&{data:tE(e.data,t,r)}}))),e.contexts&&e.contexts.flags&&i.contexts&&(i.contexts.flags=tE(e.contexts.flags,3,r)),i}(e,c,u):e))})(a,e,t,r,this,o).then(e=>{if(null===e)return e;e.contexts={trace:function(e){let{traceId:t,spanId:r,parentSpanId:i}=e.getPropagationContext();return eY({trace_id:t,span_id:r,parent_span_id:i})}(r),...e.contexts};let t=function(e,t){let r=t.getPropagationContext();return r.dsc||tw(r.traceId,e)}(this,r);return e.sdkProcessingMetadata={dynamicSamplingContext:t,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then(e=>e.event_id,e=>{X&&(e instanceof tU&&"log"===e.logLevel?eo.log(e.message):eo.warn(e))})}_processEvent(e,t,r){let i=this.getOptions(),{sampleRate:n}=i,s=tJ(e),o=tz(e),a=e.type||"error",l=`before send for type \`${a}\``,c=void 0===n?void 0:function(e){if("boolean"==typeof e)return Number(e);let t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||t<0||t>1))return t;X&&eo.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}(n);if(o&&"number"==typeof c&&Math.random()>c)return this.recordDroppedEvent("sample_rate","error",e),e3(new tU(`Discarding event because it's not included in the random sample (sampling rate = ${n})`,"log"));let u="replay_event"===a?"replay":a,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,r,d).then(r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new tU("An event processor returned `null`, will not send event.","log");return t.data&&!0===t.data.__sentry__?r:function(e,t){let r=`${t} must return \`null\` or a valid event.`;if(eI(e))return e.then(e=>{if(!eO(e)&&null!==e)throw new tU(r);return e},e=>{throw new tU(`${t} rejected with ${e}`)});if(!eO(e)&&null!==e)throw new tU(r);return e}(function(e,t,r,i){let{beforeSend:n,beforeSendTransaction:s,beforeSendSpan:o}=t;if(tz(r)&&n)return n(r,i);if(tJ(r)){if(r.spans&&o){let t=[];for(let i of r.spans){let r=o(i);r?t.push(r):(tm||(es(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),tm=!0),e.recordDroppedEvent("before_send","span"))}r.spans=t}if(s){if(r.spans){let e=r.spans.length;r.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(r,i)}}return r}(this,i,r,t),l)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",u,e),s){let t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new tU(`${l} returned \`null\`, will not send event.`,"log")}let n=r&&r.getSession();if(!s&&n&&this._updateSessionFromEvent(n,i),s){let e=(i.sdkProcessingMetadata&&i.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}let o=i.transaction_info;return s&&o&&i.transaction!==e.transaction&&(i.transaction_info={...o,source:"custom"}),this.sendEvent(i,t),i}).then(null,e=>{if(e instanceof tU)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new tU(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{let[r,i]=e.split(":");return{reason:r,category:i,quantity:t}})}_flushOutcomes(){var e,t;X&&eo.log("Flushing outcomes...");let r=this._clearOutcomes();if(0===r.length)return void(X&&eo.log("No outcomes to send"));if(!this._dsn)return void(X&&eo.log("No dsn provided, will not send outcomes"));X&&eo.log("Sending outcomes:",r);let i=tx((e=this._options.tunnel&&tS(this._dsn))?{dsn:e}:{},[[{type:"client_report"},{timestamp:t||eH(),discarded_events:r}]]);this.sendEnvelope(i)}}function tz(e){return void 0===e.type}function tJ(e){return"transaction"===e.type}function tG(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function tW(e,t){let r=td(),i=tu();if(!r)return;let{beforeBreadcrumb:n=null,maxBreadcrumbs:s=100}=r.getOptions();if(s<=0)return;let o={timestamp:eH(),...e},a=n?es(()=>n(o,t)):o;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),i.addBreadcrumb(a,s))}let tY=new WeakMap,tH=()=>({name:"FunctionToString",setupOnce(){o=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=ez(this),r=tY.has(td())&&void 0!==t?t:this;return o.apply(r,e)}}catch(e){}},setup(e){tY.set(e,!0)}}),tK=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],tQ=(e={})=>({name:"InboundFilters",processEvent:(t,r,i)=>!function(e,t){var r;return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(X&&eo.warn(`Event dropped due to being internal Sentry Error.
Event: ${eZ(e)}`),!0):(r=t.ignoreErrors,!e.type&&r&&r.length&&(function(e){let t;let r=[];e.message&&r.push(e.message);try{t=e.exception.values[e.exception.values.length-1]}catch(e){}return t&&t.value&&(r.push(t.value),t.type&&r.push(`${t.type}: ${t.value}`)),r})(e).some(e=>eq(e,r)))?(X&&eo.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${eZ(e)}`),!0):e.type||!e.exception||!e.exception.values||0===e.exception.values.length||e.message||e.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value)?!function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;let r=e.transaction;return!!r&&eq(r,t)}(e,t.ignoreTransactions)?!function(e,t){if(!t||!t.length)return!1;let r=tX(e);return!!r&&eq(r,t)}(e,t.denyUrls)?!function(e,t){if(!t||!t.length)return!0;let r=tX(e);return!r||eq(r,t)}(e,t.allowUrls)&&(X&&eo.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${eZ(e)}.
Url: ${tX(e)}`),!0):(X&&eo.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${eZ(e)}.
Url: ${tX(e)}`),!0):(X&&eo.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${eZ(e)}`),!0):(X&&eo.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${eZ(e)}`),!0)}(t,function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:tK],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i.getOptions()))?t:null});function tX(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){let r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return X&&eo.error(`Cannot extract url for event ${eZ(e)}`),null}}function tZ(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function t0(e,t,r,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:i}}function t1(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let r=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:i,relative:t[5]+r+i}}function t2(){"console"in ee&&ei.forEach(function(e){e in ee.console&&eU(ee.console,e,function(t){return en[e]=t,function(...t){ev("console",{args:t,level:e});let r=en[e];r&&r.apply(ee.console,t)}})})}let t5=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{var r;if((r=e)&&(function(e,t){let r=e.message,i=t.message;return!!((r||i)&&(!r||i)&&(r||!i)&&r===i&&t4(e,t)&&t3(e,t))}(t,r)||function(e,t){let r=t9(t),i=t9(e);return!!(r&&i&&r.type===i.type&&r.value===i.value&&t4(e,t)&&t3(e,t))}(t,r)))return X&&eo.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function t3(e,t){let r=eh(e),i=eh(t);if(!r&&!i)return!0;if(r&&!i||!r&&i||i.length!==r.length)return!1;for(let e=0;e<i.length;e++){let t=i[e],n=r[e];if(t.filename!==n.filename||t.lineno!==n.lineno||t.colno!==n.colno||t.function!==n.function)return!1}return!0}function t4(e,t){let r=e.fingerprint,i=t.fingerprint;if(!r&&!i)return!0;if(r&&!i||!r&&i)return!1;try{return!(r.join("")!==i.join(""))}catch(e){return!1}}function t9(e){return e.exception&&e.exception.values&&e.exception.values[0]}function t6(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function t8(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function t7(e,t){return!!e&&"object"==typeof e&&!!e[t]}function re(e){return"string"==typeof e?e:e?t7(e,"url")?e.url:e.toString?e.toString():"":""}let rt=0;function rr(e,t={}){if("function"!=typeof e)return e;try{let t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(ez(e))return e}catch(t){return e}let r=function(...r){try{let i=r.map(e=>rr(e,t));return e.apply(this,i)}catch(e){throw rt++,setTimeout(()=>{rt--}),function(...e){let t=tl(eS());if(2===e.length){let[r,i]=e;return r?t.withSetScope(r,i):t.withScope(i)}t.withScope(e[0])}(i=>{var n;i.addEventProcessor(e=>(t.mechanism&&(e0(e,void 0,void 0),e1(e,t.mechanism)),e.extra={...e.extra,arguments:r},e)),tc().captureException(e,function(e){if(e)return e instanceof tr||"function"==typeof e||Object.keys(e).some(e=>tO.includes(e))?{captureContext:e}:e}(n))}),e}};try{for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}e$(r,e),eB(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}let ri="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function rn(e,t){let r=ro(e,t),i={type:function(e){let t=e&&e.name;return!t&&rl(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":t}(t),value:function(e){let t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:rl(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:"No error message"}(t)};return r.length&&(i.stacktrace={frames:r}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function rs(e,t){return{exception:{values:[rn(e,t)]}}}function ro(e,t){let r=t.stacktrace||t.stack||"",i=t&&ra.test(t.message)?1:0,n="number"==typeof t.framesToPop?t.framesToPop:0;try{return e(r,i,n)}catch(e){}return[]}let ra=/Minified React error #\d+;/i;function rl(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function rc(e,t,r,i,n){let s;if(eC(t)&&t.error)return rs(e,t.error);if(eA(t)||eT(t,"DOMException")){if("stack"in t)s=rs(e,t);else{let n=t.name||(eA(t)?"DOMError":"DOMException"),o=t.message?`${n}: ${t.message}`:n;e0(s=ru(e,o,r,i),o)}return"code"in t&&(s.tags={...s.tags,"DOMException.code":`${t.code}`}),s}return ex(t)?rs(e,t):(eO(t)||eD(t)?e1(s=function(e,t,r,i){let n=td(),s=n&&n.getOptions().normalizeDepth,o=function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let r=e[t];if(r instanceof Error)return r}}(t),a={__serialized__:function e(t,r=3,i=102400){let n=tE(t,r);return~-encodeURI(JSON.stringify(n)).split(/%..|./).length>i?e(t,r-1,i):n}(t,s)};if(o)return{exception:{values:[rn(e,o)]},extra:a};let l={exception:{values:[{type:eD(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:function(e,{isUnhandledRejection:t}){let r=function(e,t=40){let r=Object.keys(eJ(e));r.sort();let i=r[0];if(!i)return"[object has no keys]";if(i.length>=t)return eF(i,t);for(let e=r.length;e>0;e--){let i=r.slice(0,e).join(", ");if(!(i.length>t))return e===r.length?i:eF(i,t)}return""}(e),i=t?"promise rejection":"exception";return eC(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:eD(e)?`Event \`${function(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${r}`}(t,{isUnhandledRejection:i})}]},extra:a};if(r){let t=ro(e,r);t.length&&(l.exception.values[0].stacktrace={frames:t})}return l}(e,t,r,n),{synthetic:!0}):(e0(s=ru(e,t,r,i),`${t}`,void 0),e1(s,{synthetic:!0})),s)}function ru(e,t,r,i){let n={};if(i&&r){let i=ro(e,r);i.length&&(n.exception={values:[{value:t,stacktrace:{frames:i}}]}),e1(n,{synthetic:!0})}if(eM(t)){let{__sentry_template_string__:e,__sentry_template_values__:r}=t;return n.logentry={message:e,params:r},n}return n.message=t,n}class rd extends t${constructor(e){let t={parentSpanIsAlwaysRootSpan:!0,...e};(function(e,t,r=[t],i="npm"){let n=e._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${t}`,packages:r.map(e=>({name:`${i}:@sentry/${e}`,version:Z})),version:Z}),e._metadata=n})(t,"browser",["browser"],ee.SENTRY_SDK_SOURCE||"npm"),super(t),t.sendClientReports&&ee.document&&ee.document.addEventListener("visibilitychange",()=>{"hidden"===ee.document.visibilityState&&this._flushOutcomes()})}eventFromException(e,t){return function(e,t,r,i){let n=rc(e,t,r&&r.syntheticException||void 0,i);return e1(n),n.level="error",r&&r.event_id&&(n.event_id=r.event_id),e5(n)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",i,n){let s=ru(e,t,i&&i.syntheticException||void 0,n);return s.level=r,i&&i.event_id&&(s.event_id=i.event_id),e5(s)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(ri&&eo.warn("SDK not enabled, will not capture user feedback."));let t=function(e,{metadata:t,tunnel:r,dsn:i}){return tx({event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!i&&{dsn:tS(i)}},[[{type:"user_report"},e]])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}}let rh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function rp(){if(!ee.document)return;let e=ev.bind(null,"dom"),t=rm(e,!0);ee.document.addEventListener("click",t,!1),ee.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{let r=ee[t],i=r&&r.prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(eU(i,"addEventListener",function(t){return function(r,i,n){if("click"===r||"keypress"==r)try{let i=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},s=i[r]=i[r]||{refCount:0};if(!s.handler){let i=rm(e);s.handler=i,t.call(this,r,i,n)}s.refCount++}catch(e){}return t.call(this,r,i,n)}}),eU(i,"removeEventListener",function(e){return function(t,r,i){if("click"===t||"keypress"==t)try{let r=this.__sentry_instrumentation_handlers__||{},n=r[t];n&&(n.refCount--,n.refCount<=0&&(e.call(this,t,n.handler,i),n.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,i)}}))})}function rm(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;let i=function(e){try{return e.target}catch(e){return null}}(r);if("keypress"===r.type&&(!i||!i.tagName||"INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!i.isContentEditable))return;eB(r,"_sentryCaptured",!0),i&&!i._sentryId&&eB(i,"_sentryId",eQ());let n="keypress"===r.type?"input":r.type;!function(e){if(e.type!==l)return!1;try{if(!e.target||e.target._sentryId!==c)return!1}catch(e){}return!0}(r)&&(e({event:r,name:n,global:t}),l=r.type,c=i?i._sentryId:void 0),clearTimeout(a),a=ee.setTimeout(()=>{c=void 0,l=void 0},1e3)}}function rf(e){let t="history";ef(t,e),eg(t,rg)}function rg(){if(!function(){let e=ee.chrome,t=e&&e.app&&e.app.runtime,r="history"in ee&&!!ee.history.pushState&&!!ee.history.replaceState;return!t&&r}())return;let e=ee.onpopstate;function t(e){return function(...t){let r=t.length>2?t[2]:void 0;if(r){let e=u,t=String(r);u=t,ev("history",{from:e,to:t})}return e.apply(this,t)}}ee.onpopstate=function(...t){let r=ee.location.href,i=u;if(u=r,ev("history",{from:i,to:r}),e)try{return e.apply(this,t)}catch(e){}},eU(ee.history,"pushState",t),eU(ee.history,"replaceState",t)}let rv={},ry="__sentry_xhr_v3__";function rb(){if(!ee.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,r){let i=Error(),n=1e3*eK(),s=eP(r[0])?r[0].toUpperCase():void 0,o=function(e){if(eP(e))return e;try{return e.toString()}catch(e){}}(r[1]);if(!s||!o)return e.apply(t,r);t[ry]={method:s,url:o,request_headers:{}},"POST"===s&&o.match(/sentry_key/)&&(t.__sentry_own_request__=!0);let a=()=>{let e=t[ry];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}ev("xhr",{endTimestamp:1e3*eK(),startTimestamp:n,xhr:t,virtualError:i})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,r)=>(a(),e.apply(t,r))}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,r){let[i,n]=r,s=t[ry];return s&&eP(i)&&eP(n)&&(s.request_headers[i.toLowerCase()]=n),e.apply(t,r)}}),e.apply(t,r)}}),e.send=new Proxy(e.send,{apply(e,t,r){let i=t[ry];return i&&(void 0!==r[0]&&(i.body=r[0]),ev("xhr",{startTimestamp:1e3*eK(),xhr:t})),e.apply(t,r)}})}function rw(e,t=function(e){let t=rv[e];if(t)return t;let r=ee[e];if(t8(r))return rv[e]=r.bind(ee);let i=ee.document;if(i&&"function"==typeof i.createElement)try{let t=i.createElement("iframe");t.hidden=!0,i.head.appendChild(t);let n=t.contentWindow;n&&n[e]&&(r=n[e]),i.head.removeChild(t)}catch(t){rh&&eo.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return r?rv[e]=r.bind(ee):r}("fetch")){let r=0,i=0;return function(e,t,r=function(e){let t=[];function r(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(i){if(!(void 0===e||t.length<e))return e3(new tU("Not adding Promise because buffer limit was reached."));let n=i();return -1===t.indexOf(n)&&t.push(n),n.then(()=>r(n)).then(null,()=>r(n).then(null,()=>{})),n},drain:function(e){return new e4((r,i)=>{let n=t.length;if(!n)return r(!0);let s=setTimeout(()=>{e&&e>0&&r(!1)},e);t.forEach(e=>{e5(e).then(()=>{--n||(clearTimeout(s),r(!0))},i)})})}}}(e.bufferSize||64)){let i={};return{send:function(n){let s=[];if(tT(n,(t,r)=>{let n=tA[r];if(function(e,t,r=Date.now()){return(e[t]||e.all||0)>r}(i,n)){let i=tG(t,r);e.recordDroppedEvent("ratelimit_backoff",n,i)}else s.push(t)}),0===s.length)return e5({});let o=tx(n[0],s),a=t=>{tT(o,(r,i)=>{let n=tG(r,i);e.recordDroppedEvent(t,tA[i],n)})};return r.add(()=>t({body:function(e){let[t,r]=e,i=JSON.stringify(t);function n(e){"string"==typeof i?i="string"==typeof e?i+e:[tC(i),e]:i.push("string"==typeof e?tC(e):e)}for(let e of r){let[t,r]=e;if(n(`
${JSON.stringify(t)}
`),"string"==typeof r||r instanceof Uint8Array)n(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(tE(r))}n(e)}}return"string"==typeof i?i:function(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;for(let i of e)t.set(i,r),r+=i.length;return t}(i)}(o)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&X&&eo.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),i=function(e,{statusCode:t,headers:r},i=Date.now()){let n={...e},s=r&&r["x-sentry-rate-limits"],o=r&&r["retry-after"];if(s)for(let e of s.trim().split(",")){let[t,r,,,s]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(r)for(let e of r.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(n[e]=i+a);else n.all=i+a}else o?n.all=i+function(e,t=Date.now()){let r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;let i=Date.parse(`${e}`);return isNaN(i)?6e4:i-t}(o,i):429===t&&(n.all=i+6e4);return n}(i,e),e),e=>{throw a("network_error"),e})).then(e=>e,e=>{if(e instanceof tU)return X&&eo.error("Skipped sending event because buffer is full."),a("queue_overflow"),e5({});throw e})},flush:e=>r.drain(e)}}(e,function(n){let s=n.body.length;r+=s,i++;let o={body:n.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&i<15,...e.fetchOptions};if(!t)return rv.fetch=void 0,e3("No fetch implementation available");try{return t(e.url,o).then(e=>(r-=s,i--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(e){return rv.fetch=void 0,r-=s,i--,e3(e)}})}function r_(e,t,r,i){let n={filename:e,function:"<anonymous>"===t?"?":t,in_app:!0};return void 0!==r&&(n.lineno=r),void 0!==i&&(n.colno=i),n}let rS=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,rk=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,rE=/\((\S*)(?::(\d+))(?::(\d+))\)/,rx=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,rT=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,rC=function(...e){let t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,r=0,i=0)=>{let n=[],s=e.split("\n");for(let e=r;e<s.length;e++){let r=s[e];if(r.length>1024)continue;let o=ea.test(r)?r.replace(ea,"$1"):r;if(!o.match(/\S*Error: /)){for(let e of t){let t=e(o);if(t){n.push(t);break}}if(n.length>=50+i)break}}return function(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(ec(t).function||"")&&t.pop(),t.reverse(),el.test(ec(t).function||"")&&(t.pop(),el.test(ec(t).function||"")&&t.pop()),t.slice(0,50).map(e=>({...e,filename:e.filename||ec(t).filename,function:e.function||"?"}))}(n.slice(i))}}([30,e=>{let t=rS.exec(e);if(t){let[,e,r,i]=t;return r_(e,"?",+r,+i)}let r=rk.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){let e=rE.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}let[e,t]=rA(r[1]||"?",r[2]);return r_(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,e=>{let t=rx.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let e=rT.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||"?";return[r,e]=rA(r,e),r_(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]),rA=(e,t)=>{let r=-1!==e.indexOf("safari-extension"),i=-1!==e.indexOf("safari-web-extension");return r||i?[-1!==e.indexOf("@")?e.split("@")[0]:"?",r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},rP=(e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){var r;t.console&&function(e){let t="console";ef(t,e),eg(t,t2)}(function(t){var r;if(td()!==e)return;let i={category:"console",data:{arguments:t.args,logger:"console"},level:"warn"===(r=t.level)?"warning":["fatal","error","warning","log","info","debug"].includes(r)?r:"log",message:eV(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;i.message=`Assertion failed: ${eV(t.args.slice(1)," ")||"console.assert"}`,i.data.arguments=t.args.slice(1)}tW(i,{input:t.args,level:t.level})}),t.dom&&(r=t.dom,ef("dom",function(t){if(td()!==e)return;let i,n,s="object"==typeof r?r.serializeAttribute:void 0,o="object"==typeof r&&"number"==typeof r.maxStringLength?r.maxStringLength:void 0;o&&o>1024&&(ri&&eo.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=1024),"string"==typeof s&&(s=[s]);try{let e=t.event,r=e&&e.target?e.target:e;i=eR(r,{keyAttrs:s,maxStringLength:o}),n=function(e){if(!ee.HTMLElement)return null;let t=e;for(let e=0;e<5&&t;e++){if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(r)}catch(e){i="<unknown>"}if(0===i.length)return;let a={category:`ui.${t.name}`,message:i};n&&(a.data={"ui.component_name":n}),tW(a,{event:t.event,name:t.name,global:t.global})}),eg("dom",rp)),t.xhr&&(ef("xhr",function(t){if(td()!==e)return;let{startTimestamp:r,endTimestamp:i}=t,n=t.xhr[ry];if(!r||!i||!n)return;let{method:s,url:o,status_code:a,body:l}=n,c={xhr:t.xhr,input:l,startTimestamp:r,endTimestamp:i};tW({category:"xhr",data:{method:s,url:o,status_code:a},type:"http",level:t6(a)},c)}),eg("xhr",rb)),t.fetch&&function(e,t){let r="fetch";ef(r,e),eg(r,()=>(function(e,t=!1){(!t||function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in ee))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(t8(ee.fetch))return!0;let e=!1,t=ee.document;if(t&&"function"==typeof t.createElement)try{let r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=t8(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){er&&eo.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}())&&eU(ee,"fetch",function(t){return function(...r){let i=Error(),{method:n,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){let[t,r]=e;return{url:re(t),method:t7(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:re(t),method:t7(t,"method")?String(t.method).toUpperCase():"GET"}}(r),o={args:r,fetchData:{method:n,url:s},startTimestamp:1e3*eK(),virtualError:i};return e||ev("fetch",{...o}),t.apply(ee,r).then(async t=>(e?e(t):ev("fetch",{...o,endTimestamp:1e3*eK(),response:t}),t),e=>{throw ev("fetch",{...o,endTimestamp:1e3*eK(),error:e}),ex(e)&&void 0===e.stack&&(e.stack=i.stack,eB(e,"framesToPop",1)),e})}})})(void 0,void 0))}(function(t){if(td()!==e)return;let{startTimestamp:r,endTimestamp:i}=t;if(i&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method)){if(t.error)tW({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:r,endTimestamp:i});else{let e=t.response,n={...t.fetchData,status_code:e&&e.status},s={input:t.args,response:e,startTimestamp:r,endTimestamp:i};tW({category:"fetch",data:n,type:"http",level:t6(n.status_code)},s)}}}),t.history&&rf(function(t){if(td()!==e)return;let r=t.from,i=t.to,n=t1(ee.location.href),s=r?t1(r):void 0,o=t1(i);s&&s.path||(s=n),n.protocol===o.protocol&&n.host===o.host&&(i=o.relative),n.protocol===s.protocol&&n.host===s.host&&(r=s.relative),tW({category:"navigation",data:{from:r,to:i}})}),t.sentry&&e.on("beforeSendEvent",function(t){td()===e&&tW({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:eZ(t)},{event:t})})}}},rM=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],rj=(e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&eU(ee,"setTimeout",rO),t.setInterval&&eU(ee,"setInterval",rO),t.requestAnimationFrame&&eU(ee,"requestAnimationFrame",rD),t.XMLHttpRequest&&"XMLHttpRequest"in ee&&eU(XMLHttpRequest.prototype,"send",rI);let e=t.eventTarget;e&&(Array.isArray(e)?e:rM).forEach(rL)}}};function rO(e){return function(...t){let r=t[0];return t[0]=rr(r,{mechanism:{data:{function:ed(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function rD(e){return function(t){return e.apply(this,[rr(t,{mechanism:{data:{function:"requestAnimationFrame",handler:ed(e)},handled:!1,type:"instrument"}})])}}function rI(e){return function(...t){let r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in r&&"function"==typeof r[e]&&eU(r,e,function(t){let r={mechanism:{data:{function:e,handler:ed(t)},handled:!1,type:"instrument"}},i=ez(t);return i&&(r.mechanism.data.handler=ed(i)),rr(t,r)})}),e.apply(this,t)}}function rL(e){let t=ee[e],r=t&&t.prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(eU(r,"addEventListener",function(t){return function(r,i,n){try{"function"==typeof i.handleEvent&&(i.handleEvent=rr(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ed(i),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[r,rr(i,{mechanism:{data:{function:"addEventListener",handler:ed(i),target:e},handled:!1,type:"instrument"}}),n])}}),eU(r,"removeEventListener",function(e){return function(t,r,i){try{let n=r.__sentry_wrapped__;n&&e.call(this,t,n,i)}catch(e){}return e.call(this,t,r,i)}}))}let rN=()=>({name:"BrowserSession",setupOnce(){void 0!==ee.document?(tI({ignoreDuration:!0}),tR(),rf(({from:e,to:t})=>{void 0!==e&&e!==t&&(tI({ignoreDuration:!0}),tR())})):ri&&eo.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),rR=(e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){let t="error";ef(t,e),eg(t,eb)}(t=>{let{stackParser:r,attachStacktrace:i}=rV();if(td()!==e||rt>0)return;let{msg:n,url:s,line:o,column:a,error:l}=t,c=function(e,t,r,i){let n=e.exception=e.exception||{},s=n.values=n.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=eP(t)&&t.length>0?t:function(){try{return ee.document.location.href}catch(e){return""}}();return 0===l.length&&l.push({colno:i,filename:c,function:"?",in_app:!0,lineno:r}),e}(rc(r,l||n,void 0,i,!1),s,o,a);c.level="error",tD(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})}),rF("onerror")),t.onunhandledrejection&&(function(e){let t="unhandledrejection";ef(t,e),eg(t,e_)}(t=>{let{stackParser:r,attachStacktrace:i}=rV();if(td()!==e||rt>0)return;let n=function(e){if(ej(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),s=ej(n)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(n)}`}]}}:rc(r,n,void 0,i,!0);s.level="error",tD(s,{originalException:n,mechanism:{handled:!1,type:"onunhandledrejection"}})}),rF("onunhandledrejection"))}}};function rF(e){ri&&eo.log(`Global Handler attached: ${e}`)}function rV(){let e=td();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}let rq=()=>({name:"HttpContext",preprocessEvent(e){if(!ee.navigator&&!ee.location&&!ee.document)return;let t=e.request&&e.request.url||ee.location&&ee.location.href,{referrer:r}=ee.document||{},{userAgent:i}=ee.navigator||{},n={...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},s={...e.request,...t&&{url:t},headers:n};e.request=s}}),rU=(e={})=>{let t=e.limit||5,r=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,i,n){let s=n.getOptions();!function(e,t,r=250,i,n,s,o){if(!(s.exception&&s.exception.values&&o&&eL(o.originalException,Error)))return;let a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=(function e(t,r,i,n,s,o,a,l){if(o.length>=i+1)return o;let c=[...o];if(eL(n[s],Error)){tZ(a,l);let o=t(r,n[s]),u=c.length;t0(o,s,u,l),c=e(t,r,i,n[s],s,[o,...c],o,u)}return Array.isArray(n.errors)&&n.errors.forEach((n,o)=>{if(eL(n,Error)){tZ(a,l);let u=t(r,n),d=c.length;t0(u,`errors[${o}]`,d,l),c=e(t,r,i,n,s,[u,...c],u,d)}}),c})(e,t,n,o.originalException,i,s.exception.values,a,0).map(e=>(e.value&&(e.value=eF(e.value,r)),e)))}(rn,s.stackParser,s.maxValueLength,r,t,e,i)}}};var rB="new",r$="loading",rz="loaded",rJ="joining-meeting",rG="joined-meeting",rW="left-meeting",rY="error",rH="blocked",rK="off",rQ="sendable",rX="loading",rZ="interrupted",r0="playable",r1="unknown",r2="full",r5="lobby",r3="none",r4="base",r9="*",r6="ejected",r8="nbf-room",r7="nbf-token",ie="exp-room",it="exp-token",ir="no-room",ii="meeting-full",is="end-of-life",io="not-allowed",ia="connection-error",il="cam-in-use",ic="mic-in-use",iu="cam-mic-in-use",id="permissions",ih="undefined-mediadevices",ip="not-found",im="constraints",ig="unknown",iv="iframe-ready-for-launch-config",iy="iframe-launch-config",ib="theme-updated",iw="loading",i_="load-attempt-failed",iS="loaded",ik="started-camera",iE="camera-error",ix="joining-meeting",iT="joined-meeting",iC="left-meeting",iA="participant-joined",iP="participant-updated",iM="participant-left",ij="participant-counts-updated",iO="access-state-updated",iD="meeting-session-summary-updated",iI="meeting-session-state-updated",iL="meeting-session-data-error",iN="waiting-participant-added",iR="waiting-participant-updated",iF="waiting-participant-removed",iV="track-started",iq="track-stopped",iU="transcription-started",iB="transcription-stopped",i$="transcription-error",iz="recording-started",iJ="recording-stopped",iG="recording-stats",iW="recording-error",iY="recording-upload-completed",iH="recording-data",iK="app-message",iQ="transcription-message",iX="remote-media-player-started",iZ="remote-media-player-updated",i0="remote-media-player-stopped",i1="local-screen-share-started",i2="local-screen-share-stopped",i5="local-screen-share-canceled",i3="active-speaker-change",i4="active-speaker-mode-change",i9="network-quality-change",i6="network-connection",i8="cpu-load-change",i7="face-counts-updated",ne="fullscreen",nt="exited-fullscreen",nr="live-streaming-started",ni="live-streaming-updated",nn="live-streaming-stopped",ns="live-streaming-error",no="lang-updated",na="receive-settings-updated",nl="input-settings-updated",nc="nonfatal-error",nu="error",nd="iframe-call-message",nh="local-screen-start",np="daily-method-update-live-streaming-endpoints",nm="transmit-log",nf="daily-custom-track",ng={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},nv={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},ny={PLAY:"play",PAUSE:"pause"},nb=["jpg","png","jpeg"],nw="sip-call-transfer";function n_(){return!nS()&&"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function nS(){return"undefined"!=typeof navigator&&navigator.product&&"ReactNative"===navigator.product}function nk(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function nE(){if(nS()||!document)return!1;var e=document.createElement("iframe");return!!e.requestFullscreen||!!e.webkitRequestFullscreen}var nx="none",nT=function(){try{var e,t=document.createElement("canvas"),r=!1;(e=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))||(r=!0,e=t.getContext("webgl2"));var i=null!=e;return t.remove(),i?r?"software":"hardware":nx}catch(e){return nx}}();function nC(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!nS()&&nT!==nx&&(e?!nj()&&["Chrome","Firefox"].includes(nO()):function(){if(nj())return!1;var e=nO();if("Safari"===e){var t=nR();if(t.major<15||15===t.major&&t.minor<4)return!1}return"Chrome"===e?nI().major>=77:"Firefox"===e?nF().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function nA(){if(nS()||nM()||"undefined"==typeof AudioWorkletNode)return!1;switch(nO()){case"Chrome":case"Firefox":return!0;case"Safari":var e=nD();return e.major>17||17===e.major&&e.minor>=4}return!1}function nP(){return nk()&&"undefined"!=typeof MediaStreamTrack&&!function(){var e,t=nO();if(!n_())return!0;switch(t){case"Chrome":return(e=nI()).major&&e.major>0&&e.major<75;case"Firefox":return(e=nF()).major<91;case"Safari":return(e=nR()).major<13||13===e.major&&e.minor<1;default:return!0}}()}function nM(){return n_().match(/Linux; Android/)}function nj(){var e,t=n_(),r=t.match(/Mac/)&&(!nS()&&"undefined"!=typeof window&&null!==(e=window)&&void 0!==e&&null!==(e=e.navigator)&&void 0!==e&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(t.match(/Mobi/)||t.match(/Android/)||r)||!!n_().match(/DailyAnd\//)||void 0}function nO(){if("undefined"!=typeof window){var e=n_();return nL()?"Safari":e.indexOf("Edge")>-1?"Edge":e.match(/Chrome\//)?"Chrome":e.indexOf("Safari")>-1||nN()?"Safari":e.indexOf("Firefox")>-1?"Firefox":e.indexOf("MSIE")>-1||e.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function nD(){switch(nO()){case"Chrome":return nI();case"Safari":return nR();case"Firefox":return nF();case"Edge":return function(){var e=0,t=0;if("undefined"!=typeof window){var r=n_().match(/Edge\/(\d+).(\d+)/);if(r)try{e=parseInt(r[1]),t=parseInt(r[2])}catch(e){}}return{major:e,minor:t}}()}}function nI(){var e=0,t=0,r=0,i=0,n=!1;if("undefined"!=typeof window){var s=n_(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{e=parseInt(o[1]),t=parseInt(o[2]),r=parseInt(o[3]),i=parseInt(o[4]),n=s.indexOf("OPR/")>-1}catch(e){}}return{major:e,minor:t,build:r,patch:i,opera:n}}function nL(){return!!n_().match(/iPad|iPhone|iPod/i)&&nk()}function nN(){return n_().indexOf("AppleWebKit/605.1.15")>-1}function nR(){var e=0,t=0,r=0;if("undefined"!=typeof window){var i=n_().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(i)try{e=parseInt(i[1]),t=parseInt(i[2]),r=parseInt(i[4])}catch(e){}else(nL()||nN())&&(e=14,t=0,r=3)}return{major:e,minor:t,point:r}}function nF(){var e=0,t=0;if("undefined"!=typeof window){var r=n_().match(/Firefox\/(\d+).(\d+)/);if(r)try{e=parseInt(r[1]),t=parseInt(r[2])}catch(e){}}return{major:e,minor:t}}var nV=g(function e(){h(this,e)},[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,r){Y()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,r){Y()}},{key:"sendMessageToCallMachine",value:function(e,t,r,i){Y()}},{key:"sendMessageToDailyJs",value:function(e,t){Y()}},{key:"removeListener",value:function(e){Y()}}]);function nq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function nU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nq(Object(r),!0).forEach(function(t){_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nB=function(){return!!e})()}var n$=function(){function e(){var t,r,i;return h(this,e),r=y(r=e),(t=v(this,nB()?Reflect.construct(r,i||[],y(this).constructor):r.apply(this,i)))._wrappedListeners={},t._messageCallbacks={},t}return w(e,nV),g(e,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,r){var i=this,n=function(n){if(n.data&&"iframe-call-message"===n.data.what&&(!n.data.callClientId||n.data.callClientId===t)&&(!n.data.from||"module"!==n.data.from)){var s=nU({},n.data);if(delete s.from,s.callbackStamp&&i._messageCallbacks[s.callbackStamp]){var o=s.callbackStamp;i._messageCallbacks[o].call(r,s),delete i._messageCallbacks[o]}delete s.what,delete s.callbackStamp,e.call(r,s)}};this._wrappedListeners[e]=n,window.addEventListener("message",n)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,r){var i=function(i){var n;if(!(!i.data||i.data.what!==nd||!i.data.action||i.data.from&&"module"!==i.data.from||i.data.callClientId&&t&&i.data.callClientId!==t||null!=i&&null!==(n=i.data)&&void 0!==n&&n.callFrameId)){var s=i.data;e.call(r,s)}};this._wrappedListeners[e]=i,window.addEventListener("message",i)}},{key:"sendMessageToCallMachine",value:function(e,t,r,i){if(!r)throw Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var n=nU({},e);if(n.what=nd,n.from="module",n.callClientId=r,t){var s=W();this._messageCallbacks[s]=t,n.callbackStamp=s}var o=i?i.contentWindow:window,a=this._callMachineTargetOrigin(i);a&&o.postMessage(n,a)}},{key:"sendMessageToDailyJs",value:function(e,t){e.what=nd,e.callClientId=t,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener("message",t),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,t,r){var i=nU({},e);i.callClientId=r;var n=t?t.contentWindow:window,s=this._callMachineTargetOrigin(t);s&&n.postMessage(i,s)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,t){var r=function(r){!r.data||"iframe-call-message"!==r.data.what||r.data.callClientId&&r.data.callClientId!==t||r.data.from&&"module"===r.data.from||e(r.data)};return this._wrappedListeners[e]=r,window.addEventListener("message",r),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener("message",t),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return"file:"===window.location.protocol?"*":window.location.origin}}])}();function nz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function nJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nJ=function(){return!!e})()}var nG=function(){function e(){var t,r,i;return h(this,e),r=y(r=e),t=v(this,nJ()?Reflect.construct(r,i||[],y(this).constructor):r.apply(this,i)),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new P.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new P.EventEmitter,t._wrappedListeners={},t._messageCallbacks={},t}return w(e,nV),g(e,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,r){this._addListener(e,global.callMachineToDailyJsEmitter,t,r,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,r){this._addListener(e,global.dailyJsToCallMachineEmitter,t,r,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,t,r){this._sendMessage(e,global.dailyJsToCallMachineEmitter,r,t,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,t){this._sendMessage(e,global.callMachineToDailyJsEmitter,t,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var t=this._wrappedListeners[e];t&&(global.callMachineToDailyJsEmitter.removeListener("message",t),global.dailyJsToCallMachineEmitter.removeListener("message",t),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,t,r,i,n){var s=this,o=function(t){if(t.callClientId===r){if(t.callbackStamp&&s._messageCallbacks[t.callbackStamp]){var n=t.callbackStamp;s._messageCallbacks[n].call(i,t),delete s._messageCallbacks[n]}e.call(i,t)}};this._wrappedListeners[e]=o,t.addListener("message",o)}},{key:"_sendMessage",value:function(e,t,r,i,n){var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nz(Object(r),!0).forEach(function(t){_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);if(s.callClientId=r,i){var o=W();this._messageCallbacks[o]=i,s.callbackStamp=o}t.emit("message",s)}}])}(),nW="replace",nY="shallow-merge",nH=[nW,nY],nK=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data,i=t.mergeStrategy,n=void 0===i?nW:i;h(this,e),e._validateMergeStrategy(n),e._validateData(r,n),this.mergeStrategy=n,this.data=r}return g(e,[{key:"isNoOp",value:function(){return e.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,t){return 0===Object.keys(e).length&&t===nY}},{key:"_validateMergeStrategy",value:function(e){if(!nH.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(nH,"]"))}},{key:"_validateData",value:function(e,t){if(!function(e){if(null==e||"object"!==p(e))return!1;var t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");try{if(r=JSON.stringify(e),t===nW){var r,i=JSON.parse(r);D(i,e)||console.warn("The meeting session data provided will be modified when serialized.",i,e)}else if(t===nY){for(var n in e)if(Object.hasOwnProperty.call(e,n)&&void 0!==e[n]){var s=JSON.parse(JSON.stringify(e[n]));D(e[n],s)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",s,e[n])}}}catch(e){throw Error("Meeting session data must be serializable to JSON: ".concat(e))}if(r.length>102400)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(102400,"."))}}])}();function nQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nQ=function(){return!!e})()}function nX(e){var t="function"==typeof Map?new Map:void 0;return(nX=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(nQ())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var n=new(e.bind.apply(e,i));return r&&b(n,r.prototype),n}(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function nZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nZ=function(){return!!e})()}function n0(e){var t,r=null===(t=window._daily)||void 0===t?void 0:t.pendings;if(r){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}var n1=g(function e(t){h(this,e),this._currentLoad=null,this._callClientId=t},[{key:"load",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void i(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new n2(r,function(){i(!1)},function(e,r){r||n0(t._callClientId),n(e,r)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),n0(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),n2=g(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;h(this,e),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=t,this._successCallback=r,this._failureCallback=i},[{key:"start",value:function(){var e=this;if(!this._currentAttempt){var t=function(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new n3(e._dailyConfig,e._successCallback,t),e._currentAttempt.start())},3e3))};this._currentAttempt=new n3(this._dailyConfig,this._successCallback,t),this._currentAttempt.start()}}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),n5=function(){function e(){var t,r;return h(this,e),r=arguments,t=y(t=e),v(this,nZ()?Reflect.construct(t,r||[],y(this).constructor):t.apply(this,r))}return w(e,nX(Error)),g(e)}(),n3=function(){var e;return g(function e(t,r,i){h(this,e),this._loadAttemptImpl=nS()||!t.avoidEval?new n4(t,r,i):new n9(t,r,i)},[{key:"start",value:(e=k(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}])}(),n4=function(){var e,t,r,i;return g(function e(t,r,i){h(this,e),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache="undefined"!=typeof iOSCallObjectBundleCache&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=t,this._successCallback=r,this._failureCallback=i},[{key:"start",value:(i=k(function*(){var e=K(this._dailyConfig);(yield this._tryLoadFromIOSCache(e))||this._loadFromNetwork(e)}),function(){return i.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=k(function*(e){if(!this._iosCache)return!1;try{var t=yield this._iosCache.get(e);return!!this.cancelled||!!t&&(t.code?(Function('"use strict";'+t.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=t.refetchHeaders,!1))}catch(e){return!1}}),function(e){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(t=k(function*(e){var t=this;this._networkTimeout=setTimeout(function(){t._networkTimedOut=!0,t._failureCallback({msg:"Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(e),type:"timeout"})},2e4);try{var r=this._refetchHeaders?{headers:this._refetchHeaders}:{},i=yield fetch(e,r);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new n5;var n=yield this._getBundleCodeFromResponse(e,i);if(this.cancelled)throw new n5;Function('"use strict";'+n)(),this._iosCache&&this._iosCache.set(e,n,i.headers),this.succeeded=!0,this._successCallback()}catch(t){if(clearTimeout(this._networkTimeout),t instanceof n5||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(e,": ").concat(t),type:t.message})}}),function(e){return t.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=k(function*(e,t){if(t.ok)return yield t.text();if(this._iosCache&&304===t.status)return(yield this._iosCache.renew(e,t.headers)).code;throw Error("Received ".concat(t.status," response"))}),function(t,r){return e.apply(this,arguments)})}])}(),n9=g(function e(t,r,i){h(this,e),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=t,this._successCallback=r,this._failureCallback=i,this._attemptId=W(),this._networkTimeout=null,this._scriptElement=null},[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=K(this._dailyConfig);"object"===("undefined"==typeof document?"undefined":p(document))?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var t=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){t._stopLoading(),t._failureCallback({msg:"Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(e),type:"timeout"})},2e4);var r=document.getElementsByTagName("head")[0],i=document.createElement("script");this._scriptElement=i,i.onload=function(){t._stopLoading(),t.succeeded=!0,t._successCallback()},i.onerror=function(e){t._stopLoading(),t._failureCallback({msg:"Failed to load call object bundle ".concat(e.target.src),type:e.message})},i.src=e,r.appendChild(i)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),n6=function(e,t,r){return!0===n7(e.local,t,r)},n8=function(e,t,r,i){var n=se(e,t,r,i);return n&&n.pendingTrack},n7=function(e,t,r){if(!e)return!1;var i=function(e){switch(e){case"avatar":return!0;case"staged":return e;default:return!!e}},n=e.public.subscribedTracks;return n&&n[t]?i(-1===["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(r)&&n[t].custom?[!0,"staged"].includes(n[t].custom)?n[t].custom:n[t].custom[r]:n[t][r]):!n||i(n.ALL)},se=function(e,t,r,i){var n=Object.values(e.streams||{}).filter(function(e){return e.participantId===t&&e.type===r&&e.pendingTrack&&e.pendingTrack.kind===i}).sort(function(e,t){return new Date(t.starttime)-new Date(e.starttime)});return n&&n[0]},st=function(e,t){var r=e.local.public.customTracks;if(r&&r[t])return r[t].track};function sr(e,t){for(var r=t.getState(),i=0,n=["cam","screen"];i<n.length;i++)for(var s=n[i],o=0,a=["video","audio"];o<a.length;o++){var l=a[o],c="cam"===s?l:"screen".concat(l.charAt(0).toUpperCase()+l.slice(1)),u=e.tracks[c];if(u){var d=e.local?r.local.streams&&r.local.streams[s]&&r.local.streams[s].stream&&r.local.streams[s].stream["get".concat("video"===l?"Video":"Audio","Tracks")]()[0]:n8(r,e.session_id,s,l);"playable"===u.state&&(u.track=d),u.persistentTrack=d}}}function si(e,t){try{var r=t.getState();for(var i in e.tracks)if(!["video","audio","screenVideo","screenAudio"].includes(i)){var n=e.tracks[i].kind;if(n){var s=e.tracks[i];if(s){var o=e.local?st(r,i):n8(r,e.session_id,i,n);"playable"===s.state&&(e.tracks[i].track=o),s.persistentTrack=o}}else console.error("unknown type for custom track")}}catch(e){console.error(e)}}function sn(e,t,r){var i=r.getState();if(e.local){if(e.audio)try{e.audioTrack=i.local.streams.cam.stream.getAudioTracks()[0],e.audioTrack||(e.audio=!1)}catch(e){}if(e.video)try{e.videoTrack=i.local.streams.cam.stream.getVideoTracks()[0],e.videoTrack||(e.video=!1)}catch(e){}if(e.screen)try{e.screenVideoTrack=i.local.streams.screen.stream.getVideoTracks()[0],e.screenAudioTrack=i.local.streams.screen.stream.getAudioTracks()[0],e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(e){}}else{var n=!0;try{var s=i.participants[e.session_id];s&&s.public&&s.public.rtcType&&"peer-to-peer"===s.public.rtcType.impl&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(n=!1)}catch(e){console.error(e)}if(!n)return e.audio=!1,e.audioTrack=!1,e.video=!1,e.videoTrack=!1,e.screen=!1,void(e.screenTrack=!1);try{if(i.streams,e.audio&&n6(i,e.session_id,"cam-audio")){var o=n8(i,e.session_id,"cam","audio");o&&(t&&t.audioTrack&&t.audioTrack.id===o.id?e.audioTrack=o:o.muted||(e.audioTrack=o)),e.audioTrack||(e.audio=!1)}if(e.video&&n6(i,e.session_id,"cam-video")){var a=n8(i,e.session_id,"cam","video");a&&(t&&t.videoTrack&&t.videoTrack.id===a.id?e.videoTrack=a:a.muted||(e.videoTrack=a)),e.videoTrack||(e.video=!1)}if(e.screen&&n6(i,e.session_id,"screen-audio")){var l=n8(i,e.session_id,"screen","audio");l&&(t&&t.screenAudioTrack&&t.screenAudioTrack.id===l.id?e.screenAudioTrack=l:l.muted||(e.screenAudioTrack=l))}if(e.screen&&n6(i,e.session_id,"screen-video")){var c=n8(i,e.session_id,"screen","video");c&&(t&&t.screenVideoTrack&&t.screenVideoTrack.id===c.id?e.screenVideoTrack=c:c.muted||(e.screenVideoTrack=c))}e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(e){console.error("unexpected error matching up tracks",e)}}}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var so=new Map,sa=null;function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var sc=new Map,su=null;function sd(){var e;return nS()||void 0!==(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.ondevicechange)}var sh=new Set;function sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function sm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sp(Object(r),!0).forEach(function(t){_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var sf=Object.freeze({VIDEO:"video",AUDIO:"audio",SCREEN_VIDEO:"screenVideo",SCREEN_AUDIO:"screenAudio",CUSTOM_VIDEO:"customVideo",CUSTOM_AUDIO:"customAudio"}),sg=Object.freeze({PARTICIPANTS:"participants",STREAMING:"streaming",TRANSCRIPTION:"transcription"}),sv=Object.values(sf),sy=["v","a","sv","sa","cv","ca"];Object.freeze(sv.reduce(function(e,t,r){return e[t]=sy[r],e},{})),Object.freeze(sy.reduce(function(e,t,r){return e[t]=sv[r],e},{}));var sb=[sf.VIDEO,sf.AUDIO,sf.SCREEN_VIDEO,sf.SCREEN_AUDIO],sw=Object.values(sg),s_=["p","s","t"];Object.freeze(sw.reduce(function(e,t,r){return e[t]=s_[r],e},{})),Object.freeze(s_.reduce(function(e,t,r){return e[t]=sw[r],e},{}));var sS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.base,i=t.byUserId,n=t.byParticipantId;h(this,e),this.base=r,this.byUserId=i,this.byParticipantId=n}return g(e,[{key:"clone",value:function(){var t=new e;if(this.base instanceof sk?t.base=this.base.clone():t.base=this.base,void 0!==this.byUserId)for(var r in t.byUserId={},this.byUserId){var i=this.byUserId[r];t.byUserId[r]=i instanceof sk?i.clone():i}if(void 0!==this.byParticipantId)for(var n in t.byParticipantId={},this.byParticipantId){var s=this.byParticipantId[n];t.byParticipantId[n]=s instanceof sk?s.clone():s}return t}},{key:"toJSONObject",value:function(){var e={};if("boolean"==typeof this.base?e.base=this.base:this.base instanceof sk&&(e.base=this.base.toJSONObject()),void 0!==this.byUserId)for(var t in e.byUserId={},this.byUserId){var r=this.byUserId[t];e.byUserId[t]=r instanceof sk?r.toJSONObject():r}if(void 0!==this.byParticipantId)for(var i in e.byParticipantId={},this.byParticipantId){var n=this.byParticipantId[i];e.byParticipantId[i]=n instanceof sk?n.toJSONObject():n}return e}},{key:"toMinifiedJSONObject",value:function(){var e={};if(void 0!==this.base&&("boolean"==typeof this.base?e.b=this.base:e.b=this.base.toMinifiedJSONObject()),void 0!==this.byUserId)for(var t in e.u={},this.byUserId){var r=this.byUserId[t];e.u[t]="boolean"==typeof r?r:r.toMinifiedJSONObject()}if(void 0!==this.byParticipantId)for(var i in e.p={},this.byParticipantId){var n=this.byParticipantId[i];e.p[i]="boolean"==typeof n?n:n.toMinifiedJSONObject()}return e}},{key:"normalize",value:function(){return this.base instanceof sk&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map(function(e){var t=x(e,2),r=t[0],i=t[1];return[r,i instanceof sk?i.normalize():i]}))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map(function(e){var t=x(e,2),r=t[0],i=t[1];return[r,i instanceof sk?i.normalize():i]}))),this}}],[{key:"fromJSONObject",value:function(t){var r,i,n;if(void 0!==t.base&&(r="boolean"==typeof t.base?t.base:sk.fromJSONObject(t.base)),void 0!==t.byUserId)for(var s in i={},t.byUserId){var o=t.byUserId[s];i[s]="boolean"==typeof o?o:sk.fromJSONObject(o)}if(void 0!==t.byParticipantId)for(var a in n={},t.byParticipantId){var l=t.byParticipantId[a];n[a]="boolean"==typeof l?l:sk.fromJSONObject(l)}return new e({base:r,byUserId:i,byParticipantId:n})}},{key:"fromMinifiedJSONObject",value:function(t){var r,i,n;if(void 0!==t.b&&(r="boolean"==typeof t.b?t.b:sk.fromMinifiedJSONObject(t.b)),void 0!==t.u)for(var s in i={},t.u){var o=t.u[s];i[s]="boolean"==typeof o?o:sk.fromMinifiedJSONObject(o)}if(void 0!==t.p)for(var a in n={},t.p){var l=t.p[a];n[a]="boolean"==typeof l?l:sk.fromMinifiedJSONObject(l)}return new e({base:r,byUserId:i,byParticipantId:n})}},{key:"validateJSONObject",value:function(e){if("object"!==p(e))return[!1,"canReceive must be an object"];for(var t=["base","byUserId","byParticipantId"],r=0,i=Object.keys(e);r<i.length;r++){var n=i[r];if(!t.includes(n))return[!1,"canReceive can only contain keys (".concat(t.join(", "),")")];if("base"===n){var s=x(sk.validateJSONObject(e.base,!0),2),o=s[0],a=s[1];if(!o)return[!1,a]}else{if("object"!==p(e[n]))return[!1,"invalid (non-object) value for field '".concat(n,"' in canReceive")];for(var l=0,c=Object.values(e[n]);l<c.length;l++){var u=c[l],d=x(sk.validateJSONObject(u),2),h=d[0],m=d[1];if(!h)return[!1,m]}}}return[!0]}}])}(),sk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.video,i=t.audio,n=t.screenVideo,s=t.screenAudio,o=t.customVideo,a=t.customAudio;h(this,e),this.video=r,this.audio=i,this.screenVideo=n,this.screenAudio=s,this.customVideo=o,this.customAudio=a}return g(e,[{key:"clone",value:function(){var t=new e;return void 0!==this.video&&(t.video=this.video),void 0!==this.audio&&(t.audio=this.audio),void 0!==this.screenVideo&&(t.screenVideo=this.screenVideo),void 0!==this.screenAudio&&(t.screenAudio=this.screenAudio),void 0!==this.customVideo&&(t.customVideo=sm({},this.customVideo)),void 0!==this.customAudio&&(t.customAudio=sm({},this.customAudio)),t}},{key:"toJSONObject",value:function(){var e={};return void 0!==this.video&&(e.video=this.video),void 0!==this.audio&&(e.audio=this.audio),void 0!==this.screenVideo&&(e.screenVideo=this.screenVideo),void 0!==this.screenAudio&&(e.screenAudio=this.screenAudio),void 0!==this.customVideo&&(e.customVideo=sm({},this.customVideo)),void 0!==this.customAudio&&(e.customAudio=sm({},this.customAudio)),e}},{key:"toMinifiedJSONObject",value:function(){var e={};return void 0!==this.video&&(e.v=this.video),void 0!==this.audio&&(e.a=this.audio),void 0!==this.screenVideo&&(e.sv=this.screenVideo),void 0!==this.screenAudio&&(e.sa=this.screenAudio),void 0!==this.customVideo&&(e.cv=sm({},this.customVideo)),void 0!==this.customAudio&&(e.ca=sm({},this.customAudio)),e}},{key:"normalize",value:function(){function e(e,t){return e&&1===Object.keys(e).length&&e["*"]===t}return!(!0!==this.video||!0!==this.audio||!0!==this.screenVideo||!0!==this.screenAudio||!e(this.customVideo,!0)||!e(this.customAudio,!0))||(!1!==this.video||!1!==this.audio||!1!==this.screenVideo||!1!==this.screenAudio||!e(this.customVideo,!1)||!e(this.customAudio,!1))&&this}}],[{key:"fromBoolean",value:function(t){return new e({video:t,audio:t,screenVideo:t,screenAudio:t,customVideo:{"*":t},customAudio:{"*":t}})}},{key:"fromJSONObject",value:function(t){return new e({video:t.video,audio:t.audio,screenVideo:t.screenVideo,screenAudio:t.screenAudio,customVideo:void 0!==t.customVideo?sm({},t.customVideo):void 0,customAudio:void 0!==t.customAudio?sm({},t.customAudio):void 0})}},{key:"fromMinifiedJSONObject",value:function(t){return new e({video:t.v,audio:t.a,screenVideo:t.sv,screenAudio:t.sa,customVideo:t.cv,customAudio:t.ca})}},{key:"validateJSONObject",value:function(e,t){if("boolean"==typeof e)return[!0];if("object"!==p(e))return[!1,"invalid (non-object, non-boolean) value in canReceive"];for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(!sv.includes(n))return[!1,"invalid media type '".concat(n,"' in canReceive")];if(sb.includes(n)){if("boolean"!=typeof e[n])return[!1,"invalid (non-boolean) value for media type '".concat(n,"' in canReceive")]}else{if("object"!==p(e[n]))return[!1,"invalid (non-object) value for media type '".concat(n,"' in canReceive")];for(var s=0,o=Object.values(e[n]);s<o.length;s++)if("boolean"!=typeof o[s])return[!1,"invalid (non-boolean) value for entry within '".concat(n,"' in canReceive")];if(t&&void 0===e[n]["*"])return[!1,'canReceive "base" permission must specify "*" as an entry within \''.concat(n,"'")]}}return t&&r.length!==sv.length?[!1,'canReceive "base" permission must specify all media types: '.concat(sv.join(", ")," (or be set to a boolean shorthand)")]:[!0]}}])}(),sE=["result"],sx=["preserveIframe"];function sT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function sC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(r),!0).forEach(function(t){_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(sA=function(){return!!e})()}function sP(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return sM(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sM(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function sM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var sj={},sO="video",sD=nS()?{data:{}}:{data:{},topology:"none"},sI={present:0,hidden:0},sL={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},sN=Object.keys(sL),sR=["state","volume","simulcastEncodings"],sF={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},sV={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},sq={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},sU={customIntegrations:{validate:oe,help:s8()},customTrayButtons:{validate:s7,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(sV))},url:{validate:function(e){return"string"==typeof e},help:"url should be a string"},baseUrl:{validate:function(e){return"string"==typeof e},help:"baseUrl should be a string"},token:{validate:function(e){return"string"==typeof e},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(e,t){try{return t.validateDailyConfig(e),!0}catch(e){console.error("Failed to validate dailyConfig",e)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(e){return function e(t,r){if(void 0===r)return!1;switch(p(r)){case"string":return p(t)===r;case"object":if("object"!==p(t))return!1;for(var i in t)if(!e(t[i],r[i]))return!1;return!0;default:return!1}}(e,sF)},help:"reactNativeConfig should look like ".concat(JSON.stringify(sF),", all fields optional")},lang:{validate:function(e){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(e)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(e){try{return s1(e),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(e,t){var r;if("boolean"==typeof e)return t._preloadCache.allowLocalVideo=e,!0;if(e instanceof MediaStreamTrack)t._sharedTracks.videoTrack=e,r={customTrack:nf};else{if(delete t._sharedTracks.videoTrack,"string"!=typeof e)return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;r={deviceId:e}}return t._updatePreloadCacheInputSettings({video:{settings:r}},!1),!0}},audioSource:{validate:function(e,t){var r;if("boolean"==typeof e)return t._preloadCache.allowLocalAudio=e,!0;if(e instanceof MediaStreamTrack)t._sharedTracks.audioTrack=e,r={customTrack:nf};else{if(delete t._sharedTracks.audioTrack,"string"!=typeof e)return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;r={deviceId:e}}return t._updatePreloadCacheInputSettings({audio:{settings:r}},!1),!0}},subscribeToTracksAutomatically:{validate:function(e,t){return t._preloadCache.subscribeToTracksAutomatically=e,!0}},theme:{validate:function(e){var t=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],r=function(e){for(var r=0,i=Object.keys(e);r<i.length;r++){var n=i[r];if(!t.includes(n))return console.error('unsupported color "'.concat(n,'". Valid colors: ').concat(t.join(", "))),!1;if(!e[n].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(n,' theme color should be provided in valid hex color format. Received: "').concat(e[n],'"')),!1}return!0};return"object"===p(e)&&("light"in e&&"dark"in e||"colors"in e)?"light"in e&&"dark"in e?"colors"in e.light?"colors"in e.dark?r(e.light.colors)&&r(e.dark.colors):(console.error('Dark theme is missing "colors" property.',e),!1):(console.error('Light theme is missing "colors" property.',e),!1):r(e.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',e),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(e){if("grid"in e){var t=e.grid;if("maxTilesPerPage"in t){if(!Number.isInteger(t.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(t.maxTilesPerPage,".")),!1;if(t.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in t){if(!Number.isInteger(t.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(t.minTilesPerPage,".")),!1;if(t.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in t&&t.minTilesPerPage>t.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(e){return s2(e,{allowAllParticipantsKey:!1})},help:s6({allowAllParticipantsKey:!1})},sendSettings:{validate:function(e,t){return!!function(e,t){try{return t.validateUpdateSendSettings(e),!0}catch(e){return console.error("Failed to validate send settings",e),!1}}(e,t)&&(t._preloadCache.sendSettings=e,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(e,t){var r;return!!s5(e)&&(t._inputSettings||(t._inputSettings={}),s3(e,null===(r=t.properties)||void 0===r?void 0:r.dailyConfig,t._sharedTracks),t._updatePreloadCacheInputSettings(e,!0),!0)},help:s9()},layout:{validate:function(e){return"custom-v1"===e||"browser"===e||"none"===e},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},sB={styles:{validate:function(e){for(var t in e)if("cam"!==t&&"screen"!==t)return!1;if(e.cam){for(var r in e.cam)if("div"!==r&&"video"!==r)return!1}if(e.screen){for(var i in e.screen)if("div"!==i&&"video"!==i)return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(e,t){if(t._preloadCache.subscribeToTracksAutomatically)return!1;var r=[!0,!1,"staged"];if(r.includes(e)||!nS()&&"avatar"===e)return!0;var i=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"],n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var s in e)if("custom"===s){if(!r.includes(e[s])&&!n(e[s],!0))return!1}else{var o=!t&&!i.includes(s),a=!r.includes(e[s]);if(o||a)return!1}return!0};return n(e)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(nS()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(e){return!1===e},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var i=x(r[t],2),n=i[0],s=i[1];switch(n){case"hasPresence":if("boolean"!=typeof s)return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var o,a=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],l=sP(s);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(!a.includes(c))return!1}}catch(e){l.e(e)}finally{l.f()}}else if("boolean"!=typeof s)return!1;(s instanceof Array||Array.isArray(s))&&(e.canSend=new Set(s));break;case"canReceive":var u=x(sS.validateJSONObject(s),2),d=u[0],h=u[1];if(!d)return console.error(h),!1;break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var p,m=["participants","streaming","transcription"],f=sP(s);try{for(f.s();!(p=f.n()).done;){var g=p.value;if(!m.includes(g))return!1}}catch(e){f.e(e)}finally{f.f()}}else if("boolean"!=typeof s)return!1;(s instanceof Array||Array.isArray(s))&&(e.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var e=k(function*(e){return new Promise(function(t,r){var i=[];e.forEach(function(n){return Promise.resolve(n).then(function(e){t(e)}).catch(function(t){i.push(t),i.length===e.length&&r(i)})})})});return function(t){return e.apply(this,arguments)}}());var s$=function(){var e,t,r,i,n,s,o,a,l,c,u,m,f,b,S,E,T,C,A,P,j,O,I,L,N,R,F,V,q,U,B,$,z,J,Y,Q,X,Z;function ee(e){var t,r,i,n,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(h(this,ee),n=y(n=ee),_(i=v(this,sA()?Reflect.construct(n,s||[],y(this).constructor):n.apply(this,s)),"startListeningForDeviceChanges",function(){var e;e=i.handleDeviceChange,sd()?so.has(e)||(so.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(t){var r;so.has(e)&&(so.get(e).lastDevicesString=JSON.stringify(t),sa||(r=k(function*(){var e,t=yield navigator.mediaDevices.enumerateDevices(),r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ss(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ss(e,void 0):void 0}}(e))){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}(so.keys());try{for(r.s();!(e=r.n()).done;){var i=e.value,n=JSON.stringify(t);n!==so.get(i).lastDevicesString&&(so.get(i).lastDevicesString=n,i(t))}}catch(e){r.e(e)}finally{r.f()}}),sa=function(){return r.apply(this,arguments)},navigator.mediaDevices.addEventListener("devicechange",sa)))}).catch(function(){})):sc.has(e)||(sc.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(t){sc.has(e)&&(sc.get(e).lastDevicesString=JSON.stringify(t),su||(su=setInterval(k(function*(){var e,t=yield navigator.mediaDevices.enumerateDevices(),r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return sl(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sl(e,void 0):void 0}}(e))){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}(sc.keys());try{for(r.s();!(e=r.n()).done;){var i=e.value,n=JSON.stringify(t);n!==sc.get(i).lastDevicesString&&(sc.get(i).lastDevicesString=n,i(t))}}catch(e){r.e(e)}finally{r.f()}}),3e3)))}))}),_(i,"stopListeningForDeviceChanges",function(){var e;e=i.handleDeviceChange,sd()?so.has(e)&&(so.delete(e),0===so.size&&sa&&(navigator.mediaDevices.removeEventListener("devicechange",sa),sa=null)):sc.has(e)&&(sc.delete(e),0===sc.size&&su&&(clearInterval(su),su=null))}),_(i,"handleDeviceChange",function(e){e=e.map(function(e){return JSON.parse(JSON.stringify(e))}),i.emitDailyJSEvent({action:"available-devices-updated",availableDevices:e})}),_(i,"handleNativeAppStateChange",(t=k(function*(e){if("destroyed"===e)return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield i.destroy());i.disableReactNativeAutoDeviceManagement("video")||("active"===e?i.camUnmutedBeforeLosingNativeActiveState&&i.setLocalVideo(!0):(i.camUnmutedBeforeLosingNativeActiveState=i.localVideo(),i.camUnmutedBeforeLosingNativeActiveState&&i.setLocalVideo(!1)))}),function(e){return t.apply(this,arguments)})),_(i,"handleNativeAudioFocusChange",function(e){i.disableReactNativeAutoDeviceManagement("audio")||(i._hasNativeAudioFocus=e,i.toggleParticipantAudioBasedOnNativeAudioFocus(),i._hasNativeAudioFocus?i.micUnmutedBeforeLosingNativeAudioFocus&&i.setLocalAudio(!0):(i.micUnmutedBeforeLosingNativeAudioFocus=i.localAudio(),i.setLocalAudio(!1)))}),_(i,"handleNativeSystemScreenCaptureStop",function(){i.stopScreenShare()}),!nP()&&!nS())throw Error("WebRTC not supported or suppressed");if(i.strictMode=void 0===o.strictMode||o.strictMode,i.allowMultipleCallInstances=null!==(r=o.allowMultipleCallInstances)&&void 0!==r&&r,Object.keys(sj).length&&(i._logDuplicateInstanceAttempt(),!i.allowMultipleCallInstances)){if(i.strictMode)throw Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),i.callClientId=W(),sj[i.callClientId]=i,window._daily.instances[i.callClientId]={},i._sharedTracks={},window._daily.instances[i.callClientId].tracks=i._sharedTracks,o.dailyJsVersion=ee.version(),i._iframe=e,i._callObjectMode="none"===o.layout&&!i._iframe,i._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},void 0!==o.showLocalVideo?i._callObjectMode?console.error("showLocalVideo is not available in call object mode"):i._showLocalVideo=!!o.showLocalVideo:i._showLocalVideo=!0,void 0!==o.showParticipantsBar?i._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):i._showParticipantsBar=!!o.showParticipantsBar:i._showParticipantsBar=!0,void 0!==o.customIntegrations?i._callObjectMode?console.error("customIntegrations is not available in call object mode"):i._customIntegrations=o.customIntegrations:i._customIntegrations={},void 0!==o.customTrayButtons?i._callObjectMode?console.error("customTrayButtons is not available in call object mode"):i._customTrayButtons=o.customTrayButtons:i._customTrayButtons={},void 0!==o.activeSpeakerMode?i._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):i._activeSpeakerMode=!!o.activeSpeakerMode:i._activeSpeakerMode=!1,o.receiveSettings?i._callObjectMode?i._receiveSettings=o.receiveSettings:console.error("receiveSettings is only available in call object mode"):i._receiveSettings={},i.validateProperties(o),i.properties=sC({},o),i._inputSettings||(i._inputSettings={}),i._callObjectLoader=i._callObjectMode?new n1(i.callClientId):null,i._callState=rB,i._isPreparingToJoin=!1,i._accessState={access:r1},i._meetingSessionSummary={},i._finalSummaryOfPrevSession={},i._meetingSessionState=on(sD,i._callObjectMode),i._nativeInCallAudioMode=sO,i._participants={},i._isScreenSharing=!1,i._participantCounts=sI,i._rmpPlayerState={},i._waitingParticipants={},i._network={threshold:"good",quality:100,networkState:"unknown",stats:{}},i._activeSpeaker={},i._localAudioLevel=0,i._isLocalAudioLevelObserverRunning=!1,i._remoteParticipantsAudioLevel={},i._isRemoteParticipantsAudioLevelObserverRunning=!1,i._maxAppMessageSize=4096,i._messageChannel=nS()?new nG:new n$,i._iframe&&(i._iframe.requestFullscreen?i._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===i._iframe?(i.emitDailyJSEvent({action:ne}),i.sendMessageToCallMachine({action:ne})):(i.emitDailyJSEvent({action:nt}),i.sendMessageToCallMachine({action:nt}))}):i._iframe.webkitRequestFullscreen&&i._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===i._iframe?(i.emitDailyJSEvent({action:ne}),i.sendMessageToCallMachine({action:ne})):(i.emitDailyJSEvent({action:nt}),i.sendMessageToCallMachine({action:nt}))})),nS()){var a=i.nativeUtils();a.addAudioFocusChangeListener&&a.removeAudioFocusChangeListener&&a.addAppStateChangeListener&&a.removeAppStateChangeListener&&a.addSystemScreenCaptureStopListener&&a.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),i._hasNativeAudioFocus=!0,a.addAudioFocusChangeListener(i.handleNativeAudioFocusChange),a.addAppStateChangeListener(i.handleNativeAppStateChange),a.addSystemScreenCaptureStopListener(i.handleNativeSystemScreenCaptureStop)}return i._callObjectMode&&i.startListeningForDeviceChanges(),i._messageChannel.addListenerForMessagesFromCallMachine(i.handleMessageFromCallMachine,i.callClientId,i),i}return w(ee,M),g(ee,[{key:"destroy",value:(Z=k(function*(){try{yield this.leave()}catch(e){}var e,t=this._iframe;if(t){var r=t.parentElement;r&&r.removeChild(t)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),nS()){var i=this.nativeUtils();i.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),i.removeAppStateChangeListener(this.handleNativeAppStateChange),i.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete sj[this.callClientId],(null===(e=window)||void 0===e||null===(e=e._daily)||void 0===e?void 0:e.instances)&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return Z.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(e){var t=e.bodyClass,r=e.cssFile,i=e.cssText;return sZ(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(r),bodyClass:t,cssText:i}),this}},{key:"iframe",value:function(){return sZ(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return sQ(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return sQ(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(e,t){for(var r in t){if(!sB[r])throw Error("unrecognized updateParticipant property ".concat(r));if(sB[r].validate&&!sB[r].validate(t[r],this,this._participants[e]))throw Error(sB[r].help)}}},{key:"updateParticipant",value:function(e,t){return this._participants.local&&this._participants.local.session_id===e&&(e="local"),e&&t&&(this.validateParticipantProperties(e,t),this.sendMessageToCallMachine({action:"update-participant",id:e,properties:t})),this}},{key:"updateParticipants",value:function(e){var t=this._participants.local&&this._participants.local.session_id;for(var r in e)r===t&&(r="local"),r&&e[r]&&this.validateParticipantProperties(r,e[r]);return this.sendMessageToCallMachine({action:"update-participants",participants:e}),this}},{key:"updateWaitingParticipant",value:(X=k(function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(sQ(this._callObjectMode,"updateWaitingParticipant()"),sG(this._callState,"updateWaitingParticipant()"),"string"!=typeof t||"object"!==p(r))throw Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(i,n){e.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:t,updates:r},function(e){e.error&&n(e.error),e.id||n(Error("unknown error in updateWaitingParticipant()")),i({id:e.id})})})}),function(){return X.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(Q=k(function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(sQ(this._callObjectMode,"updateWaitingParticipants()"),sG(this._callState,"updateWaitingParticipants()"),"object"!==p(t))throw Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(r,i){e.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:t},function(e){e.error&&i(e.error),e.ids||i(Error("unknown error in updateWaitingParticipants()")),r({ids:e.ids})})})}),function(){return Q.apply(this,arguments)})},{key:"requestAccess",value:(Y=k(function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.access,i=void 0===r?{level:r2}:r,n=t.name,s=void 0===n?"":n;return sQ(this._callObjectMode,"requestAccess()"),sG(this._callState,"requestAccess()"),new Promise(function(t,r){e.sendMessageToCallMachine({action:"daily-method-request-access",access:i,name:s},function(e){e.error&&r(e.error),e.access||r(Error("unknown error in requestAccess()")),t({access:e.access,granted:e.granted})})})}),function(){return Y.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"forceDiscardTrack"in t&&(nS()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),t={}):e&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),t={})),this.sendMessageToCallMachine({action:"local-audio",state:e,options:t}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(e){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:e}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(e){return this.sendMessageToCallMachine({action:"local-video",state:e}),this}},{key:"_setAllowLocalAudio",value:function(e){if(this._preloadCache.allowLocalAudio=e,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:e}),this}},{key:"_setAllowLocalVideo",value:function(e){if(this._preloadCache.allowLocalVideo=e,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:e}),this}},{key:"getReceiveSettings",value:(J=k(function*(e){var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).showInheritedValues,i=void 0!==r&&r;if(sQ(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(p(e)){case"string":return new Promise(function(r){t.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:e,showInheritedValues:i},function(e){r(e.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(e){return J.apply(this,arguments)})},{key:"updateReceiveSettings",value:(z=k(function*(e){var t=this;if(sQ(this._callObjectMode,"updateReceiveSettings()"),!s2(e,{allowAllParticipantsKey:!0}))throw Error(s6({allowAllParticipantsKey:!0}));return sG(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(r){t.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:e},function(e){r({receiveSettings:e.receiveSettings})})})}),function(e){return z.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(e,t){if(e){var r={};if(e.audio){e.audio.settings&&(!Object.keys(e.audio.settings).length&&t||(r.audio={settings:sC({},e.audio.settings)})),t&&null!==(i=r.audio)&&void 0!==i&&null!==(i=i.settings)&&void 0!==i&&i.customTrack&&(r.audio.settings={customTrack:this._sharedTracks.audioTrack});var i,n,s,o="none"===(null===(n=e.audio.processor)||void 0===n?void 0:n.type)&&(null===(s=e.audio.processor)||void 0===s?void 0:s._isDefaultWhenNone);if(e.audio.processor&&!o){var a=sC({},e.audio.processor);delete a._isDefaultWhenNone,r.audio=sC(sC({},r.audio),{},{processor:a})}}if(e.video){e.video.settings&&(!Object.keys(e.video.settings).length&&t||(r.video={settings:sC({},e.video.settings)})),t&&null!==(l=r.video)&&void 0!==l&&null!==(l=l.settings)&&void 0!==l&&l.customTrack&&(r.video.settings={customTrack:this._sharedTracks.videoTrack});var l,c,u,d="none"===(null===(c=e.video.processor)||void 0===c?void 0:c.type)&&(null===(u=e.video.processor)||void 0===u?void 0:u._isDefaultWhenNone);if(e.video.processor&&!d){var h=sC({},e.video.processor);delete h._isDefaultWhenNone,r.video=sC(sC({},r.video),{},{processor:h})}}return r}}},{key:"getInputSettings",value:function(){var e=this;return sZ(),new Promise(function(t){t(e._getInputSettings())})}},{key:"_getInputSettings",value:function(){var e,t,r,i,n,s,o={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(e=(null===(r=this._inputSettings)||void 0===r?void 0:r.video)||o,t=(null===(i=this._inputSettings)||void 0===i?void 0:i.audio)||o):(e=(null===(n=this._preloadCache)||void 0===n||null===(n=n.inputSettings)||void 0===n?void 0:n.video)||o,t=(null===(s=this._preloadCache)||void 0===s||null===(s=s.inputSettings)||void 0===s?void 0:s.audio)||o);var a={audio:t,video:e};return this._prepInputSettingsForSharing(a,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(e,t){var r,i,n,s,o,a,l=this._inputSettings||{},c={};e.video?((c.video={},e.video.settings)?(c.video.settings={},t||e.video.settings.customTrack||null===(n=l.video)||void 0===n||!n.settings?c.video.settings=e.video.settings:c.video.settings=sC(sC({},l.video.settings),e.video.settings),Object.keys(c.video.settings).length||delete c.video.settings):null!==(r=l.video)&&void 0!==r&&r.settings&&(c.video.settings=l.video.settings),e.video.processor?c.video.processor=e.video.processor:null!==(i=l.video)&&void 0!==i&&i.processor&&(c.video.processor=l.video.processor)):l.video&&(c.video=l.video),e.audio?((c.audio={},e.audio.settings)?(c.audio.settings={},t||e.audio.settings.customTrack||null===(a=l.audio)||void 0===a||!a.settings?c.audio.settings=e.audio.settings:c.audio.settings=sC(sC({},l.audio.settings),e.audio.settings),Object.keys(c.audio.settings).length||delete c.audio.settings):null!==(s=l.audio)&&void 0!==s&&s.settings&&(c.audio.settings=l.audio.settings),e.audio.processor?c.audio.processor=e.audio.processor:null!==(o=l.audio)&&void 0!==o&&o.processor&&(c.audio.processor=l.audio.processor)):l.audio&&(c.audio=l.audio),this._maybeUpdateInputSettings(c)}},{key:"_devicesFromInputSettings",value:function(e){var t,r,i=(null==e||null===(t=e.video)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.deviceId)||null,n=(null==e||null===(r=e.audio)||void 0===r||null===(r=r.settings)||void 0===r?void 0:r.deviceId)||null,s=this._preloadCache.outputDeviceId||null;return{camera:i?{deviceId:i}:{},mic:n?{deviceId:n}:{},speaker:s?{deviceId:s}:{}}}},{key:"updateInputSettings",value:($=k(function*(e){var t=this;return sZ(),s5(e)?e.video||e.audio?(s3(e,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(e,!0),this._getInputSettings()):new Promise(function(r,i){t.sendMessageToCallMachine({action:"update-input-settings",inputSettings:e},function(n){if(n.error)i(n.error);else{if(n.returnPreloadCache)return t._updatePreloadCacheInputSettings(e,!0),void r(t._getInputSettings());t._maybeUpdateInputSettings(n.inputSettings),r(t._prepInputSettingsForSharing(n.inputSettings,!0))}})})):this._getInputSettings():(console.error(s9()),Promise.reject(s9()))}),function(e){return $.apply(this,arguments)})},{key:"setBandwidth",value:function(e){var t=e.kbs,r=e.trackConstraints;if(sZ(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:t,trackConstraints:r}),this}},{key:"getDailyLang",value:function(){var e=this;if(sZ(),this._callMachineInitialized)return new Promise(function(t){e.sendMessageToCallMachine({action:"get-daily-lang"},function(e){delete e.action,delete e.callbackStamp,t(e)})})}},{key:"setDailyLang",value:function(e){return sZ(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:e}),this}},{key:"setProxyUrl",value:function(e){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:e}),this}},{key:"setIceConfig",value:function(e){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:e}),this}},{key:"meetingSessionSummary",value:function(){return[rW,rY].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(B=k(function*(){var e=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),sG(this._callState,"getMeetingSession()"),new Promise(function(t){e.sendMessageToCallMachine({action:"get-meeting-session"},function(e){delete e.action,delete e.callbackStamp,t(e)})})}),function(){return B.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return sG(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";sQ(this._callObjectMode,"setMeetingSessionData()"),sG(this._callState,"setMeetingSessionData");try{new nK({data:e,mergeStrategy:t})}catch(e){throw console.error(e),e}try{this.sendMessageToCallMachine({action:"set-session-data",data:e,mergeStrategy:t})}catch(e){throw Error("Error setting meeting session data: ".concat(e))}}},{key:"setUserName",value:function(e,t){var r=this;return this.properties.userName=e,new Promise(function(i){r.sendMessageToCallMachine({action:"set-user-name",name:null!=e?e:"",thisMeetingOnly:nS()||!!t&&!!t.thisMeetingOnly},function(e){delete e.action,delete e.callbackStamp,i(e)})})}},{key:"setUserData",value:(U=k(function*(e){var t=this;try{s1(e)}catch(e){throw console.error(e),e}if(this.properties.userData=e,this._callMachineInitialized)return new Promise(function(r){try{t.sendMessageToCallMachine({action:"set-user-data",userData:e},function(e){delete e.action,delete e.callbackStamp,r(e)})}catch(e){throw Error("Error setting user data: ".concat(e))}})}),function(e){return U.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(e){if(e&&(e<100||"number"!=typeof e))throw Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(e){var t=this;if("undefined"==typeof AudioWorkletNode&&!nS())throw Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(e),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(r,i){t.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:e},function(e){t._isLocalAudioLevelObserverRunning=!e.error,e.error?i({error:e.error}):r()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:e}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(e){var t=this;if(this.validateAudioLevelInterval(e),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(r,i){t.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:e},function(e){t._isRemoteParticipantsAudioLevelObserverRunning=!e.error,e.error?i({error:e.error}):r()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:e}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(q=k(function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(sQ(this._callObjectMode,"startCamera()"),sY(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(t)}catch(e){return Promise.reject(e)}else{if(this._didPreAuth){if(t.url&&t.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(t.token&&t.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(t),this.properties=sC(sC({},this.properties),t)}return new Promise(function(t){e._preloadCache.inputSettings=e._prepInputSettingsForSharing(e._inputSettings,!1),e.sendMessageToCallMachine({action:"start-camera",properties:sJ(e.properties,e.callClientId),preloadCache:sJ(e._preloadCache,e.callClientId)},function(e){t({camera:e.camera,mic:e.mic,speaker:e.speaker})})})}),function(){return q.apply(this,arguments)})},{key:"validateCustomTrack",value:function(e,t,r){if(r&&r.length>50)throw Error("Custom track `trackName` must not be more than 50 characters");if(t&&"music"!==t&&"speech"!==t&&!(t instanceof Object))throw Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(r&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(r))throw Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(e instanceof MediaStreamTrack))throw Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{track:track,mode:mode,trackName:trackName,ignoreAudioLevel:ignoreAudioLevel};return sZ(),sG(this._callState,"startCustomTrack()"),this.validateCustomTrack(t.track,t.mode,t.trackName),new Promise(function(r,i){e._sharedTracks.customTrack=t.track,t.track=nf,e.sendMessageToCallMachine({action:"start-custom-track",properties:t},function(e){e.error?i({error:e.error}):r(e.mediaTag)})})}},{key:"stopCustomTrack",value:function(e){var t=this;return sZ(),sG(this._callState,"stopCustomTrack()"),new Promise(function(r){t.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:e},function(e){r(e.mediaTag)})})}},{key:"setCamera",value:function(e){var t=this;return s0(),sH(this._callMachineInitialized,"setCamera()"),new Promise(function(r){t.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:e},function(e){r({device:e.device})})})}},{key:"setAudioDevice",value:(V=k(function*(e){return s0(),this.nativeUtils().setAudioDevice(e),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(e){return V.apply(this,arguments)})},{key:"cycleCamera",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(r){e.sendMessageToCallMachine({action:"cycle-camera",properties:t},function(e){r({device:e.device})})})}},{key:"cycleMic",value:function(){var e=this;return sZ(),new Promise(function(t){e.sendMessageToCallMachine({action:"cycle-mic"},function(e){t({device:e.device})})})}},{key:"getCameraFacingMode",value:function(){var e=this;return s0(),new Promise(function(t){e.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(e){t(e.facingMode)})})}},{key:"setInputDevicesAsync",value:(F=k(function*(e){var t=this,r=e.audioDeviceId,i=e.videoDeviceId,n=e.audioSource,s=e.videoSource;if(sZ(),void 0!==n&&(r=n),void 0!==s&&(i=s),"boolean"==typeof r&&(this._setAllowLocalAudio(r),r=void 0),"boolean"==typeof i&&(this._setAllowLocalVideo(i),i=void 0),!r&&!i)return yield this.getInputDevices();var o={};return r&&(r instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=r,r=nf,o.audio={settings:{customTrack:r}}):(delete this._sharedTracks.audioTrack,o.audio={settings:{deviceId:r}})),i&&(i instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=i,i=nf,o.video={settings:{customTrack:i}}):(delete this._sharedTracks.videoTrack,o.video={settings:{deviceId:i}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(o,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(e){t.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:r,videoDeviceId:i},function(r){if(delete r.action,delete r.callbackStamp,r.returnPreloadCache)return t._updatePreloadCacheInputSettings(o,!1),void e(t._devicesFromInputSettings(t._inputSettings));e(r)})})}),function(e){return F.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(R=k(function*(e){var t=this,r=e.outputDeviceId;if(sZ(),!r||"string"!=typeof r)throw Error("outputDeviceId must be provided and must be a valid device id");return this._preloadCache.outputDeviceId=r,this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(e,i){t.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:r},function(r){if(delete r.action,delete r.callbackStamp,r.error){var n=Error(r.error.message);return n.type=r.error.type,void i(n)}r.returnPreloadCache?e(t._devicesFromInputSettings(t._inputSettings)):e(r)})})}),function(e){return R.apply(this,arguments)})},{key:"getInputDevices",value:(N=k(function*(){var e=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(t){e.sendMessageToCallMachine({action:"get-input-devices"},function(r){r.returnPreloadCache?t(e._devicesFromInputSettings(e._inputSettings)):t({camera:r.camera,mic:r.mic,speaker:r.speaker})})})}),function(){return N.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return s0(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(e){if(s0(),[sO,"voice"].includes(e)){if(e!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=e,!this.disableReactNativeAutoDeviceManagement("audio")&&sW(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",e)}},{key:"preAuth",value:(L=k(function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(sQ(this._callObjectMode,"preAuth()"),sY(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(t)),!t.url)throw Error("preAuth() requires at least a url to be provided");return this.validateProperties(t),this.properties=sC(sC({},this.properties),t),new Promise(function(t,r){e._preloadCache.inputSettings=e._prepInputSettingsForSharing(e._inputSettings,!1),e.sendMessageToCallMachine({action:"daily-method-preauth",properties:sJ(e.properties,e.callClientId),preloadCache:sJ(e._preloadCache,e.callClientId)},function(i){return i.error?r(i.error):i.access?(e._didPreAuth=!0,void t({access:i.access})):r(Error("unknown error in preAuth()"))})})}),function(){return L.apply(this,arguments)})},{key:"load",value:(I=k(function*(e){var t=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw Error("Use after destroy");if(e&&(this.validateProperties(e),this.properties=sC(sC({},this.properties),e)),!this._callObjectMode&&!this.properties.url)throw Error("can't load iframe meeting because url property isn't set");return this._updateCallState(r$),this.emitDailyJSEvent({action:iw}),this._callObjectMode?new Promise(function(e,r){t._callObjectLoader.cancel();var i=Date.now();t._callObjectLoader.load(t.properties.dailyConfig,function(r){t._bundleLoadTime=r?"no-op":Date.now()-i,t._updateCallState(rz),r&&t.emitDailyJSEvent({action:iS}),e()},function(e,i){if(t.emitDailyJSEvent({action:i_}),!i){t._updateCallState(rY),t.resetMeetingDependentVars();var n={action:nu,errorMsg:e.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:e,bundleUrl:K(t.properties.dailyConfig)}}};t._maybeSendToSentry(n),t.emitDailyJSEvent(n),r(e.msg)}})}):(this._iframe.src=H(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(e,r){t._loadedCallback=function(i){t._callState!==rY?(t._updateCallState(rz),(t.properties.cssFile||t.properties.cssText)&&t.loadCss(t.properties),e()):r(i)}}))}}),function(e){return I.apply(this,arguments)})},{key:"join",value:(O=k(function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var r=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(t)}catch(e){return this.updateIsPreparingToJoin(!1),Promise.reject(e)}}else{if(r=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(t.url&&t.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(t.token&&t.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(t.url&&!this._callObjectMode&&t.url&&t.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(t.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(t),this.properties=sC(sC({},this.properties),t)}return void 0!==t.showLocalVideo&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!t.showLocalVideo),void 0!==t.showParticipantsBar&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!t.showParticipantsBar),this._callState===rG||this._callState===rJ?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(rJ,!1),this.emitDailyJSEvent({action:ix}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:sJ(this.properties,this.callClientId),preloadCache:sJ(this._preloadCache,this.callClientId)}),new Promise(function(t,i){e._joinedCallback=function(n,s){if(e._callState!==rY){if(e._updateCallState(rG),n)for(var o in n){if(e._callObjectMode){var a=e._callMachine().store;sr(n[o],a),si(n[o],a),sn(n[o],e._participants[o],a)}e._participants[o]=sC({},n[o]),e.toggleParticipantAudioBasedOnNativeAudioFocus()}r&&e.loadCss(e.properties),t(n)}else i(s)}}))}),function(){return O.apply(this,arguments)})},{key:"leave",value:(j=k(function*(){var e=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(t){e._callState===rW||e._callState===rY?t():e._callObjectLoader&&!e._callObjectLoader.loaded?(e._callObjectLoader.cancel(),e._updateCallState(rW),e.resetMeetingDependentVars(),e.emitDailyJSEvent({action:rW}),t()):(e._resolveLeave=t,e.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return j.apply(this,arguments)})},{key:"startScreenShare",value:(P=k(function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(sH(this._callMachineInitialized,"startScreenShare()"),t.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",t.screenVideoSendSettings),t.mediaStream&&(this._sharedTracks.screenMediaStream=t.mediaStream,t.mediaStream=nf),"undefined"!=typeof DailyNativeUtils&&void 0!==DailyNativeUtils.isIOS&&DailyNativeUtils.isIOS){var r=this.nativeUtils();if(yield r.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:nc,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});r.setSystemScreenCaptureStartCallback(function(){r.setSystemScreenCaptureStartCallback(null),e.sendMessageToCallMachine({action:nh,captureOptions:t})}),r.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:nh,captureOptions:t})}),function(){return P.apply(this,arguments)})},{key:"stopScreenShare",value:function(){sH(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;if(t&&"cloud"!==t&&"raw-tracks"!==t&&"local"!==t)throw Error("invalid type: ".concat(t,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(sC({action:"local-recording-start"},e))}},{key:"updateRecording",value:function(e){var t=e.layout,r=e.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:void 0===t?{preset:"default"}:t,instanceId:r})}},{key:"stopRecording",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(sC({action:"local-recording-stop"},e))}},{key:"startLiveStreaming",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(sC({action:"daily-method-start-live-streaming"},e))}},{key:"updateLiveStreaming",value:function(e){var t=e.layout,r=e.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:void 0===t?{preset:"default"}:t,instanceId:r})}},{key:"addLiveStreamingEndpoints",value:function(e){var t=e.endpoints,r=e.instanceId;this.sendMessageToCallMachine({action:np,endpointsOp:"add-endpoints",endpoints:t,instanceId:r})}},{key:"removeLiveStreamingEndpoints",value:function(e){var t=e.endpoints,r=e.instanceId;this.sendMessageToCallMachine({action:np,endpointsOp:"remove-endpoints",endpoints:t,instanceId:r})}},{key:"stopLiveStreaming",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(sC({action:"daily-method-stop-live-streaming"},e))}},{key:"validateDailyConfig",value:function(e){e.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(e.camSimulcastEncodings)),e.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),nM()&&e.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if(!(e instanceof Array||Array.isArray(e)))throw Error("encodings must be an Array");if(!oi(e.length,1,3))throw Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var i=0;i<e.length;i++){var n=e[i];for(var s in this._validateEncodingLayerHasValidProperties(n),n)if(sN.includes(s)){if("number"!=typeof n[s])throw Error("".concat(s," must be a number"));if(t){var o=t[s],a=o.min,l=o.max;if(!oi(n[s],a,l))throw Error("".concat(s," value not in range. valid range: ").concat(a," to ").concat(l))}}else if(!["active","scalabilityMode"].includes(s))throw Error("Invalid key ".concat(s,", valid keys are:")+Object.values(sN));if(r&&!n.hasOwnProperty("maxBitrate"))throw Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(A=k(function*(e){var t=this,r=e.url,i=e.settings,n=void 0===i?{state:ny.PLAY}:i;try{(function(e){if("string"!=typeof e)throw Error('url parameter must be "string" type')})(r),or(n),function(e){for(var t in e)if(!sR.includes(t))throw Error("Invalid key ".concat(t,", valid keys are: ").concat(sR));e.simulcastEncodings&&this.validateSimulcastEncodings(e.simulcastEncodings,sL,!0)}(n)}catch(e){throw console.error("invalid argument Error: ".concat(e)),console.error('startRemoteMediaPlayer arguments must be of the form:\n  { url: "playback url",\n  settings?:\n  {state: "play"|"pause", simulcastEncodings?: [{}] } }'),e}return new Promise(function(e,i){t.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:r,settings:n},function(t){t.error?i({error:t.error,errorMsg:t.errorMsg}):e({session_id:t.session_id,remoteMediaPlayerState:{state:t.state,settings:t.settings}})})})}),function(e){return A.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(C=k(function*(e){var t=this;if("string"!=typeof e)throw Error(" remotePlayerID must be of type string");return new Promise(function(r,i){t.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:e},function(e){e.error?i({error:e.error,errorMsg:e.errorMsg}):r()})})}),function(e){return C.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(T=k(function*(e){var t=this,r=e.session_id,i=e.settings;try{or(i)}catch(e){throw console.error("invalid argument Error: ".concat(e)),console.error('updateRemoteMediaPlayer arguments must be of the form:\n  session_id: "participant session",\n  { settings?: {state: "play"|"pause"} }'),e}return new Promise(function(e,n){t.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:r,settings:i},function(t){t.error?n({error:t.error,errorMsg:t.errorMsg}):e({session_id:t.session_id,remoteMediaPlayerState:{state:t.state,settings:t.settings}})})})}),function(e){return T.apply(this,arguments)})},{key:"startTranscription",value:function(e){sG(this._callState,"startTranscription()"),this.sendMessageToCallMachine(sC({action:"daily-method-start-transcription"},e))}},{key:"updateTranscription",value:function(e){if(sG(this._callState,"updateTranscription()"),!e)throw Error("updateTranscription Error: options is mandatory");if("object"!==p(e))throw Error("updateTranscription Error: options must be object type");if(e.participants&&!Array.isArray(e.participants))throw Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(sC({action:"daily-method-update-transcription"},e))}},{key:"stopTranscription",value:function(e){if(sG(this._callState,"stopTranscription()"),e&&"object"!==p(e))throw Error("stopTranscription Error: options must be object type");if(e&&!e.instanceId)throw Error('"instanceId" not provided');this.sendMessageToCallMachine(sC({action:"daily-method-stop-transcription"},e))}},{key:"startDialOut",value:(E=k(function*(e){var t=this;sG(this._callState,"startDialOut()");var r=function(e){if(e){if(!Array.isArray(e))throw Error("Error starting dial out: audio codec must be an array");if(e.length<=0)throw Error("Error starting dial out: audio codec array specified but empty");e.forEach(function(e){if("string"!=typeof e)throw Error("Error starting dial out: audio codec must be a string");if("OPUS"!==e&&"PCMU"!==e&&"PCMA"!==e&&"G722"!==e)throw Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!e.sipUri&&!e.phoneNumber)throw Error("Error starting dial out: either a sip uri or phone number must be provided");if(e.sipUri&&e.phoneNumber)throw Error("Error starting dial out: only one of sip uri or phone number must be provided");if(e.sipUri){if("string"!=typeof e.sipUri)throw Error("Error starting dial out: sipUri must be a string");if(!e.sipUri.startsWith("sip:"))throw Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(e.video&&"boolean"!=typeof e.video)throw Error("Error starting dial out: video must be a boolean value");!function(e){if(e&&(r(e.audio),e.video)){if(!Array.isArray(e.video))throw Error("Error starting dial out: video codec must be an array");if(e.video.length<=0)throw Error("Error starting dial out: video codec array specified but empty");e.video.forEach(function(e){if("string"!=typeof e)throw Error("Error starting dial out: video codec must be a string");if("H264"!==e&&"VP8"!==e)throw Error("Error starting dial out: video codec must be H264 or VP8")})}}(e.codecs)}if(e.phoneNumber){if("string"!=typeof e.phoneNumber)throw Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(e.phoneNumber))throw Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");e.codecs&&r(e.codecs.audio)}if(e.callerId){if("string"!=typeof e.callerId)throw Error("Error starting dial out: callerId must be a string");if(e.sipUri)throw Error("Error starting dial out: callerId not allowed with sipUri")}if(e.displayName){if("string"!=typeof e.displayName)throw Error("Error starting dial out: displayName must be a string");if(e.displayName.length>=200)throw Error("Error starting dial out: displayName length must be less than 200")}if(e.userId){if("string"!=typeof e.userId)throw Error("Error starting dial out: userId must be a string");if(e.userId.length>36)throw Error("Error starting dial out: userId length must be less than or equal to 36")}if(sz(e),e.permissions&&e.permissions.canReceive){var i=x(sS.validateJSONObject(e.permissions.canReceive),2),n=i[0],s=i[1];if(!n)throw Error(s)}if(e.provider){if("daily"!==e.provider)throw Error("Error: provider can be set only to 'daily', got: ".concat(e.provider));if(e.phoneNumber)throw Error("Error starting dial out: provider valid only for sipUri, not phoneNumber");console.warn("(pre-beta) provider=daily is currently in pre-beta, things might break!")}return new Promise(function(r,i){t.sendMessageToCallMachine(sC({action:"dialout-start"},e),function(e){e.error?i(e.error):r(e)})})}),function(e){return E.apply(this,arguments)})},{key:"stopDialOut",value:function(e){var t=this;return sG(this._callState,"stopDialOut()"),new Promise(function(r,i){t.sendMessageToCallMachine(sC({action:"dialout-stop"},e),function(e){e.error?i(e.error):r(e)})})}},{key:"sipCallTransfer",value:(S=k(function*(e){var t=this;if(sG(this._callState,"sipCallTransfer()"),!e)throw Error("sipCallTransfer() requires a sessionId and toEndPoint");return e.useSipRefer=!1,ot(e,"sipCallTransfer"),sz(e),new Promise(function(r,i){t.sendMessageToCallMachine(sC({action:nw},e),function(e){e.error?i(e.error):r(e)})})}),function(e){return S.apply(this,arguments)})},{key:"sipRefer",value:(b=k(function*(e){var t=this;if(sG(this._callState,"sipRefer()"),!e)throw Error("sessionId and toEndPoint are mandatory parameter");return e.useSipRefer=!0,ot(e,"sipRefer"),new Promise(function(r,i){t.sendMessageToCallMachine(sC({action:nw},e),function(e){e.error?i(e.error):r(e)})})}),function(e){return b.apply(this,arguments)})},{key:"sendDTMF",value:(f=k(function*(e){var t=this;return sG(this._callState,"sendDTMF()"),function(e){var t=e.sessionId,r=e.tones;if(!t||!r)throw Error("sessionId and tones are mandatory parameter");if("string"!=typeof t||"string"!=typeof r)throw Error("sessionId and tones should be of string type");if(r.length>20)throw Error("tones string must be upto 20 characters");var i=r.match(/[^0-9A-D*#]/g);if(i&&i[0])throw Error("".concat(i[0]," is not valid DTMF tone"))}(e),new Promise(function(r,i){t.sendMessageToCallMachine(sC({action:"send-dtmf"},e),function(e){e.error?i(e.error):r(e)})})}),function(e){return f.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var e=this;return this._callState!==rG?Promise.resolve(sC({stats:{latest:{}}},this._network)):new Promise(function(t){e.sendMessageToCallMachine({action:"get-calc-stats"},function(r){t(sC(sC({},e._network),{},{stats:r.stats}))})})}},{key:"testWebsocketConnectivity",value:(m=k(function*(){var e=this;if(sK(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}return new Promise(function(t,r){e.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(e){e.error?r(e.error):t(e.results)})})}),function(){return m.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(e){return e?e instanceof MediaStreamTrack?!!(e&&"live"===e.readyState&&(!e.muted||sh.has(e.id)))||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(u=k(function*(){var e=this;sZ(),sQ(this._callObjectMode,"testCallQuality()"),sH(this._callMachineInitialized,"testCallQuality()",null,!0),sY(this._callState,this._isPreparingToJoin,"testCallQuality()");var t=this._testCallAlreadyInProgress,r=function(r){t||(e._testCallInProgress=r)};if(r(!0),this.needsLoad())try{var i=this._callState;yield this.load(),this._callState=i}catch(e){return r(!1),Promise.reject(e)}return new Promise(function(t){e.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:e.properties.dailyJsVersion},function(i){var n=i.results,s=n.result,o=d(n,sE);if("failed"===s){var a,l=sC({},o);null!==(a=o.error)&&void 0!==a&&a.details?(o.error.details=JSON.parse(o.error.details),l.error=sC(sC({},l.error),{},{details:sC({},l.error.details)}),l.error.details.duringTest="testCallQuality"):(l.error=l.error?sC({},l.error):{},l.error.details={duringTest:"testCallQuality"}),e._maybeSendToSentry(l)}r(!1),t(sC({result:s},o))})})}),function(){return u.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(c=k(function*(e){nS()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),t=yield this.testPeerToPeerCallQuality(e)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),t=yield this.testCallQuality());var t,r={result:t.result,secondsElapsed:t.secondsElapsed};return t.data&&(r.data={maxRTT:t.data.maxRoundTripTime,packetLoss:t.data.avgRecvPacketLoss}),r}),function(e){return c.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(l=k(function*(e){var t=this;if(sK(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}var r=e.videoTrack,i=e.duration;if(!this._validateVideoTrackForNetworkTests(r))throw Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=r,new Promise(function(e,r){t.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:i},function(t){t.error?r(t.error):e(t.results)})})}),function(e){return l.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){nS()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(a=k(function*(e){var t=this;if(sK(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}if(!this._validateVideoTrackForNetworkTests(e))throw Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=e,new Promise(function(e,r){t.sendMessageToCallMachine({action:"test-network-connectivity"},function(t){t.error?r(t.error):e(t.results)})})}),function(e){return a.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var e=this;return new Promise(function(t){e._callState===rG?e.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(e){t(e.cpuStats)}):t({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(e){var t;if(!((null===(t=Object.keys(e))||void 0===t?void 0:t.length)>0))throw Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(sN))}},{key:"_validateVideoSendSettings",value:function(e,t){var r="screenVideo"===e?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],i="Video send settings should be either an object or one of the supported presets: ".concat(r.join());if("string"==typeof t){if(!r.includes(t))throw Error(i)}else{if("object"!==p(t))throw Error(i);if(!t.maxQuality&&!t.encodings&&void 0===t.allowAdaptiveLayers)throw Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(t.maxQuality&&-1===["low","medium","high"].indexOf(t.maxQuality))throw Error("maxQuality must be either low, medium or high");if(t.encodings){var n=!1;switch(Object.keys(t.encodings).length){case 1:n=!t.encodings.low;break;case 2:n=!t.encodings.low||!t.encodings.medium;break;case 3:n=!t.encodings.low||!t.encodings.medium||!t.encodings.high;break;default:n=!0}if(n)throw Error("Encodings must be defined as: low, low and medium, or low, medium and high.");t.encodings.low&&this._validateEncodingLayerHasValidProperties(t.encodings.low),t.encodings.medium&&this._validateEncodingLayerHasValidProperties(t.encodings.medium),t.encodings.high&&this._validateEncodingLayerHasValidProperties(t.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(e){var t=this;if(!e||0===Object.keys(e).length)throw Error("Send settings must contain at least information for one track!");Object.entries(e).forEach(function(e){var r=x(e,2),i=r[0],n=r[1];t._validateVideoSendSettings(i,n)})}},{key:"updateSendSettings",value:function(e){var t=this;return this.validateUpdateSendSettings(e),this.needsLoad()?(this._preloadCache.sendSettings=e,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(r,i){t.sendMessageToCallMachine({action:"update-send-settings",sendSettings:e},function(e){e.error?i(e.error):r(e.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return sZ(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(e){return sZ(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:e}),this}},{key:"activeSpeakerMode",value:function(){return sZ(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(e){return sG(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=e,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:e}),this}},{key:"enumerateDevices",value:(o=k(function*(){var e=this;if(this._callObjectMode){var t=yield navigator.mediaDevices.enumerateDevices();return"Firefox"===nO()&&nD().major>115&&nD().major<123&&(t=t.filter(function(e){return"audiooutput"!==e.kind})),{devices:t.map(function(e){var t=JSON.parse(JSON.stringify(e));if(!nS()&&"videoinput"===e.kind&&e.getCapabilities){var r,i=e.getCapabilities();t.facing=(null==i||null===(r=i.facingMode)||void 0===r?void 0:r.length)>=1?i.facingMode[0]:void 0}return t})}}return new Promise(function(t){e.sendMessageToCallMachine({action:"enumerate-devices"},function(e){t({devices:e.devices})})})}),function(){return o.apply(this,arguments)})},{key:"sendAppMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";if(sG(this._callState,"sendAppMessage()"),JSON.stringify(e).length>this._maxAppMessageSize)throw Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:e,to:t}),this}},{key:"addFakeParticipant",value:function(e){return sZ(),sG(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(sC({action:"add-fake-participant"},e)),this}},{key:"setShowNamesMode",value:function(e){return sX(this._callObjectMode,"setShowNamesMode()"),sZ(),e&&"always"!==e&&"never"!==e?console.error('setShowNamesMode argument should be "always", "never", or false'):this.sendMessageToCallMachine({action:"set-show-names",mode:e}),this}},{key:"setShowLocalVideo",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return sX(this._callObjectMode,"setShowLocalVideo()"),sZ(),sG(this._callState,"setShowLocalVideo()"),"boolean"!=typeof e?console.error("setShowLocalVideo only accepts a boolean value"):(this.sendMessageToCallMachine({action:"set-show-local-video",show:e}),this._showLocalVideo=e),this}},{key:"showLocalVideo",value:function(){return sX(this._callObjectMode,"showLocalVideo()"),sZ(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return sX(this._callObjectMode,"setShowParticipantsBar()"),sZ(),sG(this._callState,"setShowParticipantsBar()"),"boolean"!=typeof e?console.error("setShowParticipantsBar only accepts a boolean value"):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:e}),this._showParticipantsBar=e),this}},{key:"showParticipantsBar",value:function(){return sX(this._callObjectMode,"showParticipantsBar()"),sZ(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return sZ(),sX(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(e){return sZ(),sX(this._callObjectMode,"setCustomIntegrations()"),sG(this._callState,"setCustomIntegrations()"),oe(e)&&(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:e}),this._customIntegrations=e),this}},{key:"startCustomIntegrations",value:function(e){var t=this;if(sZ(),sX(this._callObjectMode,"startCustomIntegrations()"),sG(this._callState,"startCustomIntegrations()"),Array.isArray(e)&&e.some(function(e){return"string"!=typeof e})||!Array.isArray(e)&&"string"!=typeof e)return console.error("startCustomIntegrations() only accepts string | string[]"),this;var r="string"==typeof e?[e]:e,i=r.filter(function(e){return!(e in t._customIntegrations)});return i.length?console.error("Can't find custom integration(s): \"".concat(i.join(", "),'"')):this.sendMessageToCallMachine({action:"start-custom-integrations",ids:r}),this}},{key:"stopCustomIntegrations",value:function(e){var t=this;if(sZ(),sX(this._callObjectMode,"stopCustomIntegrations()"),sG(this._callState,"stopCustomIntegrations()"),Array.isArray(e)&&e.some(function(e){return"string"!=typeof e})||!Array.isArray(e)&&"string"!=typeof e)return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var r="string"==typeof e?[e]:e,i=r.filter(function(e){return!(e in t._customIntegrations)});return i.length?console.error("Can't find custom integration(s): \"".concat(i.join(", "),'"')):this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:r}),this}},{key:"customTrayButtons",value:function(){return sX(this._callObjectMode,"customTrayButtons()"),sZ(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(e){return sX(this._callObjectMode,"updateCustomTrayButtons()"),sZ(),sG(this._callState,"updateCustomTrayButtons()"),s7(e)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:e}),this._customTrayButtons=e):console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(sV))),this}},{key:"theme",value:function(){return sX(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(e){var t=this;return sX(this._callObjectMode,"setTheme()"),new Promise(function(r,i){try{t.validateProperties({theme:e}),t.properties.theme=sC({},e),t.sendMessageToCallMachine({action:"set-theme",theme:t.properties.theme});try{t.emitDailyJSEvent({action:ib,theme:t.properties.theme})}catch(e){console.log("could not emit 'theme-updated'",e)}r(t.properties.theme)}catch(e){i(e)}})}},{key:"requestFullscreen",value:(s=k(function*(){if(sZ(),this._iframe&&!document.fullscreenElement&&nE())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(e){console.log("could not make video call fullscreen",e)}}),function(){return s.apply(this,arguments)})},{key:"exitFullscreen",value:function(){sZ(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(n=k(function*(){var e=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(t){e.sendMessageToCallMachine({action:"get-sidebar-view"},function(e){t(e.view)})})}),function(){return n.apply(this,arguments)})},{key:"setSidebarView",value:function(e){return this._callObjectMode?console.error("setSidebarView is not available in callObject mode"):this.sendMessageToCallMachine({action:"set-sidebar-view",view:e}),this}},{key:"room",value:(i=k(function*(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeRoomConfigDefaults,r=void 0===t||t;return this._accessState.access===r1||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(t){e.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:r},function(e){delete e.action,delete e.callbackStamp,t(e)})})}),function(){return i.apply(this,arguments)})},{key:"geo",value:(r=k(function*(){try{var e=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield e.json()).geo}}catch(e){return console.error("geo lookup failed",e),{current:""}}}),function(){return r.apply(this,arguments)})},{key:"setNetworkTopology",value:(t=k(function*(e){var t=this;return sZ(),sG(this._callState,"setNetworkTopology()"),new Promise(function(r,i){t.sendMessageToCallMachine({action:"set-network-topology",opts:e},function(e){e.error?i({error:e.error}):r({workerId:e.workerId})})})}),function(e){return t.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=k(function*(){var e=this;return new Promise(function(t,r){e.needsLoad()&&t({topology:"none"}),e.sendMessageToCallMachine({action:"get-network-topology"},function(e){e.error?r({error:e.error}):t({topology:e.topology})})})}),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(e){if(sZ(),"number"!=typeof e&&!0!==e&&!1!==e)throw Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(e));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:e})}},{key:"on",value:function(e,t){return M.prototype.on.call(this,e,t)}},{key:"once",value:function(e,t){return M.prototype.once.call(this,e,t)}},{key:"off",value:function(e,t){return M.prototype.off.call(this,e,t)}},{key:"validateProperties",value:function(e){var t,r;if(null!=e&&null!==(t=e.dailyConfig)&&void 0!==t&&t.userMediaAudioConstraints){nS()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var i,n,s=e.inputSettings||{};s.audio=(null===(i=e.inputSettings)||void 0===i?void 0:i.audio)||{},s.audio.settings=(null===(n=e.inputSettings)||void 0===n||null===(n=n.audio)||void 0===n?void 0:n.settings)||{},s.audio.settings=sC(sC({},s.audio.settings),e.dailyConfig.userMediaAudioConstraints),e.inputSettings=s,delete e.dailyConfig.userMediaAudioConstraints}if(null!=e&&null!==(r=e.dailyConfig)&&void 0!==r&&r.userMediaVideoConstraints){nS()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var o,a,l=e.inputSettings||{};l.video=(null===(o=e.inputSettings)||void 0===o?void 0:o.video)||{},l.video.settings=(null===(a=e.inputSettings)||void 0===a||null===(a=a.video)||void 0===a?void 0:a.settings)||{},l.video.settings=sC(sC({},l.video.settings),e.dailyConfig.userMediaVideoConstraints),e.inputSettings=l,delete e.dailyConfig.userMediaVideoConstraints}for(var c in e)if(sU[c]){if(sU[c].validate&&!sU[c].validate(e[c],this))throw Error("property '".concat(c,"': ").concat(sU[c].help))}else console.warn("Ignoring unrecognized property '".concat(c,"'")),delete e[c]}},{key:"assembleMeetingUrl",value:function(){var e,t,r=sC(sC({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:null!==(e=this.properties.dailyConfig)&&void 0!==e&&e.proxyUrl?encodeURIComponent(null===(t=this.properties.dailyConfig)||void 0===t?void 0:t.proxyUrl):void 0}),i=r.url.match(/\?/)?"&":"?";return r.url+i+Object.keys(sU).filter(function(e){return sU[e].queryString&&void 0!==r[e]}).map(function(e){return"".concat(sU[e].queryString,"=").concat(r[e])}).join("&")}},{key:"needsLoad",value:function(){return[rB,r$,rW,rY].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(e,t){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(e,t,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(e){this._messageChannel.forwardPackagedMessageToCallMachine(e,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(e,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(e)}},{key:"handleMessageFromCallMachine",value:function(e){switch(e.action){case iv:this.sendMessageToCallMachine(sC({action:iy},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var t={action:nm,level:"log",code:1011,stats:{event:"bundle load",time:"no-op"===this._bundleLoadTime?0:this._bundleLoadTime,preLoaded:"no-op"===this._bundleLoadTime,url:K(this.properties.dailyConfig)}};this.sendMessageToCallMachine(t),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case iS:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(e);break;case iT:var r,i=sC({},e);delete i.internal,this._maxAppMessageSize=(null===(r=e.internal)||void 0===r?void 0:r._maxAppMessageSize)||4096,this._joinedCallback&&(this._joinedCallback(e.participants),this._joinedCallback=null),this.emitDailyJSEvent(i);break;case iA:case iP:if(this._callState===rW)return;if(e.participant&&e.participant.session_id){var n=e.participant.local?"local":e.participant.session_id;if(this._callObjectMode){var s=this._callMachine().store;sr(e.participant,s),si(e.participant,s),sn(e.participant,this._participants[n],s)}try{this.maybeParticipantTracksStopped(this._participants[n],e.participant),this.maybeParticipantTracksStarted(this._participants[n],e.participant),this.maybeEventRecordingStopped(this._participants[n],e.participant),this.maybeEventRecordingStarted(this._participants[n],e.participant)}catch(e){console.error("track events error",e)}this.compareEqualForParticipantUpdateEvent(e.participant,this._participants[n])||(this._participants[n]=sC({},e.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(e))}break;case iM:if(e.participant&&e.participant.session_id){var o=this._participants[e.participant.session_id];o&&this.maybeParticipantTracksStopped(o,null),delete this._participants[e.participant.session_id],this.emitDailyJSEvent(e)}break;case ij:D(this._participantCounts,e.participantCounts)||(this._participantCounts=e.participantCounts,this.emitDailyJSEvent(e));break;case iO:var a={access:e.access};e.awaitingAccess&&(a.awaitingAccess=e.awaitingAccess),D(this._accessState,a)||(this._accessState=a,this.emitDailyJSEvent(e));break;case iD:if(e.meetingSession){this._meetingSessionSummary=e.meetingSession,this.emitDailyJSEvent(e);var l=sC(sC({},e),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(l)}break;case nu:this._iframe&&!e.preserveIframe&&(this._iframe.src=""),this._updateCallState(rY),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(e.errorMsg),this._loadedCallback=null),e.preserveIframe;var c,u=d(e,sx);null!=u&&null!==(c=u.error)&&void 0!==c&&c.details&&(u.error.details=JSON.parse(u.error.details)),this._maybeSendToSentry(e),this._joinedCallback&&(this._joinedCallback(null,u),this._joinedCallback=null),this.emitDailyJSEvent(u);break;case iC:this._callState!==rY&&this._updateCallState(rW),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(e);break;case"selected-devices-updated":e.devices&&this.emitDailyJSEvent(e);break;case i9:var h=e.state,p=e.threshold,m=e.quality,f=h.state,g=h.reasons;f===this._network.networkState&&D(g,this._network.networkStateReasons)&&p===this._network.threshold&&m===this._network.quality||(this._network.networkState=f,this._network.networkStateReasons=g,this._network.quality=m,this._network.threshold=p,e.networkState=f,g.length&&(e.networkStateReasons=g),delete e.state,this.emitDailyJSEvent(e));break;case i8:e&&e.cpuLoadState&&this.emitDailyJSEvent(e);break;case i7:e&&void 0!==e.faceCounts&&this.emitDailyJSEvent(e);break;case i3:var v=e.activeSpeaker;this._activeSpeaker.peerId!==v.peerId&&(this._activeSpeaker.peerId=v.peerId,this.emitDailyJSEvent({action:e.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var y=e.show;this._showLocalVideo=y,this.emitDailyJSEvent({action:e.action,show:y});break;case i4:var b=e.enabled;this._activeSpeakerMode!==b&&(this._activeSpeakerMode=b,this.emitDailyJSEvent({action:e.action,enabled:this._activeSpeakerMode}));break;case iN:case iR:case iF:this._waitingParticipants=e.allWaitingParticipants,this.emitDailyJSEvent({action:e.action,participant:e.participant});break;case na:D(this._receiveSettings,e.receiveSettings)||(this._receiveSettings=e.receiveSettings,this.emitDailyJSEvent({action:e.action,receiveSettings:e.receiveSettings}));break;case nl:this._maybeUpdateInputSettings(e.inputSettings);break;case"send-settings-updated":D(this._sendSettings,e.sendSettings)||(this._sendSettings=e.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:e.action,sendSettings:e.sendSettings}));break;case"local-audio-level":this._localAudioLevel=e.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(e);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=e.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(e);break;case iX:var w=e.session_id;this._rmpPlayerState[w]=e.playerState,this.emitDailyJSEvent(e);break;case i0:delete this._rmpPlayerState[e.session_id],this.emitDailyJSEvent(e);break;case iZ:var _=e.session_id,S=this._rmpPlayerState[_];S&&this.compareEqualForRMPUpdateEvent(S,e.remoteMediaPlayerState)||(this._rmpPlayerState[_]=e.remoteMediaPlayerState,this.emitDailyJSEvent(e));break;case"custom-button-click":case"sidebar-view-changed":case"pip-started":case"pip-stopped":this.emitDailyJSEvent(e);break;case iI:var k=this._meetingSessionState.topology!==(e.meetingSessionState&&e.meetingSessionState.topology);this._meetingSessionState=on(e.meetingSessionState,this._callObjectMode),(this._callObjectMode||k)&&this.emitDailyJSEvent(e);break;case i1:this._isScreenSharing=!0,this.emitDailyJSEvent(e);break;case i2:case i5:this._isScreenSharing=!1,this.emitDailyJSEvent(e);break;case iz:case iJ:case iG:case iW:case iY:case iU:case iB:case i$:case ik:case iE:case iK:case iQ:case"test-completed":case i6:case iH:case nr:case ni:case nn:case ns:case nc:case no:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(e);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(e,t){var r="record";e&&(t.local||!1!==t[r]||e[r]===t[r]||this.emitDailyJSEvent({action:iJ}))}},{key:"maybeEventRecordingStarted",value:function(e,t){var r="record";e&&(t.local||!0!==t[r]||e[r]===t[r]||this.emitDailyJSEvent({action:iz}))}},{key:"_trackStatePlayable",value:function(e){return!(!e||e.state!==r0)}},{key:"_trackChanged",value:function(e,t){return(null==e?void 0:e.id)!==(null==t?void 0:t.id)}},{key:"maybeEventTrackStopped",value:function(e,t,r){var i,n,s=null!==(i=null==t?void 0:t.tracks[e])&&void 0!==i?i:null,o=null!==(n=null==r?void 0:r.tracks[e])&&void 0!==n?n:null,a=null==s?void 0:s.track;if(a){var l=this._trackStatePlayable(s),c=this._trackStatePlayable(o),u=this._trackChanged(a,null==o?void 0:o.track);l&&(c&&!u||this.emitDailyJSEvent({action:iq,track:a,participant:null!=r?r:t,type:e}))}}},{key:"maybeEventTrackStarted",value:function(e,t,r){var i,n,s=null!==(i=null==t?void 0:t.tracks[e])&&void 0!==i?i:null,o=null!==(n=null==r?void 0:r.tracks[e])&&void 0!==n?n:null,a=null==o?void 0:o.track;if(a){var l=this._trackStatePlayable(s),c=this._trackStatePlayable(o),u=this._trackChanged(null==s?void 0:s.track,a);c&&(l&&!u||this.emitDailyJSEvent({action:iV,track:a,participant:r,type:e}))}}},{key:"maybeParticipantTracksStopped",value:function(e,t){if(e)for(var r in e.tracks)this.maybeEventTrackStopped(r,e,t)}},{key:"maybeParticipantTracksStarted",value:function(e,t){if(t)for(var r in t.tracks)this.maybeEventTrackStarted(r,e,t)}},{key:"compareEqualForRMPUpdateEvent",value:function(e,t){var r,i;return e.state===t.state&&(null===(r=e.settings)||void 0===r?void 0:r.volume)===(null===(i=t.settings)||void 0===i?void 0:i.volume)}},{key:"emitDailyJSEvent",value:function(e){try{e.callClientId=this.callClientId,this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(e,t){return!!D(e,t)&&(!e.videoTrack||!t.videoTrack||e.videoTrack.id===t.videoTrack.id&&e.videoTrack.muted===t.videoTrack.muted&&e.videoTrack.enabled===t.videoTrack.enabled)&&(!e.audioTrack||!t.audioTrack||e.audioTrack.id===t.audioTrack.id&&e.audioTrack.muted===t.audioTrack.muted&&e.audioTrack.enabled===t.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return nS()?"undefined"==typeof DailyNativeUtils?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(e){this._updateCallState(this._callState,e)}},{key:"_updateCallState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._isPreparingToJoin;if(e!==this._callState||t!==this._isPreparingToJoin){var r=this._callState,i=this._isPreparingToJoin;this._callState=e,this._isPreparingToJoin=t;var n=this._callState===rG;this.updateShowAndroidOngoingMeetingNotification(n);var s=sW(r,i),o=sW(this._callState,this._isPreparingToJoin);s!==o&&(this.updateKeepDeviceAwake(o),this.updateDeviceAudioMode(o),this.updateNoOpRecordingEnsuringBackgroundContinuity(o))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=sI,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:r1},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=on(sD,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=4096,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(e){nS()&&this.nativeUtils().setKeepDeviceAwake(e,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(e){if(nS()&&!this.disableReactNativeAutoDeviceManagement("audio")){var t=e?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(t)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(e){if(nS()&&this.nativeUtils().setShowOngoingMeetingNotification){var t,r,i,n;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var s=this.properties.reactNativeConfig.androidInCallNotification;t=s.title,r=s.subtitle,i=s.iconName,n=s.disableForCustomOverride}n&&(e=!1),this.nativeUtils().setShowOngoingMeetingNotification(e,t,r,i,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(e){nS()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(e)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var e;if(nS()){var t=null===(e=this._callMachine())||void 0===e||null===(e=e.store)||void 0===e?void 0:e.getState();for(var r in null==t?void 0:t.streams){var i=t.streams[r];i&&i.pendingTrack&&"audio"===i.pendingTrack.kind&&(i.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(e){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[e]}},{key:"absoluteUrl",value:function(e){if(void 0!==e){var t=document.createElement("a");return t.href=e,t.href}}},{key:"sayHello",value:function(){var e="hello, world.";return console.log(e),e}},{key:"_logUseAfterDestroy",value:function(){var e=Object.values(sj)[0];if(this.needsLoad()){if(e&&!e.needsLoad()){var t={action:nm,level:"error",code:this.strictMode?9995:9997};e.sendMessageToCallMachine(t)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.")}else{var r={action:nm,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(r,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var e=0,t=Object.values(sj);e<t.length;e++){var r=t[e];r._callMachineInitialized?(r.sendMessageToCallMachine({action:nm,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),r._delayDuplicateInstanceLog=!1):r._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(e){if(!(null!==(i=e.error)&&void 0!==i&&i.type&&(![ia,is,ir].includes(e.error.type)||e.error.type===ir&&e.error.msg.includes("deleted")))){var t=null!==(n=this.properties)&&void 0!==n&&n.url?new URL(this.properties.url):void 0,r="production";t&&t.host.includes(".staging.daily")&&(r="staging");var i,n,s,o,a,l,c,u,d,h=new rd({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:rw,stackParser:rC,integrations:(function(e){let t=[tQ(),tH(),rj(),rP(),rR(),rU(),t5(),rq()];return!1!==e.autoSessionTracking&&t.push(rN()),t})({}).filter(function(e){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(e.name)}),environment:r}),p=new tr;if(p.setClient(h),h.init(),this.session_id&&p.setExtra("sessionId",this.session_id),this.properties){var m=sC({},this.properties);m.userName=m.userName?"[Filtered]":void 0,m.userData=m.userData?"[Filtered]":void 0,m.token=m.token?"[Filtered]":void 0,p.setExtra("properties",m)}if(t){var f=t.searchParams.get("domain");if(!f){var g=t.host.match(/(.*?)\./);f=g&&g[1]||""}f&&p.setTag("domain",f)}e.error&&(p.setTag("fatalErrorType",e.error.type),p.setExtra("errorDetails",e.error.details),(null===(a=e.error.details)||void 0===a?void 0:a.uri)&&p.setTag("serverAddress",e.error.details.uri),(null===(l=e.error.details)||void 0===l?void 0:l.workerGroup)&&p.setTag("workerGroup",e.error.details.workerGroup),(null===(c=e.error.details)||void 0===c?void 0:c.geoGroup)&&p.setTag("geoGroup",e.error.details.geoGroup),(null===(u=e.error.details)||void 0===u?void 0:u.on)&&p.setTag("connectionAttempt",e.error.details.on),null!==(d=e.error.details)&&void 0!==d&&d.bundleUrl&&(p.setTag("bundleUrl",e.error.details.bundleUrl),p.setTag("bundleError",e.error.details.sourceError.type))),p.setTags({callMode:this._callObjectMode?nS()?"reactNative":null!==(s=this.properties)&&void 0!==s&&null!==(s=s.dailyConfig)&&void 0!==s&&null!==(s=s.callMode)&&void 0!==s&&s.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:ee.version()});var v=(null===(o=e.error)||void 0===o?void 0:o.msg)||e.errorMsg;p.captureException(Error(v))}}},{key:"_callMachine",value:function(){var e;return null===(e=window._daily)||void 0===e||null===(e=e.instances)||void 0===e||null===(e=e[this.callClientId])||void 0===e?void 0:e.callMachine}},{key:"_maybeUpdateInputSettings",value:function(e){if(!D(this._inputSettings,e)){var t=this._getInputSettings();this._inputSettings=e;var r=this._getInputSettings();D(t,r)||this.emitDailyJSEvent({action:nl,inputSettings:r})}}}],[{key:"supportedBrowser",value:function(){if(nS())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var e=G.getParser(n_());return{supported:!!nP(),mobile:"mobile"===e.getPlatformType(),name:e.getBrowserName(),version:e.getBrowserVersion(),supportsFullscreen:!!nE(),supportsScreenShare:!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&(function(e,t){if(!e||!t)return!0;switch(e){case"Chrome":return t.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(13===t.major&&0===t.minor&&0===t.point);case"Firefox":return t.major>=67}return!0}(nO(),nD())||nS())),supportsSfu:!!nP(),supportsVideoProcessing:nC(),supportsAudioProcessing:nA()}}},{key:"version",value:function(){return"0.85.0"}},{key:"createCallObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.layout="none",new ee(null,e)}},{key:"wrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(sZ(),!e||!e.contentWindow||"string"!=typeof e.src)throw Error("DailyIframe::Wrap needs an iframe-like first argument");return t.layout||(t.customLayout?t.layout="custom-v1":t.layout="browser"),new ee(e,t)}},{key:"createFrame",value:function(e,t){sZ(),e&&t?(r=e,i=t):e&&e.append?(r=e,i={}):(r=document.body,i=e||{});var r,i,n=i.iframeStyle;n||(n=r===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var s=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?s.allow="microphone, camera":s.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",s.style.visibility="hidden",r.appendChild(s),s.style.visibility=null,Object.keys(n).forEach(function(e){return s.style[e]=n[e]}),i.layout||(i.customLayout?i.layout="custom-v1":i.layout="browser");try{return new ee(s,i)}catch(e){throw r.removeChild(s),e}}},{key:"createTransparentFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};sZ();var t=document.createElement("iframe");return t.allow="microphone; camera; autoplay",t.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border: 0;\n      pointer-events: none;\n    ",document.body.appendChild(t),e.layout||(e.layout="custom-v1"),ee.wrap(t,e)}},{key:"getCallInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?sj[e]:Object.values(sj)[0]}}])}();function sz(e){if(e.extension){if("string"!=typeof e.extension)throw Error("Error starting dial out: extension must be a string");if(e.extension.length>20)throw Error("Error starting dial out: extension length must be less than or equal to 20")}if(e.waitBeforeExtensionDialSec){if("number"!=typeof e.waitBeforeExtensionDialSec)throw Error("Error starting dial out: waitBeforeExtensionDialSec must be a number");if(e.waitBeforeExtensionDialSec>60)throw Error("Error starting dial out: waitBeforeExtensionDialSec must be less than or equal to 60");if(!e.extension)throw Error("Error starting dial out: waitBeforeExtensionDialSec requires a phoneNumber and extension")}}function sJ(e,t){var r={};for(var i in e)if(e[i]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",i),r[i]=nf;else if("dailyConfig"===i){if(e[i].modifyLocalSdpHook){var n=window._daily.instances[t].customCallbacks||{};n.modifyLocalSdpHook=e[i].modifyLocalSdpHook,window._daily.instances[t].customCallbacks=n,delete e[i].modifyLocalSdpHook}if(e[i].modifyRemoteSdpHook){var s=window._daily.instances[t].customCallbacks||{};s.modifyRemoteSdpHook=e[i].modifyRemoteSdpHook,window._daily.instances[t].customCallbacks=s,delete e[i].modifyRemoteSdpHook}r[i]=e[i]}else r[i]=e[i];return r}function sG(e){var t=arguments.length>2?arguments[2]:void 0;if(e!==rG){var r="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," only supported after join.");throw t&&(r+=" ".concat(t)),console.error(r),Error(r)}}function sW(e,t){return[rJ,rG].includes(e)||t}function sY(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"This daily-js method",i=arguments.length>3?arguments[3]:void 0;if(sW(e,t)){var n="".concat(r," not supported after joining a meeting.");throw i&&(n+=" ".concat(i)),console.error(n),Error(n)}}function sH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method",r=arguments.length>2?arguments[2]:void 0;if(!e){var i="".concat(t,arguments.length>3&&void 0!==arguments[3]&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw r&&(i+=" ".concat(r)),console.error(i),Error(i)}}function sK(e){if(e){var t="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(t),Error(t)}}function sQ(e){if(!e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(t),Error(t)}}function sX(e){if(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(t),Error(t)}}function sZ(){if(nS())throw Error("This daily-js method is not currently supported in React Native")}function s0(){if(!nS())throw Error("This daily-js method is only supported in React Native")}function s1(e){var t;if(void 0===e)return!0;if("string"==typeof e)t=e;else try{t=JSON.stringify(e),D(JSON.parse(t),e)||console.warn("The userData provided will be modified when serialized.")}catch(e){throw Error("userData must be serializable to JSON: ".concat(e))}if(t.length>4096)throw Error("userData is too large (".concat(t.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function s2(e,t){for(var r=t.allowAllParticipantsKey,i=function(e){return!!(void 0===e.layer||Number.isInteger(e.layer)&&e.layer>=0||"inherit"===e.layer)},n=0,s=Object.entries(e);n<s.length;n++){var o=x(s[n],2),a=o[0],l=o[1];if(!function(e){var t=["local"];return r||t.push("*"),e&&!t.includes(e)}(a)||!(l&&!(l.video&&!i(l.video))&&!(l.screenVideo&&!i(l.screenVideo))))return!1}return!0}function s5(e){if("object"!==p(e))return!1;for(var t=0,r=Object.entries(e);t<r.length;t++){var i=x(r[t],2),n=i[0],s=i[1];switch(n){case"video":if("object"!==p(s))return!1;for(var o=0,a=Object.entries(s);o<a.length;o++){var l=x(a[o],2),c=l[0],u=l[1];switch(c){case"processor":if(!function(e){if(nS())return console.warn("Video processing is not yet supported in React Native"),!1;var t,r=["type","config"];return!!e&&"object"===p(e)&&!!("string"==typeof(t=e.type)&&(Object.values(ng).includes(t)||(console.error("inputSettings video processor type invalid"),0)))&&(!e.config||"object"===p(e.config)&&!!function(e,t){var r,i=Object.keys(t);if(0===i.length)return!0;var n="invalid object in inputSettings -> video -> processor -> config";switch(e){case ng.BGBLUR:return i.length>1||"strength"!==i[0]?(console.error(n),!1):!("number"!=typeof t.strength||t.strength<=0||t.strength>1||isNaN(t.strength))||(console.error("".concat(n,"; expected: {0 < strength <= 1}, got: ").concat(t.strength)),!1);case ng.BGIMAGE:return!(void 0!==t.source&&!("default"===t.source?(t.type="default",!0):t.source instanceof ArrayBuffer||(Q(t.source)?(t.type="url",!!function(e){var t=new URL(e),r=t.pathname;if("data:"===t.protocol)try{var i=r.substring(r.indexOf(":")+1,r.indexOf(";")).split("/")[1];return nb.includes(i)}catch(e){return console.error("failed to deduce blob content type",e),!1}var n=r.split(".").at(-1).toLowerCase().trim();return nb.includes(n)}(t.source)||(console.error("invalid image type; supported types: [".concat(nb.join(", "),"]")),!1)):isNaN(r=Number(t.source))||!Number.isInteger(r)||r<=0||r>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(t.type="daily-preselect",!0))));default:return!0}}(e.type,e.config))&&(Object.keys(e).filter(function(e){return!r.includes(e)}).forEach(function(t){console.warn("invalid key inputSettings -> video -> processor : ".concat(t)),delete e[t]}),!0)}(u))return!1;break;case"settings":if(!s4(u))return!1;break;default:return!1}}break;case"audio":if("object"!==p(s))return!1;for(var d=0,h=Object.entries(s);d<h.length;d++){var m=x(h[d],2),f=m[0],g=m[1];switch(f){case"processor":if(!function(e){if(nS())return console.warn("Video processing is not yet supported in React Native"),!1;var t,r=["type"];return!!e&&"object"===p(e)&&(Object.keys(e).filter(function(e){return!r.includes(e)}).forEach(function(t){console.warn("invalid key inputSettings -> audio -> processor : ".concat(t)),delete e[t]}),!!("string"==typeof(t=e.type)&&(Object.values(nv).includes(t)||(console.error("inputSettings audio processor type invalid"),0))))}(g))return!1;break;case"settings":if(!s4(g))return!1;break;default:return!1}}break;default:return!1}}return!0}function s3(e,t,r){var i,n=[];e.video&&e.video.processor&&(nC(null!==(i=null==t?void 0:t.useLegacyVideoProcessor)&&void 0!==i&&i)||(e.video.settings?delete e.video.processor:delete e.video,n.push("video"))),e.audio&&e.audio.processor&&(nA()||(e.audio.settings?delete e.audio.processor:delete e.audio,n.push("audio"))),n.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(n.join(", "))),e.audio&&e.audio.settings&&(e.audio.settings.customTrack?(r.audioTrack=e.audio.settings.customTrack,e.audio.settings={customTrack:nf}):delete r.audioTrack),e.video&&e.video.settings&&(e.video.settings.customTrack?(r.videoTrack=e.video.settings.customTrack,e.video.settings={customTrack:nf}):delete r.videoTrack)}function s4(e){return"object"===p(e)&&(!e.customTrack||e.customTrack instanceof MediaStreamTrack)}function s9(){var e=Object.values(ng).join(" | "),t=Object.values(nv).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(e," ], config?: {} } }, audio?: { processor: {type: [ ").concat(t," ] } } }")}function s6(e){var t=e.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(r4).concat(t?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function s8(){return"customIntegrations should be an object of type ".concat(JSON.stringify(sq),".")}function s7(e){if(e&&"object"!==p(e)||Array.isArray(e))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(sV),".")),!1;if(e)for(var t=0,r=Object.entries(e);t<r.length;t++)for(var i=x(r[t],1)[0],n=0,s=Object.entries(e[i]);n<s.length;n++){var o=x(s[n],2),a=o[0],l=o[1],c=sV.id[a];if(!c)return console.error("customTrayButton does not support key ".concat(a)),!1;switch(a){case"iconPath":case"iconPathDarkMode":if(!Q(l))return console.error("customTrayButton ".concat(a," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(l))return console.error("customTrayButton ".concat(a," should be ").concat(c,". Got: ").concat(l)),!1;break;default:if(p(l)!==c)return console.error("customTrayButton ".concat(a," should be a ").concat(c,".")),!1}}return!0}function oe(e){if(!e||e&&"object"!==p(e)||Array.isArray(e))return console.error(s8()),!1;for(var t=function(e){return"".concat(e," should be ").concat(sq.id[e])},r=function(e,t){return console.error("customIntegration ".concat(e,": ").concat(t))},i=0,n=Object.entries(e);i<n.length;i++){var s=x(n[i],1)[0];if(!("label"in e[s]))return r(s,"label is required"),!1;if(!("location"in e[s]))return r(s,"location is required"),!1;if(!("src"in e[s])&&!("srcdoc"in e[s]))return r(s,"src or srcdoc is required"),!1;for(var o=0,a=Object.entries(e[s]);o<a.length;o++){var l=x(a[o],2),c=l[0],u=l[1];switch(c){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if("string"!=typeof u)return r(s,t(c)),!1;break;case"iconURL":if(!Q(u))return r(s,"".concat(c," should be a url")),!1;break;case"src":if("srcdoc"in e[s])return r(s,"cannot have both src and srcdoc"),!1;if(!Q(u))return r(s,'src "'.concat(u,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in e[s])return r(s,"cannot have both src and srcdoc"),!1;if("string"!=typeof u)return r(s,t(c)),!1;break;case"location":if(!["main","sidebar"].includes(u))return r(s,t(c)),!1;break;case"controlledBy":if("*"!==u&&"owners"!==u&&(!Array.isArray(u)||u.some(function(e){return"string"!=typeof e})))return r(s,t(c)),!1;break;case"shared":if((!Array.isArray(u)||u.some(function(e){return"string"!=typeof e}))&&"owners"!==u&&"boolean"!=typeof u)return r(s,t(c)),!1;break;default:if(!sq.id[c])return console.error("customIntegration does not support key ".concat(c)),!1}}}return!0}function ot(e,t){var r=e.sessionId,i=e.toEndPoint,n=e.callerId,s=e.useSipRefer;if(!r||!i)throw Error("".concat(t,"() requires a sessionId and toEndPoint"));if("string"!=typeof r||"string"!=typeof i)throw Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(s&&!i.startsWith("sip:"))throw Error('"toEndPoint" must be a "sip" address');if(!i.startsWith("sip:")&&!i.startsWith("+"))throw Error("toEndPoint: ".concat(i,' must starts with either "sip:" or "+"'));if(n&&"string"!=typeof n)throw Error("callerId must be of type string");if(n&&!i.startsWith("+"))throw Error("callerId is only valid when transferring to a PSTN number")}function or(e){if("object"!==p(e))throw Error('RemoteMediaPlayerSettings: must be "object" type');if(e.state&&!Object.values(ny).includes(e.state))throw Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(ny));if(e.volume){if("number"!=typeof e.volume)throw Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(e.volume<0||e.volume>2)throw Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function oi(e,t,r){return!("number"!=typeof e||e<t||e>r)}function on(e,t){return e&&!t&&delete e.data,e}},88726:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Api=t.HttpClient=t.ContentType=void 0,function(e){e.Json="application/json",e.JsonApi="application/vnd.api+json",e.FormData="multipart/form-data",e.UrlEncoded="application/x-www-form-urlencoded",e.Text="text/plain"}(r||(t.ContentType=r={}));class i{baseUrl="https://api.vapi.ai";securityData=null;securityWorker;abortControllers=new Map;customFetch=(...e)=>fetch(...e);baseApiParams={credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"};constructor(e={}){Object.assign(this,e)}setSecurityData=e=>{this.securityData=e};encodeQueryParam(e,t){let r=encodeURIComponent(e);return`${r}=${encodeURIComponent("number"==typeof t?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map(e=>this.encodeQueryParam(t,e)).join("&")}toQueryString(e){let t=e||{};return Object.keys(t).filter(e=>void 0!==t[e]).map(e=>Array.isArray(t[e])?this.addArrayQueryParam(t,e):this.addQueryParam(t,e)).join("&")}addQueryParams(e){let t=this.toQueryString(e);return t?`?${t}`:""}contentFormatters={[r.Json]:e=>null!==e&&("object"==typeof e||"string"==typeof e)?JSON.stringify(e):e,[r.JsonApi]:e=>null!==e&&("object"==typeof e||"string"==typeof e)?JSON.stringify(e):e,[r.Text]:e=>null!==e&&"string"!=typeof e?JSON.stringify(e):e,[r.FormData]:e=>e instanceof FormData?e:Object.keys(e||{}).reduce((t,r)=>{let i=e[r];return t.append(r,i instanceof Blob?i:"object"==typeof i&&null!==i?JSON.stringify(i):`${i}`),t},new FormData),[r.UrlEncoded]:e=>this.toQueryString(e)};mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}createAbortSignal=e=>{if(this.abortControllers.has(e)){let t=this.abortControllers.get(e);return t?t.signal:void 0}let t=new AbortController;return this.abortControllers.set(e,t),t.signal};abortRequest=e=>{let t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))};request=async({body:e,secure:t,path:i,type:n,query:s,format:o,baseUrl:a,cancelToken:l,...c})=>{let u=("boolean"==typeof t?t:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},d=this.mergeRequestParams(c,u),h=s&&this.toQueryString(s),p=this.contentFormatters[n||r.Json],m=o||d.format;return this.customFetch(`${a||this.baseUrl||""}${i}${h?`?${h}`:""}`,{...d,headers:{...d.headers||{},...n&&n!==r.FormData?{"Content-Type":n}:{}},signal:(l?this.createAbortSignal(l):d.signal)||null,body:null==e?null:p(e)}).then(async e=>{e.data=null,e.error=null;let t=m?e.clone():e,r=m?await t[m]().then(t=>(e.ok?e.data=t:e.error=t,e)).catch(t=>(e.error=t,e)):e;if(l&&this.abortControllers.delete(l),!e.ok)throw r;return r})}}t.HttpClient=i;class n extends i{assistant={assistantControllerCreate:(e,t={})=>this.request({path:"/assistant",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),assistantControllerFindAll:(e,t={})=>this.request({path:"/assistant",method:"GET",query:e,secure:!0,format:"json",...t}),assistantControllerFindOne:(e,t={})=>this.request({path:`/assistant/${e}`,method:"GET",secure:!0,format:"json",...t}),assistantControllerUpdate:(e,t,i={})=>this.request({path:`/assistant/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),assistantControllerReplace:(e,t,i={})=>this.request({path:`/assistant/${e}`,method:"PUT",body:t,secure:!0,type:r.Json,format:"json",...i}),assistantControllerRemove:(e,t={})=>this.request({path:`/assistant/${e}`,method:"DELETE",secure:!0,format:"json",...t}),assistantControllerFindVersions:(e,t,r={})=>this.request({path:`/assistant/${e}/version`,method:"GET",query:t,secure:!0,format:"json",...r})};v2={assistantControllerFindAllPaginated:(e,t={})=>this.request({path:"/v2/assistant",method:"GET",query:e,secure:!0,format:"json",...t}),callControllerCallsExport:(e,t={})=>this.request({path:"/v2/call/export",method:"GET",query:e,secure:!0,...t}),callControllerFindAllPaginated:(e,t={})=>this.request({path:"/v2/call",method:"GET",query:e,secure:!0,format:"json",...t}),callControllerFindAllMetadataPaginated:(e,t={})=>this.request({path:"/v2/call/metadata",method:"GET",query:e,secure:!0,format:"json",...t}),phoneNumberControllerFindAllPaginated:(e,t={})=>this.request({path:"/v2/phone-number",method:"GET",query:e,secure:!0,format:"json",...t})};squad={squadControllerCreate:(e,t={})=>this.request({path:"/squad",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),squadControllerFindAll:(e,t={})=>this.request({path:"/squad",method:"GET",query:e,secure:!0,format:"json",...t}),squadControllerFindOne:(e,t={})=>this.request({path:`/squad/${e}`,method:"GET",secure:!0,format:"json",...t}),squadControllerUpdate:(e,t,i={})=>this.request({path:`/squad/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),squadControllerRemove:(e,t={})=>this.request({path:`/squad/${e}`,method:"DELETE",secure:!0,format:"json",...t})};workflow={workflowControllerFindAll:(e={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...e}),workflowControllerCreate:(e,t={})=>this.request({path:"/workflow",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),workflowControllerFindOne:(e,t={})=>this.request({path:`/workflow/${e}`,method:"GET",secure:!0,format:"json",...t}),workflowControllerDelete:(e,t={})=>this.request({path:`/workflow/${e}`,method:"DELETE",secure:!0,format:"json",...t}),workflowControllerUpdate:(e,t,i={})=>this.request({path:`/workflow/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i})};call={callControllerCreate:(e,t={})=>this.request({path:"/call",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),callControllerFindAll:(e,t={})=>this.request({path:"/call",method:"GET",query:e,secure:!0,format:"json",...t}),callControllerFindOne:(e,t={})=>this.request({path:`/call/${e}`,method:"GET",secure:!0,format:"json",...t}),callControllerUpdate:(e,t,i={})=>this.request({path:`/call/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),callControllerDeleteCallData:(e,t,i={})=>this.request({path:`/call/${e}`,method:"DELETE",body:t,secure:!0,type:r.Json,format:"json",...i}),callControllerCreatePhoneCall:(e,t={})=>this.request({path:"/call/phone",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),callControllerCreateWebCall:(e,t={})=>this.request({path:"/call/web",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t})};chat={chatControllerListChats:(e,t={})=>this.request({path:"/chat",method:"GET",query:e,secure:!0,format:"json",...t}),chatControllerCreateChat:(e,t={})=>this.request({path:"/chat",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),chatControllerGetChat:(e,t={})=>this.request({path:`/chat/${e}`,method:"GET",secure:!0,format:"json",...t}),chatControllerDeleteChat:(e,t={})=>this.request({path:`/chat/${e}`,method:"DELETE",secure:!0,format:"json",...t}),chatControllerCreateOpenAiChat:(e,t={})=>this.request({path:"/chat/responses",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),chatControllerCreateWebChat:(e,t={})=>this.request({path:"/chat/web",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),chatControllerCreateOpenAiWebChat:(e,t={})=>this.request({path:"/chat/web/responses",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t})};campaign={campaignControllerCreate:(e,t={})=>this.request({path:"/campaign",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),campaignControllerFindAll:(e,t={})=>this.request({path:"/campaign",method:"GET",query:e,secure:!0,format:"json",...t}),campaignControllerFindOne:(e,t={})=>this.request({path:`/campaign/${e}`,method:"GET",secure:!0,format:"json",...t}),campaignControllerUpdate:(e,t,i={})=>this.request({path:`/campaign/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),campaignControllerRemove:(e,t={})=>this.request({path:`/campaign/${e}`,method:"DELETE",secure:!0,format:"json",...t})};session={sessionControllerCreate:(e,t={})=>this.request({path:"/session",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),sessionControllerFindAllPaginated:(e,t={})=>this.request({path:"/session",method:"GET",query:e,secure:!0,format:"json",...t}),sessionControllerFindOne:(e,t={})=>this.request({path:`/session/${e}`,method:"GET",secure:!0,format:"json",...t}),sessionControllerUpdate:(e,t,i={})=>this.request({path:`/session/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),sessionControllerRemove:(e,t={})=>this.request({path:`/session/${e}`,method:"DELETE",secure:!0,format:"json",...t})};phoneNumber={phoneNumberControllerImportTwilio:(e,t={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),phoneNumberControllerImportVonage:(e,t={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),phoneNumberControllerCreate:(e,t={})=>this.request({path:"/phone-number",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),phoneNumberControllerFindAll:(e,t={})=>this.request({path:"/phone-number",method:"GET",query:e,secure:!0,format:"json",...t}),phoneNumberControllerFindOne:(e,t={})=>this.request({path:`/phone-number/${e}`,method:"GET",secure:!0,format:"json",...t}),phoneNumberControllerUpdate:(e,t,i={})=>this.request({path:`/phone-number/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),phoneNumberControllerRemove:(e,t={})=>this.request({path:`/phone-number/${e}`,method:"DELETE",secure:!0,format:"json",...t})};tool={toolControllerCreate:(e,t={})=>this.request({path:"/tool",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),toolControllerFindAll:(e,t={})=>this.request({path:"/tool",method:"GET",query:e,secure:!0,format:"json",...t}),toolControllerFindOne:(e,t={})=>this.request({path:`/tool/${e}`,method:"GET",secure:!0,format:"json",...t}),toolControllerUpdate:(e,t,i={})=>this.request({path:`/tool/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),toolControllerRemove:(e,t={})=>this.request({path:`/tool/${e}`,method:"DELETE",secure:!0,format:"json",...t})};file={fileControllerCreateDeprecated:(e,t={})=>this.request({path:"/file/upload",method:"POST",body:e,secure:!0,type:r.FormData,format:"json",...t}),fileControllerCreate:(e,t={})=>this.request({path:"/file",method:"POST",body:e,secure:!0,type:r.FormData,format:"json",...t}),fileControllerFindAll:(e={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...e}),fileControllerFindOne:(e,t={})=>this.request({path:`/file/${e}`,method:"GET",secure:!0,format:"json",...t}),fileControllerUpdate:(e,t,i={})=>this.request({path:`/file/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),fileControllerRemove:(e,t={})=>this.request({path:`/file/${e}`,method:"DELETE",secure:!0,format:"json",...t})};knowledgeBase={knowledgeBaseControllerCreate:(e,t={})=>this.request({path:"/knowledge-base",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),knowledgeBaseControllerFindAll:(e,t={})=>this.request({path:"/knowledge-base",method:"GET",query:e,secure:!0,format:"json",...t}),knowledgeBaseControllerFindOne:(e,t={})=>this.request({path:`/knowledge-base/${e}`,method:"GET",secure:!0,format:"json",...t}),knowledgeBaseControllerUpdate:(e,t,i={})=>this.request({path:`/knowledge-base/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),knowledgeBaseControllerRemove:(e,t={})=>this.request({path:`/knowledge-base/${e}`,method:"DELETE",secure:!0,format:"json",...t})};structuredOutput={structuredOutputControllerFindAll:(e,t={})=>this.request({path:"/structured-output",method:"GET",query:e,secure:!0,format:"json",...t}),structuredOutputControllerCreate:(e,t={})=>this.request({path:"/structured-output",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),structuredOutputControllerFindOne:(e,t={})=>this.request({path:`/structured-output/${e}`,method:"GET",secure:!0,format:"json",...t}),structuredOutputControllerUpdate:(e,t,i,n={})=>this.request({path:`/structured-output/${e}`,method:"PATCH",query:t,body:i,secure:!0,type:r.Json,format:"json",...n}),structuredOutputControllerRemove:(e,t={})=>this.request({path:`/structured-output/${e}`,method:"DELETE",secure:!0,format:"json",...t}),structuredOutputControllerRun:(e,t={})=>this.request({path:"/structured-output/run",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t})};testSuite={testSuiteControllerFindAllPaginated:(e,t={})=>this.request({path:"/test-suite",method:"GET",query:e,secure:!0,format:"json",...t}),testSuiteControllerCreate:(e,t={})=>this.request({path:"/test-suite",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),testSuiteControllerFindOne:(e,t={})=>this.request({path:`/test-suite/${e}`,method:"GET",secure:!0,format:"json",...t}),testSuiteControllerUpdate:(e,t,i={})=>this.request({path:`/test-suite/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),testSuiteControllerRemove:(e,t={})=>this.request({path:`/test-suite/${e}`,method:"DELETE",secure:!0,format:"json",...t}),testSuiteTestControllerFindAllPaginated:(e,t,r={})=>this.request({path:`/test-suite/${e}/test`,method:"GET",query:t,secure:!0,format:"json",...r}),testSuiteTestControllerCreate:(e,t,i={})=>this.request({path:`/test-suite/${e}/test`,method:"POST",body:t,secure:!0,type:r.Json,format:"json",...i}),testSuiteTestControllerFindOne:(e,t,r={})=>this.request({path:`/test-suite/${e}/test/${t}`,method:"GET",secure:!0,format:"json",...r}),testSuiteTestControllerUpdate:(e,t,i,n={})=>this.request({path:`/test-suite/${e}/test/${t}`,method:"PATCH",body:i,secure:!0,type:r.Json,format:"json",...n}),testSuiteTestControllerRemove:(e,t,r={})=>this.request({path:`/test-suite/${e}/test/${t}`,method:"DELETE",secure:!0,format:"json",...r}),testSuiteRunControllerFindAllPaginated:(e,t,r={})=>this.request({path:`/test-suite/${e}/run`,method:"GET",query:t,secure:!0,format:"json",...r}),testSuiteRunControllerCreate:(e,t,i={})=>this.request({path:`/test-suite/${e}/run`,method:"POST",body:t,secure:!0,type:r.Json,format:"json",...i}),testSuiteRunControllerFindOne:(e,t,r={})=>this.request({path:`/test-suite/${e}/run/${t}`,method:"GET",secure:!0,format:"json",...r}),testSuiteRunControllerUpdate:(e,t,i,n={})=>this.request({path:`/test-suite/${e}/run/${t}`,method:"PATCH",body:i,secure:!0,type:r.Json,format:"json",...n}),testSuiteRunControllerRemove:(e,t,r={})=>this.request({path:`/test-suite/${e}/run/${t}`,method:"DELETE",secure:!0,format:"json",...r})};reporting={insightControllerCreate:(e,t={})=>this.request({path:"/reporting/insight",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),insightControllerFindAll:(e,t={})=>this.request({path:"/reporting/insight",method:"GET",query:e,secure:!0,format:"json",...t}),insightControllerUpdate:(e,t,i={})=>this.request({path:`/reporting/insight/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),insightControllerFindOne:(e,t={})=>this.request({path:`/reporting/insight/${e}`,method:"GET",secure:!0,format:"json",...t}),insightControllerRemove:(e,t={})=>this.request({path:`/reporting/insight/${e}`,method:"DELETE",secure:!0,format:"json",...t}),insightControllerRun:(e,t,i={})=>this.request({path:`/reporting/insight/${e}/run`,method:"POST",body:t,secure:!0,type:r.Json,format:"json",...i}),insightControllerPreview:(e,t={})=>this.request({path:"/reporting/insight/preview",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t})};eval={evalControllerCreate:(e,t={})=>this.request({path:"/eval",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),evalControllerGetPaginated:(e,t={})=>this.request({path:"/eval",method:"GET",query:e,secure:!0,format:"json",...t}),evalControllerUpdate:(e,t,i={})=>this.request({path:`/eval/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),evalControllerRemove:(e,t={})=>this.request({path:`/eval/${e}`,method:"DELETE",secure:!0,format:"json",...t}),evalControllerGet:(e,t={})=>this.request({path:`/eval/${e}`,method:"GET",secure:!0,format:"json",...t}),evalControllerRemoveRun:(e,t={})=>this.request({path:`/eval/run/${e}`,method:"DELETE",secure:!0,format:"json",...t}),evalControllerGetRun:(e,t={})=>this.request({path:`/eval/run/${e}`,method:"GET",secure:!0,format:"json",...t}),evalControllerRun:(e,t={})=>this.request({path:"/eval/run",method:"POST",body:e,secure:!0,type:r.Json,...t}),evalControllerGetRunsPaginated:(e,t={})=>this.request({path:"/eval/run",method:"GET",query:e,secure:!0,format:"json",...t})};observability={scorecardControllerGet:(e,t={})=>this.request({path:`/observability/scorecard/${e}`,method:"GET",secure:!0,format:"json",...t}),scorecardControllerUpdate:(e,t,i={})=>this.request({path:`/observability/scorecard/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),scorecardControllerRemove:(e,t={})=>this.request({path:`/observability/scorecard/${e}`,method:"DELETE",secure:!0,format:"json",...t}),scorecardControllerGetPaginated:(e,t={})=>this.request({path:"/observability/scorecard",method:"GET",query:e,secure:!0,format:"json",...t}),scorecardControllerCreate:(e,t={})=>this.request({path:"/observability/scorecard",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t})};org={orgControllerCreate:(e,t={})=>this.request({path:"/org",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),orgControllerFindAll:(e={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...e}),orgControllerFeatureFlagEnabled:(e,t={})=>this.request({path:"/org/feature-flag",method:"GET",query:e,secure:!0,format:"json",...t}),orgControllerFindOne:(e,t={})=>this.request({path:`/org/${e}`,method:"GET",secure:!0,format:"json",...t}),orgControllerUpdate:(e,t,i={})=>this.request({path:`/org/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),orgControllerDeleteOrg:(e,t={})=>this.request({path:`/org/${e}`,method:"DELETE",secure:!0,...t}),orgControllerFindAllUsers:(e,t={})=>this.request({path:`/org/${e}/user`,method:"GET",secure:!0,format:"json",...t}),orgControllerOrgLeave:(e,t={})=>this.request({path:`/org/${e}/leave`,method:"DELETE",secure:!0,...t}),orgControllerOrgRemoveUser:(e,t,r={})=>this.request({path:`/org/${e}/member/${t}/leave`,method:"DELETE",secure:!0,...r}),orgControllerUsersInvite:(e,t,i={})=>this.request({path:`/org/${e}/invite`,method:"POST",body:t,secure:!0,type:r.Json,...i}),orgControllerUserUpdate:(e,t,i={})=>this.request({path:`/org/${e}/role`,method:"PATCH",body:t,secure:!0,type:r.Json,...i}),orgControllerOrgToken:(e,t={})=>this.request({path:`/org/${e}/auth`,method:"GET",secure:!0,format:"json",...t})};token={tokenControllerCreate:(e,t={})=>this.request({path:"/token",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),tokenControllerFindAll:(e,t={})=>this.request({path:"/token",method:"GET",query:e,secure:!0,format:"json",...t}),tokenControllerFindOne:(e,t={})=>this.request({path:`/token/${e}`,method:"GET",secure:!0,format:"json",...t}),tokenControllerUpdate:(e,t,i={})=>this.request({path:`/token/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),tokenControllerRemove:(e,t={})=>this.request({path:`/token/${e}`,method:"DELETE",secure:!0,format:"json",...t})};credential={credentialControllerCreate:(e,t={})=>this.request({path:"/credential",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),credentialControllerFindAll:(e,t={})=>this.request({path:"/credential",method:"GET",query:e,secure:!0,format:"json",...t}),credentialControllerFindOne:(e,t={})=>this.request({path:`/credential/${e}`,method:"GET",secure:!0,format:"json",...t}),credentialControllerUpdate:(e,t,i={})=>this.request({path:`/credential/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),credentialControllerRemove:(e,t={})=>this.request({path:`/credential/${e}`,method:"DELETE",secure:!0,format:"json",...t})};template={templateControllerCreate:(e,t={})=>this.request({path:"/template",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),templateControllerFindAll:(e,t={})=>this.request({path:"/template",method:"GET",query:e,secure:!0,format:"json",...t}),templateControllerFindAllPinned:(e={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...e}),templateControllerFindOne:(e,t={})=>this.request({path:`/template/${e}`,method:"GET",secure:!0,format:"json",...t}),templateControllerUpdate:(e,t,i={})=>this.request({path:`/template/${e}`,method:"PATCH",body:t,secure:!0,type:r.Json,format:"json",...i}),templateControllerRemove:(e,t={})=>this.request({path:`/template/${e}`,method:"DELETE",secure:!0,format:"json",...t})};voiceLibrary={voiceLibraryControllerVoiceGetByProvider:(e,t,r={})=>this.request({path:`/voice-library/${e}`,method:"GET",query:t,secure:!0,format:"json",...r}),voiceLibraryControllerVoiceGetAccentsByProvider:(e,t={})=>this.request({path:`/voice-library/${e}/accents`,method:"GET",secure:!0,format:"json",...t}),voiceLibraryControllerVoiceLibrarySyncByProvider:(e,t={})=>this.request({path:`/voice-library/sync/${e}`,method:"POST",secure:!0,format:"json",...t}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(e,t={})=>this.request({path:"/voice-library/sync",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t}),voiceLibraryControllerVoiceLibraryCreateSesameVoice:(e,t={})=>this.request({path:"/voice-library/create-sesame-voice",method:"POST",body:e,secure:!0,type:r.Json,...t})};provider={providerResourceControllerCreateProviderResource:(e,t,r={})=>this.request({path:`/provider/${e}/${t}`,method:"POST",secure:!0,format:"json",...r}),providerResourceControllerGetProviderResourcesPaginated:(e,t,r,i={})=>this.request({path:`/provider/${e}/${t}`,method:"GET",query:r,secure:!0,format:"json",...i}),providerResourceControllerGetProviderResource:(e,t,r,i={})=>this.request({path:`/provider/${e}/${t}/${r}`,method:"GET",secure:!0,format:"json",...i}),providerResourceControllerDeleteProviderResource:(e,t,r,i={})=>this.request({path:`/provider/${e}/${t}/${r}`,method:"DELETE",secure:!0,format:"json",...i}),providerResourceControllerUpdateProviderResource:(e,t,r,i={})=>this.request({path:`/provider/${e}/${t}/${r}`,method:"PATCH",secure:!0,format:"json",...i}),providerControllerGetWorkflows:(e,t,r={})=>this.request({path:`/${e}/workflows`,method:"GET",query:t,secure:!0,format:"json",...r}),providerControllerGetWorkflowTriggerHook:(e,t,r={})=>this.request({path:`/${e}/workflows/${t}/hooks`,method:"GET",secure:!0,format:"json",...r}),providerControllerGetLocations:(e,t={})=>this.request({path:`/${e}/locations`,method:"GET",secure:!0,format:"json",...t}),voiceProviderControllerSearchVoices:(e,t,r={})=>this.request({path:`/${e}/voices/search`,method:"GET",query:t,secure:!0,format:"json",...r}),voiceProviderControllerSearchVoice:(e,t,r={})=>this.request({path:`/${e}/voice/search`,method:"GET",query:t,secure:!0,format:"json",...r}),voiceProviderControllerAddVoices:(e,t,i={})=>this.request({path:`/${e}/voices/add`,method:"POST",body:t,secure:!0,type:r.Json,format:"json",...i}),voiceProviderControllerAddVoice:(e,t,i={})=>this.request({path:`/${e}/voice/add`,method:"POST",body:t,secure:!0,type:r.Json,format:"json",...i})};v11Labs={voiceProviderControllerCloneVoices:(e,t={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:e,secure:!0,type:r.FormData,...t})};analytics={analyticsControllerQuery:(e,t={})=>this.request({path:"/analytics",method:"POST",body:e,secure:!0,type:r.Json,format:"json",...t})}}t.Api=n},81607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=void 0;let i=new(r(88726)).Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async e=>{if(e)return{headers:{Authorization:`Bearer ${e}`}}}});t.client=i},95065:(e,t)=>{"use strict";async function r(e,t){if(!e)throw Error("Call object is not available.");if("audioSource"in t&&!1===t.audioSource){console.warn("[Vapi] setInputDevicesAsync with audioSource:false detected. This can cause Chrome 140+ issues. Using default device instead.");let{audioSource:r,...i}=t;await e.setInputDevicesAsync(i);return}await e.setInputDevicesAsync(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createSafeDailyConfig=function(e){if(!e)return{};let{alwaysIncludeMicInPermissionPrompt:t,...r}=e;return!1===t?(console.warn("[Vapi] alwaysIncludeMicInPermissionPrompt:false detected. This can cause Chrome 140+ issues. Removing the property."),r):e},t.safeSetLocalAudio=function(e,t){if(!e)throw Error("Call object is not available.");e.setLocalAudio(t)},t.safeSetInputDevicesAsync=r,t.createSafeDailyFactoryOptions=function(e){return e?!1===e.audioSource?(console.warn("[Vapi] audioSource:false detected in factory options. This can cause Chrome 140+ issues. Defaulting to true."),{...e,audioSource:!0}):e:{}}},58166:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let n=i(r(37651)),s=i(r(82361)),o=r(81607),a=r(95065);function l(e){if(null==e)return{message:"Unknown error (null or undefined)"};if(e instanceof Error){let t={message:e.message,name:e.name,stack:e.stack};return void 0!==e.code&&(t.code=e.code),void 0!==e.cause&&(t.cause=String(e.cause)),void 0!==e.reason&&(t.reason=e.reason),void 0!==e.details&&(t.details=e.details),void 0!==e.errorMsg&&(t.errorMsg=e.errorMsg),void 0!==e.error&&"string"==typeof e.error&&(t.errorDetail=e.error),t}return"string"==typeof e?{message:e}:"object"==typeof e?{message:e.message||e.error||JSON.stringify(e),...e}:{message:String(e)}}async function c(e,t){e.muted=!1,e.autoplay=!0,null!=t&&(e.srcObject=new MediaStream([t]),await e.play())}async function u(e,t){let r=document.createElement("audio");return r.dataset.participantId=t,document.body.appendChild(r),await c(r,e),r}function d(e){let t=document.querySelector(`audio[data-participant-id="${e}"]`);t?.remove()}function h(e,t,r,i){e.participant.local||t.updateParticipant(e.participant.session_id,{setSubscribedTracks:{audio:!0,video:r||i}})}class p extends s.default{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t)}removeListener(e,t){return super.removeListener(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}}class m extends p{started=!1;call=null;speakingTimeout=null;dailyCallConfig={};dailyCallObject={};hasEmittedCallEndedStatus=!1;constructor(e,t,r,i){super(),o.client.baseUrl=t??"https://api.vapi.ai",o.client.setSecurityData(e),this.dailyCallConfig=(0,a.createSafeDailyConfig)(r),this.dailyCallObject=(0,a.createSafeDailyFactoryOptions)(i)}async cleanup(){this.started=!1,this.hasEmittedCallEndedStatus=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}isMobileDevice(){if("undefined"==typeof navigator)return!1;let e=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(e.toLowerCase())}async sleep(e){return new Promise(t=>setTimeout(t,e))}async start(e,t,r,i,s,c){let p=Date.now();if(!e&&!r&&!i){let e=Error("Assistant or Squad or Workflow must be provided.");throw this.emit("error",{type:"validation-error",stage:"input-validation",error:l(e),timestamp:new Date().toISOString()}),e}if(this.started)return this.emit("call-start-progress",{stage:"validation",status:"failed",timestamp:new Date().toISOString(),metadata:{reason:"already-started"}}),null;this.emit("call-start-progress",{stage:"initialization",status:"started",timestamp:new Date().toISOString(),metadata:{hasAssistant:!!e,hasSquad:!!r,hasWorkflow:!!i}}),this.started=!0;try{this.emit("call-start-progress",{stage:"web-call-creation",status:"started",timestamp:new Date().toISOString()});let m=Date.now(),f=(await o.client.call.callControllerCreateWebCall({assistant:"string"==typeof e?void 0:e,assistantId:"string"==typeof e?e:void 0,assistantOverrides:t,squad:"string"==typeof r?void 0:r,squadId:"string"==typeof r?r:void 0,workflow:"string"==typeof i?void 0:i,workflowId:"string"==typeof i?i:void 0,workflowOverrides:s,roomDeleteOnUserLeaveEnabled:c?.roomDeleteOnUserLeaveEnabled})).data,g=Date.now()-m;this.emit("call-start-progress",{stage:"web-call-creation",status:"completed",duration:g,timestamp:new Date().toISOString(),metadata:{callId:f?.id||"unknown",videoRecordingEnabled:f?.artifactPlan?.videoRecordingEnabled??!1,voiceProvider:f?.assistant?.voice?.provider||"unknown"}}),this.call&&(this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{action:"cleanup-existing"}}),await this.cleanup());let v=f?.artifactPlan?.videoRecordingEnabled??!1,y=f?.assistant?.voice?.provider==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??v,isVideoRecordingEnabled:v,isVideoEnabled:y}});let b=Date.now();try{this.call=n.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??v,dailyConfig:this.dailyCallConfig});let e=Date.now()-b;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:e,timestamp:new Date().toISOString()})}catch(r){let e=Date.now()-b,t=l(r);throw this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"failed",duration:e,timestamp:new Date().toISOString(),metadata:{error:t.message}}),this.emit("error",{type:"daily-call-object-creation-error",stage:"daily-call-object-creation",error:t,timestamp:new Date().toISOString()}),r}this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),v&&this.call?.stopRecording(),this.cleanup().catch(console.error)}),this.call.on("error",e=>{this.emit("error",{type:"daily-error",error:l(e),timestamp:new Date().toISOString()}),v&&this.call?.stopRecording()}),this.call.on("camera-error",e=>{this.emit("camera-error",{type:"camera-error",error:l(e),timestamp:new Date().toISOString()})}),this.call.on("network-quality-change",e=>{this.emit("network-quality-change",e)}),this.call.on("network-connection",e=>{this.emit("network-connection",e)}),this.call.on("track-started",async e=>{!e||!e.participant||e.participant?.local||e.participant?.user_name!=="Vapi Speaker"||("video"===e.track.kind&&this.emit("video",e.track),"audio"===e.track.kind&&await u(e.track,e.participant.session_id),this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",e=>{e&&this.call&&h(e,this.call,v,y)}),this.call.on("participant-updated",e=>{e&&this.emit("daily-participant-updated",e.participant)}),this.call.on("participant-left",e=>{e&&d(e.participant.session_id)});let w=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:w}}),w){let e=Date.now();await this.sleep(1e3);let t=Date.now()-e;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:t,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});let _=Date.now();try{await this.call.join({url:f.webCallUrl,subscribeToTracksAutomatically:!1});let e=Date.now()-_;this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:e,timestamp:new Date().toISOString()})}catch(r){let e=Date.now()-_,t=l(r);throw this.emit("call-start-progress",{stage:"daily-call-join",status:"failed",duration:e,timestamp:new Date().toISOString(),metadata:{error:t.message}}),this.emit("error",{type:"daily-call-join-error",stage:"daily-call-join",error:t,duration:e,timestamp:new Date().toISOString()}),r}if(v){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});let e=new Date().getTime(),t=Date.now();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});let r=Date.now()-t;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:r,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{let t=(new Date().getTime()-e)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:t}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:t})})}catch(i){let e=Date.now()-t,r=l(i);this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:e,timestamp:new Date().toISOString(),metadata:{error:r.message}}),this.emit("error",{type:"video-recording-setup-error",stage:"video-recording-setup",error:r,timestamp:new Date().toISOString()})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});let S=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);let e=Date.now()-S;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:e,timestamp:new Date().toISOString()})}catch(r){let e=Date.now()-S,t=l(r);this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:e,timestamp:new Date().toISOString(),metadata:{error:t.message}}),this.emit("error",{type:"audio-observer-setup-error",stage:"audio-observer-setup",error:t,timestamp:new Date().toISOString()})}this.call.on("remote-participants-audio-level",e=>{e&&this.handleRemoteParticipantsAudioLevel(e)}),this.call.on("app-message",e=>this.onAppMessage(e)),this.call.on("nonfatal-error",e=>{e?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{a.safeSetLocalAudio(this.call,!0)})}),this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});let k=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});let e=Date.now()-k;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:e,timestamp:new Date().toISOString()})}catch(r){let e=Date.now()-k,t=l(r);this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:e,timestamp:new Date().toISOString(),metadata:{error:t.message}}),this.emit("error",{type:"audio-processing-setup-error",stage:"audio-processing-setup",error:t,timestamp:new Date().toISOString()})}let E=Date.now()-p;return this.emit("call-start-success",{totalDuration:E,callId:f?.id||"unknown",timestamp:new Date().toISOString()}),f}catch(s){let t=Date.now()-p,n=l(s);return this.emit("call-start-failed",{stage:"unknown",totalDuration:t,error:n.message,errorStack:n.stack||"No stack trace available",timestamp:new Date().toISOString(),context:{hasAssistant:!!e,hasSquad:!!r,hasWorkflow:!!i,isMobile:this.isMobileDevice()}}),this.emit("error",{type:"start-method-error",stage:"unknown",error:n,totalDuration:t,timestamp:new Date().toISOString(),context:{hasAssistant:!!e,hasSquad:!!r,hasWorkflow:!!i,isMobile:this.isMobileDevice()}}),await this.cleanup(),null}}onAppMessage(e){if(e)try{if("listening"===e.data)return this.emit("call-start");try{let t=JSON.parse(e.data);this.emit("message",t),t&&"type"in t&&"status"in t&&"status-update"===t.type&&"ended"===t.status&&(this.hasEmittedCallEndedStatus=!0)}catch(e){console.log("Error parsing message data: ",e)}}catch(e){console.error(e)}}handleRemoteParticipantsAudioLevel(e){let t=Object.values(e.participantsAudioLevel).reduce((e,t)=>e+t,0);this.emit("volume-level",Math.min(1,t/.15)),t>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}async stop(){this.started=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}send(e){this.call?.sendAppMessage(JSON.stringify(e))}setMuted(e){(0,a.safeSetLocalAudio)(this.call,!e)}isMuted(){return!!this.call&&!1===this.call.localAudio()}say(e,t,r,i){this.send({type:"say",message:e,endCallAfterSpoken:t,interruptionsEnabled:r??!1,interruptAssistantEnabled:i??!1})}end(){this.send({type:"end-call"}),this.stop()}setInputDevicesAsync(e){return(0,a.safeSetInputDevicesAsync)(this.call,e)}async increaseMicLevel(e){if(!this.call)throw Error("Call object is not available.");try{let t=await navigator.mediaDevices.getUserMedia({audio:!0}),r=new AudioContext,i=r.createMediaStreamSource(t),n=r.createGain();n.gain.value=e,i.connect(n);let s=r.createMediaStreamDestination();n.connect(s);let[o]=s.stream.getAudioTracks();await (0,a.safeSetInputDevicesAsync)(this.call,{audioSource:o})}catch(e){console.error("Error adjusting microphone level:",e)}}setOutputDeviceAsync(e){this.call?.setOutputDeviceAsync(e)}getDailyCallObject(){return this.call}startScreenSharing(e,t){this.call?.startScreenShare({displayMediaOptions:e,screenVideoSendSettings:t})}stopScreenSharing(){this.call?.stopScreenShare()}async reconnect(e){let t=Date.now();if(this.started)throw Error("Cannot reconnect while a call is already in progress. Call stop() first.");if(!e.webCallUrl)throw Error("webCallUrl is required for reconnection.");this.emit("call-start-progress",{stage:"reconnect-initialization",status:"started",timestamp:new Date().toISOString(),metadata:{callId:e.id||"unknown",hasVideoRecording:!!e?.artifactPlan?.videoRecordingEnabled,voiceProvider:e?.assistant?.voice?.provider||"unknown"}}),this.started=!0;try{this.call&&(this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"started",timestamp:new Date().toISOString()}),await this.cleanup(),this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"completed",timestamp:new Date().toISOString()}));let r=e?.artifactPlan?.videoRecordingEnabled??!1,i=e?.assistant?.voice?.provider==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??r,isVideoRecordingEnabled:r,isVideoEnabled:i}});let s=Date.now();this.call=n.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??r,dailyConfig:this.dailyCallConfig});let o=Date.now()-s;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:o,timestamp:new Date().toISOString()}),this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),r&&this.call?.stopRecording(),this.cleanup().catch(console.error)}),this.call.on("error",e=>{this.emit("error",{type:"daily-error",error:l(e),timestamp:new Date().toISOString()}),r&&this.call?.stopRecording()}),this.call.on("camera-error",e=>{this.emit("camera-error",{type:"camera-error",error:l(e),timestamp:new Date().toISOString()})}),this.call.on("network-quality-change",e=>{this.emit("network-quality-change",e)}),this.call.on("network-connection",e=>{this.emit("network-connection",e)}),this.call.on("track-started",async e=>{!e||!e.participant||e.participant?.local||e.participant?.user_name!=="Vapi Speaker"||("video"===e.track.kind&&this.emit("video",e.track),"audio"===e.track.kind&&await u(e.track,e.participant.session_id),this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",e=>{e&&this.call&&h(e,this.call,r,i)}),this.call.on("participant-updated",e=>{e&&this.emit("daily-participant-updated",e.participant)}),this.call.on("participant-left",e=>{e&&d(e.participant.session_id)}),this.call.on("remote-participants-audio-level",e=>{e&&this.handleRemoteParticipantsAudioLevel(e)}),this.call.on("app-message",e=>this.onAppMessage(e)),this.call.on("nonfatal-error",e=>{e?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{a.safeSetLocalAudio(this.call,!0)})});let c=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:c}}),c){let e=Date.now();await this.sleep(1e3);let t=Date.now()-e;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:t,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});let p=Date.now();await this.call.join({url:e.webCallUrl,subscribeToTracksAutomatically:!1});let m=Date.now()-p;if(this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:m,timestamp:new Date().toISOString()}),r){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});let e=Date.now(),t=new Date().getTime();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});let r=Date.now()-e;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:r,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{let e=(new Date().getTime()-t)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:e}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:e})})}catch(i){let t=Date.now()-e,r=l(i);this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:t,timestamp:new Date().toISOString(),metadata:{error:r.message}})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});let f=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);let e=Date.now()-f;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:e,timestamp:new Date().toISOString()})}catch(r){let e=Date.now()-f,t=l(r);this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:e,timestamp:new Date().toISOString(),metadata:{error:t.message}})}this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});let g=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});let e=Date.now()-g;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:e,timestamp:new Date().toISOString()})}catch(r){let e=Date.now()-g,t=l(r);this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:e,timestamp:new Date().toISOString(),metadata:{error:t.message}})}let v=Date.now()-t;this.emit("call-start-success",{totalDuration:v,callId:e?.id||"unknown",timestamp:new Date().toISOString()}),this.emit("call-start")}catch(n){let r=Date.now()-t,i=l(n);throw this.emit("call-start-failed",{stage:"reconnect",totalDuration:r,error:i.message,errorStack:i.stack||"No stack trace available",timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:e?.id||"unknown",hasVideoRecording:!!e?.artifactPlan?.videoRecordingEnabled,voiceProvider:e?.assistant?.voice?.provider||"unknown",isMobile:this.isMobileDevice()}}),this.emit("error",{type:"reconnect-error",error:i,totalDuration:r,timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:e?.id||"unknown",hasVideoRecording:!!e?.artifactPlan?.videoRecordingEnabled,voiceProvider:e?.assistant?.voice?.provider||"unknown",isMobile:this.isMobileDevice()}}),await this.cleanup(),n}}static async runNetworkTestsStandalone(){console.log("Starting standalone network connectivity tests...");let e={},t=null;try{console.log("Creating temporary call object for testing..."),t=n.default.createCallObject({audioSource:!0,videoSource:!0}),console.log("\n1. Testing network connectivity (TURN server)...");let r=null;try{r=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];let i=await t.testNetworkConnectivity(r);e.networkConnectivity=i,console.log("Network connectivity test result:",i)}catch(t){e.networkConnectivity={result:"error",error:t?.toString()},console.error("Network connectivity test error:",t)}finally{r&&r.stop()}console.log("\n2. Testing websocket connectivity...");try{let r=await t.testWebsocketConnectivity();e.websocketConnectivity=r,console.log("Websocket connectivity test result:",r)}catch(t){e.websocketConnectivity={result:"error",error:t?.toString()},console.error("Websocket connectivity test error:",t)}console.log("\n3. Testing call quality...");try{if("function"==typeof t.testCallQuality)try{console.log("Initializing call state with startCamera..."),await t.startCamera();let r=await t.testCallQuality();e.callQuality=r,console.log("Call quality test result:",r)}catch(t){console.error("Failed to start camera for call quality test:",t),e.callQuality={result:"error",error:t?.toString(),message:"Failed to initialize camera for call quality test. Check camera permissions."}}else e.callQuality={result:"not-available",message:"testCallQuality method not available"},console.log("Call quality test not available in current Daily.co version")}catch(t){e.callQuality={result:"error",error:t?.toString()},console.error("Call quality test error:",t)}}catch(t){console.error("Failed to create temporary call object:",t),e.error=t?.toString()}finally{if(t)try{console.log("Cleaning up temporary call object..."),await t.destroy()}catch(e){console.error("Error destroying temporary call object:",e)}}return console.log("\n=== Network Test Summary ==="),console.log("Results:",JSON.stringify(e,null,2)),e}}t.default=m},63850:(e,t,r)=>{"use strict";let i;r.r(t),r.d(t,{default:()=>oP});var n,s,o=r(10326),a=r(17577),l=r.n(a);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u=(...e)=>e.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:s,iconNode:o,...l},c)=>(0,a.createElement)("svg",{ref:c,...d,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:u("lucide",n),...l},[...o.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(s)?s:[s]])),p=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...i},n)=>(0,a.createElement)(h,{ref:n,iconNode:t,className:u(`lucide-${c(e)}`,r),...i}));return r.displayName=`${e}`,r},m=p("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),f=p("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),g=p("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),v=p("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),y=p("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),b=(0,a.createContext)({});function w(e){let t=(0,a.useRef)(null);return null===t.current&&(t.current=e()),t.current}let _=(0,a.createContext)(null),S=(0,a.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class k extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function E({children:e,isPresent:t}){let r=(0,a.useId)(),i=(0,a.useRef)(null),n=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:s}=(0,a.useContext)(S);return(0,a.useInsertionEffect)(()=>{let{width:e,height:o,top:a,left:l}=n.current;if(t||!i.current||!e||!o)return;i.current.dataset.motionPopId=r;let c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),(0,o.jsx)(k,{isPresent:t,childRef:i,sizeRef:n,children:a.cloneElement(e,{ref:i})})}let x=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:n,presenceAffectsLayout:s,mode:l})=>{let c=w(T),u=(0,a.useId)(),d=(0,a.useCallback)(e=>{for(let t of(c.set(e,!0),c.values()))if(!t)return;i&&i()},[c,i]),h=(0,a.useMemo)(()=>({id:u,initial:t,isPresent:r,custom:n,onExitComplete:d,register:e=>(c.set(e,!1),()=>c.delete(e))}),s?[Math.random(),d]:[r,d]);return(0,a.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[r]),a.useEffect(()=>{r||c.size||!i||i()},[r]),"popLayout"===l&&(e=(0,o.jsx)(E,{isPresent:r,children:e})),(0,o.jsx)(_.Provider,{value:h,children:e})};function T(){return new Map}function C(e=!0){let t=(0,a.useContext)(_);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:i,register:n}=t,s=(0,a.useId)();(0,a.useEffect)(()=>{e&&n(s)},[e]);let o=(0,a.useCallback)(()=>e&&i&&i(s),[s,i,e]);return!r&&i?[!1,o]:[!0]}let A=e=>e.key||"";function P(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let M="undefined"!=typeof window,j=M?a.useLayoutEffect:a.useEffect,O=({children:e,custom:t,initial:r=!0,onExitComplete:i,presenceAffectsLayout:n=!0,mode:s="sync",propagate:l=!1})=>{let[c,u]=C(l),d=(0,a.useMemo)(()=>P(e),[e]),h=l&&!c?[]:d.map(A),p=(0,a.useRef)(!0),m=(0,a.useRef)(d),f=w(()=>new Map),[g,v]=(0,a.useState)(d),[y,_]=(0,a.useState)(d);j(()=>{p.current=!1,m.current=d;for(let e=0;e<y.length;e++){let t=A(y[e]);h.includes(t)?f.delete(t):!0!==f.get(t)&&f.set(t,!1)}},[y,h.length,h.join("-")]);let S=[];if(d!==g){let e=[...d];for(let t=0;t<y.length;t++){let r=y[t],i=A(r);h.includes(i)||(e.splice(t,0,r),S.push(r))}"wait"===s&&S.length&&(e=S),_(P(e)),v(d);return}let{forceRender:k}=(0,a.useContext)(b);return(0,o.jsx)(o.Fragment,{children:y.map(e=>{let a=A(e),g=(!l||!!c)&&(d===y||h.includes(a));return(0,o.jsx)(x,{isPresent:g,initial:(!p.current||!!r)&&void 0,custom:g?void 0:t,presenceAffectsLayout:n,mode:s,onExitComplete:g?void 0:()=>{if(!f.has(a))return;f.set(a,!0);let e=!0;f.forEach(t=>{t||(e=!1)}),e&&(null==k||k(),_(m.current),l&&(null==u||u()),i&&i())},children:e},a)})})};function D(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}let I=e=>Array.isArray(e);function L(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}function N(e){return"string"==typeof e||Array.isArray(e)}function R(e){let t=[{},{}];return null==e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function F(e,t,r,i){if("function"==typeof t){let[n,s]=R(i);t=t(void 0!==r?r:e.custom,n,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[n,s]=R(i);t=t(void 0!==r?r:e.custom,n,s)}return t}function V(e,t,r){let i=e.getProps();return F(i,t,void 0!==r?r:i.custom,e)}let q=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],U=["initial",...q];function B(e){let t;return()=>(void 0===t&&(t=e()),t)}let $=B(()=>void 0!==window.ScrollTimeline);class z{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){let r=this.animations.map(r=>$()&&r.attachTimeline?r.attachTimeline(e):"function"==typeof t?t(r):void 0);return()=>{r.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class J extends z{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function G(e,t){return e?e[t]||e.default||e:void 0}function W(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function Y(e){return"function"==typeof e}function H(e,t){e.timeline=t,e.onfinish=null}let K=e=>Array.isArray(e)&&"number"==typeof e[0],Q={linearEasing:void 0},X=function(e,t){let r=B(e);return()=>{var e;return null!==(e=Q[t])&&void 0!==e?e:r()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),Z=(e,t,r)=>{let i=t-e;return 0===i?1:(r-e)/i},ee=(e,t,r=10)=>{let i="",n=Math.max(Math.round(t/r),2);for(let t=0;t<n;t++)i+=e(Z(0,n-1,t))+", ";return`linear(${i.substring(0,i.length-2)})`},et=([e,t,r,i])=>`cubic-bezier(${e}, ${t}, ${r}, ${i})`,er={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:et([0,.65,.55,1]),circOut:et([.55,0,1,.45]),backIn:et([.31,.01,.66,-.59]),backOut:et([.33,1.53,.69,.99])},ei={x:!1,y:!1};function en(e,t){let r=function(e,t,r){if(e instanceof Element)return[e];if("string"==typeof e){let t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),i=new AbortController;return[r,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function es(e){return t=>{"touch"===t.pointerType||ei.x||ei.y||e(t)}}let eo=(e,t)=>!!t&&(e===t||eo(e,t.parentElement)),ea=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,el=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),ec=new WeakSet;function eu(e){return t=>{"Enter"===t.key&&e(t)}}function ed(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}let eh=(e,t)=>{let r=e.currentTarget;if(!r)return;let i=eu(()=>{if(ec.has(r))return;ed(r,"down");let e=eu(()=>{ed(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>ed(r,"cancel"),t)});r.addEventListener("keydown",i,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),t)};function ep(e){return ea(e)&&!(ei.x||ei.y)}let em=e=>1e3*e,ef=e=>e/1e3,eg=e=>e,ev=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ey=new Set(ev),eb=new Set(["width","height","top","left","right","bottom",...ev]),ew=e=>!!(e&&"object"==typeof e&&e.mix&&e.toValue),e_=e=>I(e)?e[e.length-1]||0:e,eS={skipAnimations:!1,useManualTiming:!1},ek=["read","resolveKeyframes","update","preRender","render","postRender"];function eE(e,t){let r=!1,i=!0,n={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=ek.reduce((e,t)=>(e[t]=function(e){let t=new Set,r=new Set,i=!1,n=!1,s=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1};function a(t){s.has(t)&&(l.schedule(t),e()),t(o)}let l={schedule:(e,n=!1,o=!1)=>{let a=o&&i?t:r;return n&&s.add(e),a.has(e)||a.add(e),e},cancel:e=>{r.delete(e),s.delete(e)},process:e=>{if(o=e,i){n=!0;return}i=!0,[t,r]=[r,t],t.forEach(a),t.clear(),i=!1,n&&(n=!1,l.process(e))}};return l}(s),e),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,p=()=>{let s=eS.useManualTiming?n.timestamp:performance.now();r=!1,n.delta=i?1e3/60:Math.max(Math.min(s-n.timestamp,40),1),n.timestamp=s,n.isProcessing=!0,a.process(n),l.process(n),c.process(n),u.process(n),d.process(n),h.process(n),n.isProcessing=!1,r&&t&&(i=!1,e(p))},m=()=>{r=!0,i=!0,n.isProcessing||e(p)};return{schedule:ek.reduce((e,t)=>{let i=o[t];return e[t]=(e,t=!1,n=!1)=>(r||m(),i.schedule(e,t,n)),e},{}),cancel:e=>{for(let t=0;t<ek.length;t++)o[ek[t]].cancel(e)},state:n,steps:o}}let{schedule:ex,cancel:eT,state:eC,steps:eA}=eE("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:eg,!0);function eP(){i=void 0}let eM={now:()=>(void 0===i&&eM.set(eC.isProcessing||eS.useManualTiming?eC.timestamp:performance.now()),i),set:e=>{i=e,queueMicrotask(eP)}};function ej(e,t){-1===e.indexOf(t)&&e.push(t)}function eO(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class eD{constructor(){this.subscriptions=[]}add(e){return ej(this.subscriptions,e),()=>eO(this.subscriptions,e)}notify(e,t,r){let i=this.subscriptions.length;if(i){if(1===i)this.subscriptions[0](e,t,r);else for(let n=0;n<i;n++){let i=this.subscriptions[n];i&&i(e,t,r)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let eI=e=>!isNaN(parseFloat(e)),eL={current:void 0};class eN{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{let r=eM.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=eM.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=eI(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new eD);let r=this.events[e].add(t);return"change"===e?()=>{r(),ex.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return eL.current&&eL.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=eM.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function eR(e,t){return new eN(e,t)}let eF=e=>!!(e&&e.getVelocity);function eV(e,t){let r=e.getValue("willChange");if(eF(r)&&r.add)return r.add(t)}let eq=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eU="data-"+eq("framerAppearId"),eB={current:!1},e$=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function ez(e,t,r,i){if(e===t&&r===i)return eg;let n=t=>(function(e,t,r,i,n){let s,o;let a=0;do(s=e$(o=t+(r-t)/2,i,n)-e)>0?r=o:t=o;while(Math.abs(s)>1e-7&&++a<12);return o})(t,0,1,e,r);return e=>0===e||1===e?e:e$(n(e),t,i)}let eJ=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,eG=e=>t=>1-e(1-t),eW=ez(.33,1.53,.69,.99),eY=eG(eW),eH=eJ(eY),eK=e=>(e*=2)<1?.5*eY(e):.5*(2-Math.pow(2,-10*(e-1))),eQ=e=>1-Math.sin(Math.acos(e)),eX=eG(eQ),eZ=eJ(eQ),e0=e=>/^0[^.\s]+$/u.test(e),e1=(e,t,r)=>r>t?t:r<e?e:r,e2={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},e5={...e2,transform:e=>e1(0,1,e)},e3={...e2,default:1},e4=e=>Math.round(1e5*e)/1e5,e9=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,e6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,e8=(e,t)=>r=>!!("string"==typeof r&&e6.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),e7=(e,t,r)=>i=>{if("string"!=typeof i)return i;let[n,s,o,a]=i.match(e9);return{[e]:parseFloat(n),[t]:parseFloat(s),[r]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},te=e=>e1(0,255,e),tt={...e2,transform:e=>Math.round(te(e))},tr={test:e8("rgb","red"),parse:e7("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:i=1})=>"rgba("+tt.transform(e)+", "+tt.transform(t)+", "+tt.transform(r)+", "+e4(e5.transform(i))+")"},ti={test:e8("#"),parse:function(e){let t="",r="",i="",n="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),i=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),i=e.substring(3,4),n=e.substring(4,5),t+=t,r+=r,i+=i,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:n?parseInt(n,16)/255:1}},transform:tr.transform},tn=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),ts=tn("deg"),to=tn("%"),ta=tn("px"),tl=tn("vh"),tc=tn("vw"),tu={...to,parse:e=>to.parse(e)/100,transform:e=>to.transform(100*e)},td={test:e8("hsl","hue"),parse:e7("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:i=1})=>"hsla("+Math.round(e)+", "+to.transform(e4(t))+", "+to.transform(e4(r))+", "+e4(e5.transform(i))+")"},th={test:e=>tr.test(e)||ti.test(e)||td.test(e),parse:e=>tr.test(e)?tr.parse(e):td.test(e)?td.parse(e):ti.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?tr.transform(e):td.transform(e)},tp=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,tm="number",tf="color",tg=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tv(e){let t=e.toString(),r=[],i={color:[],number:[],var:[]},n=[],s=0,o=t.replace(tg,e=>(th.test(e)?(i.color.push(s),n.push(tf),r.push(th.parse(e))):e.startsWith("var(")?(i.var.push(s),n.push("var"),r.push(e)):(i.number.push(s),n.push(tm),r.push(parseFloat(e))),++s,"${}")).split("${}");return{values:r,split:o,indexes:i,types:n}}function ty(e){return tv(e).values}function tb(e){let{split:t,types:r}=tv(e),i=t.length;return e=>{let n="";for(let s=0;s<i;s++)if(n+=t[s],void 0!==e[s]){let t=r[s];t===tm?n+=e4(e[s]):t===tf?n+=th.transform(e[s]):n+=e[s]}return n}}let tw=e=>"number"==typeof e?0:e,t_={test:function(e){var t,r;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(e9))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(tp))||void 0===r?void 0:r.length)||0)>0},parse:ty,createTransformer:tb,getAnimatableNone:function(e){let t=ty(e);return tb(e)(t.map(tw))}},tS=new Set(["brightness","contrast","saturate","opacity"]);function tk(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[i]=r.match(e9)||[];if(!i)return e;let n=r.replace(i,""),s=tS.has(t)?1:0;return i!==r&&(s*=100),t+"("+s+n+")"}let tE=/\b([a-z-]*)\(.*?\)/gu,tx={...t_,getAnimatableNone:e=>{let t=e.match(tE);return t?t.map(tk).join(" "):e}},tT={...e2,transform:Math.round},tC={borderWidth:ta,borderTopWidth:ta,borderRightWidth:ta,borderBottomWidth:ta,borderLeftWidth:ta,borderRadius:ta,radius:ta,borderTopLeftRadius:ta,borderTopRightRadius:ta,borderBottomRightRadius:ta,borderBottomLeftRadius:ta,width:ta,maxWidth:ta,height:ta,maxHeight:ta,top:ta,right:ta,bottom:ta,left:ta,padding:ta,paddingTop:ta,paddingRight:ta,paddingBottom:ta,paddingLeft:ta,margin:ta,marginTop:ta,marginRight:ta,marginBottom:ta,marginLeft:ta,backgroundPositionX:ta,backgroundPositionY:ta,rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:e3,scaleX:e3,scaleY:e3,scaleZ:e3,skew:ts,skewX:ts,skewY:ts,distance:ta,translateX:ta,translateY:ta,translateZ:ta,x:ta,y:ta,z:ta,perspective:ta,transformPerspective:ta,opacity:e5,originX:tu,originY:tu,originZ:ta,zIndex:tT,size:ta,fillOpacity:e5,strokeOpacity:e5,numOctaves:tT},tA={...tC,color:th,backgroundColor:th,outlineColor:th,fill:th,stroke:th,borderColor:th,borderTopColor:th,borderRightColor:th,borderBottomColor:th,borderLeftColor:th,filter:tx,WebkitFilter:tx},tP=e=>tA[e];function tM(e,t){let r=tP(e);return r!==tx&&(r=t_),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let tj=new Set(["auto","none","0"]),tO=e=>e===e2||e===ta,tD=(e,t)=>parseFloat(e.split(", ")[t]),tI=(e,t)=>(r,{transform:i})=>{if("none"===i||!i)return 0;let n=i.match(/^matrix3d\((.+)\)$/u);if(n)return tD(n[1],t);{let t=i.match(/^matrix\((.+)\)$/u);return t?tD(t[1],e):0}},tL=new Set(["x","y","z"]),tN=ev.filter(e=>!tL.has(e)),tR={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:tI(4,13),y:tI(5,14)};tR.translateX=tR.x,tR.translateY=tR.y;let tF=new Set,tV=!1,tq=!1;function tU(){if(tq){let e=Array.from(tF).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t=function(e){let t=[];return tN.forEach(r=>{let i=e.getValue(r);void 0!==i&&(t.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),t}(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{var i;null===(i=e.getValue(t))||void 0===i||i.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}tq=!1,tV=!1,tF.forEach(e=>e.complete()),tF.clear()}function tB(){tF.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(tq=!0)})}class t${constructor(e,t,r,i,n,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=n,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(tF.add(this),tV||(tV=!0,ex.read(tB),ex.resolveKeyframes(tU))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let n=0;n<e.length;n++)if(null===e[n]){if(0===n){let n=null==i?void 0:i.get(),s=e[e.length-1];if(void 0!==n)e[0]=n;else if(r&&t){let i=r.readValue(t,s);null!=i&&(e[0]=i)}void 0===e[0]&&(e[0]=s),i&&void 0===n&&i.set(e[0])}else e[n]=e[n-1]}}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),tF.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,tF.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let tz=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),tJ=e=>t=>"string"==typeof t&&t.startsWith(e),tG=tJ("--"),tW=tJ("var(--"),tY=e=>!!tW(e)&&tH.test(e.split("/*")[0].trim()),tH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,tQ=e=>t=>t.test(e),tX=[e2,ta,to,ts,tc,tl,{test:e=>"auto"===e,parse:e=>e}],tZ=e=>tX.find(tQ(e));class t0 extends t${constructor(e,t,r,i,n){super(e,t,r,i,n,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let i=e[r];if("string"==typeof i&&tY(i=i.trim())){let n=function e(t,r,i=1){eg(i<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);let[n,s]=function(e){let t=tK.exec(e);if(!t)return[,];let[,r,i,n]=t;return[`--${null!=r?r:i}`,n]}(t);if(!n)return;let o=window.getComputedStyle(r).getPropertyValue(n);if(o){let e=o.trim();return tz(e)?parseFloat(e):e}return tY(s)?e(s,r,i+1):s}(i,t.current);void 0!==n&&(e[r]=n),r===e.length-1&&(this.finalKeyframe=i)}}if(this.resolveNoneKeyframes(),!eb.has(r)||2!==e.length)return;let[i,n]=e,s=tZ(i),o=tZ(n);if(s!==o){if(tO(s)&&tO(o))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else this.needsMeasurement=!0}}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++){var i;("number"==typeof(i=e[t])?0===i:null===i||"none"===i||"0"===i||e0(i))&&r.push(t)}r.length&&function(e,t,r){let i,n=0;for(;n<e.length&&!i;){let t=e[n];"string"==typeof t&&!tj.has(t)&&tv(t).values.length&&(i=e[n]),n++}if(i&&r)for(let n of t)e[n]=tM(r,i)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tR[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let i=t[t.length-1];void 0!==i&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;let{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;let n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);let s=i.length-1,o=i[s];i[s]=tR[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(([e,r])=>{t.getValue(e).set(r)}),this.resolveNoneKeyframes()}}let t1=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(t_.test(e)||"0"===e)&&!e.startsWith("url(")),t2=e=>null!==e;function t5(e,{repeat:t,repeatType:r="loop"},i){let n=e.filter(t2),s=t&&"loop"!==r&&t%2==1?0:n.length-1;return s&&void 0!==i?i:n[s]}class t3{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:n=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=eM.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:n,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(tB(),tU()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=eM.now(),this.hasAttemptedResolve=!0;let{name:r,type:i,velocity:n,delay:s,onComplete:o,onUpdate:a,isGenerator:l}=this.options;if(!l&&!function(e,t,r,i){let n=e[0];if(null===n)return!1;if("display"===t||"visibility"===t)return!0;let s=e[e.length-1],o=t1(n,t),a=t1(s,t);return eg(o===a,`You are trying to animate ${t} from "${n}" to "${s}". ${n} is not an animatable value - to enable this animation set ${n} to a value animatable to ${s} via the \`style\` property.`),!!o&&!!a&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||Y(r))&&i)}(e,r,i,n)){if(eB.current||!s){a&&a(t5(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}this.options.duration=0}let c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}let t4=(e,t,r)=>e+(t-e)*r;function t9(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function t6(e,t){return r=>r>0?t:e}let t8=(e,t,r)=>{let i=e*e,n=r*(t*t-i)+i;return n<0?0:Math.sqrt(n)},t7=[ti,tr,td],re=e=>t7.find(t=>t.test(e));function rt(e){let t=re(e);if(eg(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`),!t)return!1;let r=t.parse(e);return t===td&&(r=function({hue:e,saturation:t,lightness:r,alpha:i}){e/=360,r/=100;let n=0,s=0,o=0;if(t/=100){let i=r<.5?r*(1+t):r+t-r*t,a=2*r-i;n=t9(a,i,e+1/3),s=t9(a,i,e),o=t9(a,i,e-1/3)}else n=s=o=r;return{red:Math.round(255*n),green:Math.round(255*s),blue:Math.round(255*o),alpha:i}}(r)),r}let rr=(e,t)=>{let r=rt(e),i=rt(t);if(!r||!i)return t6(e,t);let n={...r};return e=>(n.red=t8(r.red,i.red,e),n.green=t8(r.green,i.green,e),n.blue=t8(r.blue,i.blue,e),n.alpha=t4(r.alpha,i.alpha,e),tr.transform(n))},ri=(e,t)=>r=>t(e(r)),rn=(...e)=>e.reduce(ri),rs=new Set(["none","hidden"]);function ro(e,t){return r=>t4(e,t,r)}function ra(e){return"number"==typeof e?ro:"string"==typeof e?tY(e)?t6:th.test(e)?rr:ru:Array.isArray(e)?rl:"object"==typeof e?th.test(e)?rr:rc:t6}function rl(e,t){let r=[...e],i=r.length,n=e.map((e,r)=>ra(e)(e,t[r]));return e=>{for(let t=0;t<i;t++)r[t]=n[t](e);return r}}function rc(e,t){let r={...e,...t},i={};for(let n in r)void 0!==e[n]&&void 0!==t[n]&&(i[n]=ra(e[n])(e[n],t[n]));return e=>{for(let t in i)r[t]=i[t](e);return r}}let ru=(e,t)=>{let r=t_.createTransformer(t),i=tv(e),n=tv(t);return i.indexes.var.length===n.indexes.var.length&&i.indexes.color.length===n.indexes.color.length&&i.indexes.number.length>=n.indexes.number.length?rs.has(e)&&!n.values.length||rs.has(t)&&!i.values.length?function(e,t){return rs.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):rn(rl(function(e,t){var r;let i=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){let o=t.types[s],a=e.indexes[o][n[o]],l=null!==(r=e.values[a])&&void 0!==r?r:0;i[s]=l,n[o]++}return i}(i,n),n.values),r):(eg(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),t6(e,t))};function rd(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?t4(e,t,r):ra(e)(e,t)}function rh(e,t,r){var i,n;let s=Math.max(t-5,0);return i=r-e(s),(n=t-s)?1e3/n*i:0}let rp={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function rm(e,t){return e*Math.sqrt(1-t*t)}let rf=["duration","bounce"],rg=["stiffness","damping","mass"];function rv(e,t){return t.some(t=>void 0!==e[t])}function ry(e=rp.visualDuration,t=rp.bounce){let r;let i="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:n,restDelta:s}=i,o=i.keyframes[0],a=i.keyframes[i.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:m}=function(e){let t={velocity:rp.velocity,stiffness:rp.stiffness,damping:rp.damping,mass:rp.mass,isResolvedFromDuration:!1,...e};if(!rv(e,rg)&&rv(e,rf)){if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),i=r*r,n=2*e1(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:rp.mass,stiffness:i,damping:n}}else{let r=function({duration:e=rp.duration,bounce:t=rp.bounce,velocity:r=rp.velocity,mass:i=rp.mass}){let n,s;eg(e<=em(rp.maxDuration),"Spring duration must be 10 seconds or less");let o=1-t;o=e1(rp.minDamping,rp.maxDamping,o),e=e1(rp.minDuration,rp.maxDuration,ef(e)),o<1?(n=t=>{let i=t*o,n=i*e;return .001-(i-r)/rm(t,o)*Math.exp(-n)},s=t=>{let i=t*o*e,s=Math.pow(o,2)*Math.pow(t,2)*e,a=rm(Math.pow(t,2),o);return(i*r+r-s)*Math.exp(-i)*(-n(t)+.001>0?-1:1)/a}):(n=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),s=t=>e*e*(r-t)*Math.exp(-t*e));let a=function(e,t,r){let i=r;for(let r=1;r<12;r++)i-=e(i)/t(i);return i}(n,s,5/e);if(e=em(e),isNaN(a))return{stiffness:rp.stiffness,damping:rp.damping,duration:e};{let t=Math.pow(a,2)*i;return{stiffness:t,damping:2*o*Math.sqrt(i*t),duration:e}}}(e);(t={...t,...r,mass:rp.mass}).isResolvedFromDuration=!0}}return t}({...i,velocity:-ef(i.velocity||0)}),f=p||0,g=u/(2*Math.sqrt(c*d)),v=a-o,y=ef(Math.sqrt(c/d)),b=5>Math.abs(v);if(n||(n=b?rp.restSpeed.granular:rp.restSpeed.default),s||(s=b?rp.restDelta.granular:rp.restDelta.default),g<1){let e=rm(y,g);r=t=>a-Math.exp(-g*y*t)*((f+g*y*v)/e*Math.sin(e*t)+v*Math.cos(e*t))}else if(1===g)r=e=>a-Math.exp(-y*e)*(v+(f+y*v)*e);else{let e=y*Math.sqrt(g*g-1);r=t=>{let r=Math.exp(-g*y*t),i=Math.min(e*t,300);return a-r*((f+g*y*v)*Math.sinh(i)+e*v*Math.cosh(i))/e}}let w={calculatedDuration:m&&h||null,next:e=>{let t=r(e);if(m)l.done=e>=h;else{let i=0;g<1&&(i=0===e?em(f):rh(r,e,t));let o=Math.abs(i)<=n,c=Math.abs(a-t)<=s;l.done=o&&c}return l.value=l.done?a:t,l},toString:()=>{let e=Math.min(W(w),2e4),t=ee(t=>w.next(e*t).value,e,30);return e+"ms "+t}};return w}function rb({keyframes:e,velocity:t=0,power:r=.8,timeConstant:i=325,bounceDamping:n=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){let d,h;let p=e[0],m={done:!1,value:p},f=e=>void 0!==a&&e<a||void 0!==l&&e>l,g=e=>void 0===a?l:void 0===l?a:Math.abs(a-e)<Math.abs(l-e)?a:l,v=r*t,y=p+v,b=void 0===o?y:o(y);b!==y&&(v=b-p);let w=e=>-v*Math.exp(-e/i),_=e=>b+w(e),S=e=>{let t=w(e),r=_(e);m.done=Math.abs(t)<=c,m.value=m.done?b:r},k=e=>{f(m.value)&&(d=e,h=ry({keyframes:[m.value,g(m.value)],velocity:rh(_,e,m.value),damping:n,stiffness:s,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return(h||void 0!==d||(t=!0,S(e),k(e)),void 0!==d&&e>=d)?h.next(e-d):(t||S(e),m)}}}let rw=ez(.42,0,1,1),r_=ez(0,0,.58,1),rS=ez(.42,0,.58,1),rk=e=>Array.isArray(e)&&"number"!=typeof e[0],rE={linear:eg,easeIn:rw,easeInOut:rS,easeOut:r_,circIn:eQ,circInOut:eZ,circOut:eX,backIn:eY,backInOut:eH,backOut:eW,anticipate:eK},rx=e=>{if(K(e)){eg(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,r,i,n]=e;return ez(t,r,i,n)}return"string"==typeof e?(eg(void 0!==rE[e],`Invalid easing type '${e}'`),rE[e]):e};function rT({duration:e=300,keyframes:t,times:r,ease:i="easeInOut"}){let n=rk(i)?i.map(rx):rx(i),s={done:!1,value:t[0]},o=function(e,t,{clamp:r=!0,ease:i,mixer:n}={}){let s=e.length;if(eg(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];let o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let a=function(e,t,r){let i=[],n=r||rd,s=e.length-1;for(let r=0;r<s;r++){let s=n(e[r],e[r+1]);t&&(s=rn(Array.isArray(t)?t[r]||eg:t,s)),i.push(s)}return i}(t,i,n),l=a.length,c=r=>{if(o&&r<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(r<e[i+1]);i++);let n=Z(e[i],e[i+1],r);return a[i](n)};return r?t=>c(e1(e[0],e[s-1],t)):c}((r&&r.length===t.length?r:function(e){let t=[0];return function(e,t){let r=e[e.length-1];for(let i=1;i<=t;i++){let n=Z(0,t,i);e.push(t4(r,1,n))}}(t,e.length-1),t}(t)).map(t=>t*e),t,{ease:Array.isArray(n)?n:t.map(()=>n||rS).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(s.value=o(t),s.done=t>=e,s)}}let rC=e=>{let t=({timestamp:t})=>e(t);return{start:()=>ex.update(t,!0),stop:()=>eT(t),now:()=>eC.isProcessing?eC.timestamp:eM.now()}},rA={decay:rb,inertia:rb,tween:rT,keyframes:rT,spring:ry},rP=e=>e/100;class rM extends t3{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();let{onStop:e}=this.options;e&&e()};let{name:t,motionValue:r,element:i,keyframes:n}=this.options,s=(null==i?void 0:i.KeyframeResolver)||t$;this.resolver=new s(n,(e,t)=>this.onKeyframesResolved(e,t),t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){let t,r;let{type:i="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:o,velocity:a=0}=this.options,l=Y(i)?i:rA[i]||rT;l!==rT&&"number"!=typeof e[0]&&(t=rn(rP,rd(e[0],e[1])),e=[0,100]);let c=l({...this.options,keyframes:e});"mirror"===o&&(r=l({...this.options,keyframes:[...e].reverse(),velocity:-a})),null===c.calculatedDuration&&(c.calculatedDuration=W(c));let{calculatedDuration:u}=c,d=u+s;return{generator:c,mirroredGenerator:r,mapPercentToKeyframes:t,calculatedDuration:u,resolvedDuration:d,totalDuration:d*(n+1)-s}}onPostResolved(){let{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){let{resolved:r}=this;if(!r){let{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}let{finalKeyframe:i,generator:n,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:a,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=r;if(null===this.startTime)return n.next(0);let{delay:d,repeat:h,repeatType:p,repeatDelay:m,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;let g=this.currentTime-d*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let y=this.currentTime,b=n;if(h){let e=Math.min(this.currentTime,c)/u,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,h+1))%2&&("reverse"===p?(r=1-r,m&&(r-=m/u)):"mirror"===p&&(b=s)),y=e1(0,1,r)*u}let w=v?{done:!1,value:a[0]}:b.next(y);o&&(w.value=o(w.value));let{done:_}=w;v||null===l||(_=this.speed>=0?this.currentTime>=c:this.currentTime<=0);let S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&_);return S&&void 0!==i&&(w.value=t5(a,this.options,i)),f&&f(w.value),S&&this.finish(),w}get duration(){let{resolved:e}=this;return e?ef(e.calculatedDuration):0}get time(){return ef(this.currentTime)}set time(e){e=em(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ef(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:e=rC,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();let i=this.driver.now();null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=i):this.startTime=null!=r?r:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}let rj=new Set(["opacity","clipPath","filter","transform"]),rO=B(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rD={anticipate:eK,backInOut:eH,circInOut:eZ};class rI extends t3{constructor(e){super(e);let{name:t,motionValue:r,element:i,keyframes:n}=this.options;this.resolver=new t0(n,(e,t)=>this.onKeyframesResolved(e,t),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){var r;let{duration:i=300,times:n,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if("string"==typeof s&&X()&&s in rD&&(s=rD[s]),Y((r=this.options).type)||"spring"===r.type||!function e(t){return!!("function"==typeof t&&X()||!t||"string"==typeof t&&(t in er||X())||K(t)||Array.isArray(t)&&t.every(e))}(r.ease)){let{onComplete:t,onUpdate:r,motionValue:a,element:l,...c}=this.options,u=function(e,t){let r=new rM({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0}),i={done:!1,value:e[0]},n=[],s=0;for(;!i.done&&s<2e4;)n.push((i=r.sample(s)).value),s+=10;return{times:void 0,keyframes:n,duration:s-10,ease:"linear"}}(e,c);1===(e=u.keyframes).length&&(e[1]=e[0]),i=u.duration,n=u.times,s=u.ease,o="keyframes"}let u=function(e,t,r,{delay:i=0,duration:n=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){let c={[t]:r};l&&(c.offset=l);let u=function e(t,r){if(t)return"function"==typeof t&&X()?ee(t,r):K(t)?et(t):Array.isArray(t)?t.map(t=>e(t,r)||er.easeOut):er[t]}(a,n);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:i,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"})}(a.owner.current,l,e,{...this.options,duration:i,times:n,ease:s});return u.startTime=null!=c?c:this.calcStartTime(),this.pendingTimeline?(H(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{let{onComplete:r}=this.options;a.set(t5(e,this.options,t)),r&&r(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:n,type:o,ease:s,keyframes:e}}get duration(){let{resolved:e}=this;if(!e)return 0;let{duration:t}=e;return ef(t)}get time(){let{resolved:e}=this;if(!e)return 0;let{animation:t}=e;return ef(t.currentTime||0)}set time(e){let{resolved:t}=this;if(!t)return;let{animation:r}=t;r.currentTime=em(e)}get speed(){let{resolved:e}=this;if(!e)return 1;let{animation:t}=e;return t.playbackRate}set speed(e){let{resolved:t}=this;if(!t)return;let{animation:r}=t;r.playbackRate=e}get state(){let{resolved:e}=this;if(!e)return"idle";let{animation:t}=e;return t.playState}get startTime(){let{resolved:e}=this;if(!e)return null;let{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){let{resolved:t}=this;if(!t)return eg;let{animation:r}=t;H(r,e)}else this.pendingTimeline=e;return eg}play(){if(this.isStopped)return;let{resolved:e}=this;if(!e)return;let{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){let{resolved:e}=this;if(!e)return;let{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:e}=this;if(!e)return;let{animation:t,keyframes:r,duration:i,type:n,ease:s,times:o}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){let{motionValue:e,onUpdate:t,onComplete:a,element:l,...c}=this.options,u=new rM({...c,keyframes:r,duration:i,type:n,ease:s,times:o,isGenerator:!0}),d=em(this.time);e.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10)}let{onStop:a}=this.options;a&&a(),this.cancel()}complete(){let{resolved:e}=this;e&&e.animation.finish()}cancel(){let{resolved:e}=this;e&&e.animation.cancel()}static supports(e){let{motionValue:t,name:r,repeatDelay:i,repeatType:n,damping:s,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;let{onUpdate:a,transformTemplate:l}=t.owner.getProps();return rO()&&r&&rj.has(r)&&!a&&!l&&!i&&"mirror"!==n&&0!==s&&"inertia"!==o}}let rL={type:"spring",stiffness:500,damping:25,restSpeed:10},rN=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),rR={type:"keyframes",duration:.8},rF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rV=(e,{keyframes:t})=>t.length>2?rR:ey.has(e)?e.startsWith("scale")?rN(t[1]):rL:rF,rq=(e,t,r,i={},n,s)=>o=>{let a=G(i,e)||{},l=a.delay||i.delay||0,{elapsed:c=0}=i;c-=em(l);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:n};!function({when:e,delay:t,delayChildren:r,staggerChildren:i,staggerDirection:n,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}(a)&&(u={...u,...rV(e,u)}),u.duration&&(u.duration=em(u.duration)),u.repeatDelay&&(u.repeatDelay=em(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if(!1!==u.type&&(0!==u.duration||u.repeatDelay)||(u.duration=0,0!==u.delay||(d=!0)),(eB.current||eS.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),d&&!s&&void 0!==t.get()){let e=t5(u.keyframes,a);if(void 0!==e)return ex.update(()=>{u.onUpdate(e),u.onComplete()}),new J([])}return!s&&rI.supports(u)?new rI(u):new rM(u)};function rU(e,t,{delay:r=0,transitionOverride:i,type:n}={}){var s;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;i&&(o=i);let c=[],u=n&&e.animationState&&e.animationState.getState()[n];for(let t in l){let i=e.getValue(t,null!==(s=e.latestValues[t])&&void 0!==s?s:null),n=l[t];if(void 0===n||u&&function({protectedKeys:e,needsAnimating:t},r){let i=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,i}(u,t))continue;let a={delay:r,...G(o||{},t)},d=!1;if(window.MotionHandoffAnimation){let r=e.props[eU];if(r){let e=window.MotionHandoffAnimation(r,t,ex);null!==e&&(a.startTime=e,d=!0)}}eV(e,t),i.start(rq(t,i,n,e.shouldReduceMotion&&eb.has(t)?{type:!1}:a,e,d));let h=i.animation;h&&c.push(h)}return a&&Promise.all(c).then(()=>{ex.update(()=>{a&&function(e,t){let{transitionEnd:r={},transition:i={},...n}=V(e,t)||{};for(let t in n={...n,...r}){let r=e_(n[t]);e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,eR(r))}}(e,a)})}),c}function rB(e,t,r={}){var i;let n=V(e,t,"exit"===r.type?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0),{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);let o=n?()=>Promise.all(rU(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(i=0)=>{let{delayChildren:n=0,staggerChildren:o,staggerDirection:a}=s;return function(e,t,r=0,i=0,n=1,s){let o=[],a=(e.variantChildren.size-1)*i,l=1===n?(e=0)=>e*i:(e=0)=>a-e*i;return Array.from(e.variantChildren).sort(r$).forEach((e,i)=>{e.notify("AnimationStart",t),o.push(rB(e,t,{...s,delay:r+l(i)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(o)}(e,t,n+i,o,a,r)}:()=>Promise.resolve(),{when:l}=s;if(!l)return Promise.all([o(),a(r.delay)]);{let[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then(()=>t())}}function r$(e,t){return e.sortNodePosition(t)}let rz=U.length,rJ=[...q].reverse(),rG=q.length;function rW(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rY(){return{animate:rW(!0),whileInView:rW(),whileHover:rW(),whileTap:rW(),whileDrag:rW(),whileFocus:rW(),exit:rW()}}class rH{constructor(e){this.isMounted=!1,this.node=e}update(){}}class rK extends rH{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let i;if(e.notify("AnimationStart",t),Array.isArray(t))i=Promise.all(t.map(t=>rB(e,t,r)));else if("string"==typeof t)i=rB(e,t,r);else{let n="function"==typeof t?V(e,t,r.custom):t;i=Promise.all(rU(e,n,r))}return i.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=rY(),i=!0,n=t=>(r,i)=>{var n;let s=V(e,i,"exit"===t?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);if(s){let{transition:e,transitionEnd:t,...i}=s;r={...r,...i,...t}}return r};function s(s){let{props:o}=e,a=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<rz;e++){let i=U[e],n=t.props[i];(N(n)||!1===n)&&(r[i]=n)}return r}(e.parent)||{},l=[],c=new Set,u={},d=1/0;for(let t=0;t<rG;t++){var h;let p=rJ[t],m=r[p],f=void 0!==o[p]?o[p]:a[p],g=N(f),v=p===s?m.isActive:null;!1===v&&(d=t);let y=f===a[p]&&f!==o[p]&&g;if(y&&i&&e.manuallyAnimateOnMount&&(y=!1),m.protectedKeys={...u},!m.isActive&&null===v||!f&&!m.prevProp||D(f)||"boolean"==typeof f)continue;let b=(h=m.prevProp,"string"==typeof f?f!==h:!!Array.isArray(f)&&!L(f,h)),w=b||p===s&&m.isActive&&!y&&g||t>d&&g,_=!1,S=Array.isArray(f)?f:[f],k=S.reduce(n(p),{});!1===v&&(k={});let{prevResolvedValues:E={}}=m,x={...E,...k},T=t=>{w=!0,c.has(t)&&(_=!0,c.delete(t)),m.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in x){let t=k[e],r=E[e];if(!u.hasOwnProperty(e))(I(t)&&I(r)?L(t,r):t===r)?void 0!==t&&c.has(e)?T(e):m.protectedKeys[e]=!0:null!=t?T(e):c.add(e)}m.prevProp=f,m.prevResolvedValues=k,m.isActive&&(u={...u,...k}),i&&e.blockInitialAnimation&&(w=!1);let C=!(y&&b)||_;w&&C&&l.push(...S.map(e=>({animation:e,options:{type:p}})))}if(c.size){let t={};c.forEach(r=>{let i=e.getBaseTarget(r),n=e.getValue(r);n&&(n.liveStyle=!0),t[r]=null!=i?i:null}),l.push({animation:t})}let p=!!l.length;return i&&(!1===o.initial||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(p=!1),i=!1,p?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,i){var n;if(r[t].isActive===i)return Promise.resolve();null===(n=e.variantChildren)||void 0===n||n.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,i)}),r[t].isActive=i;let o=s(t);for(let e in r)r[e].protectedKeys={};return o},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=rY(),i=!0}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();D(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}let rQ=0;class rX extends rH{constructor(){super(...arguments),this.id=rQ++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}function rZ(e,t,r,i={passive:!0}){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r)}function r0(e){return{point:{x:e.pageX,y:e.pageY}}}let r1=e=>t=>ea(t)&&e(t,r0(t));function r2(e,t,r,i){return rZ(e,t,r1(r),i)}let r5=(e,t)=>Math.abs(e-t);class r3{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:n=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=r6(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){return Math.sqrt(r5(e.x,t.x)**2+r5(e.y,t.y)**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;let{point:i}=e,{timestamp:n}=eC;this.history.push({...i,timestamp:n});let{onStart:s,onMove:o}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=r4(t,this.transformPagePoint),ex.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:i,resumeAnimation:n}=this.handlers;if(this.dragSnapToOrigin&&n&&n(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=r6("pointercancel"===e.type?this.lastMoveEventInfo:r4(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,s),i&&i(e,s)},!ea(e))return;this.dragSnapToOrigin=n,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;let s=r4(r0(e),this.transformPagePoint),{point:o}=s,{timestamp:a}=eC;this.history=[{...o,timestamp:a}];let{onSessionStart:l}=t;l&&l(e,r6(s,this.history)),this.removeListeners=rn(r2(this.contextWindow,"pointermove",this.handlePointerMove),r2(this.contextWindow,"pointerup",this.handlePointerUp),r2(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),eT(this.updatePoint)}}function r4(e,t){return t?{point:t(e.point)}:e}function r9(e,t){return{x:e.x-t.x,y:e.y-t.y}}function r6({point:e},t){return{point:e,delta:r9(e,r8(t)),offset:r9(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,i=null,n=r8(e);for(;r>=0&&(i=e[r],!(n.timestamp-i.timestamp>em(.1)));)r--;if(!i)return{x:0,y:0};let s=ef(n.timestamp-i.timestamp);if(0===s)return{x:0,y:0};let o={x:(n.x-i.x)/s,y:(n.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}(t,0)}}function r8(e){return e[e.length-1]}function r7(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ie(e){return e.max-e.min}function it(e,t,r,i=.5){e.origin=i,e.originPoint=t4(t.min,t.max,e.origin),e.scale=ie(r)/ie(t),e.translate=t4(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function ir(e,t,r,i){it(e.x,t.x,r.x,i?i.originX:void 0),it(e.y,t.y,r.y,i?i.originY:void 0)}function ii(e,t,r){e.min=r.min+t.min,e.max=e.min+ie(t)}function is(e,t,r){e.min=t.min-r.min,e.max=e.min+ie(t)}function io(e,t,r){is(e.x,t.x,r.x),is(e.y,t.y,r.y)}function ia(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function il(e,t){let r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,i]=[i,r]),{min:r,max:i}}function ic(e,t,r){return{min:iu(e,t),max:iu(e,r)}}function iu(e,t){return"number"==typeof e?e:e[t]||0}let id=()=>({translate:0,scale:1,origin:0,originPoint:0}),ih=()=>({x:id(),y:id()}),ip=()=>({min:0,max:0}),im=()=>({x:ip(),y:ip()});function ig(e){return[e("x"),e("y")]}function iv({top:e,left:t,right:r,bottom:i}){return{x:{min:t,max:r},y:{min:e,max:i}}}function iy(e){return void 0===e||1===e}function ib({scale:e,scaleX:t,scaleY:r}){return!iy(e)||!iy(t)||!iy(r)}function iw(e){return ib(e)||i_(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function i_(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function iS(e,t,r,i,n){return void 0!==n&&(e=i+n*(e-i)),i+r*(e-i)+t}function ik(e,t=0,r=1,i,n){e.min=iS(e.min,t,r,i,n),e.max=iS(e.max,t,r,i,n)}function iE(e,{x:t,y:r}){ik(e.x,t.translate,t.scale,t.originPoint),ik(e.y,r.translate,r.scale,r.originPoint)}function ix(e,t){e.min=e.min+t,e.max=e.max+t}function iT(e,t,r,i,n=.5){let s=t4(e.min,e.max,n);ik(e,t,r,s,i)}function iC(e,t){iT(e.x,t.x,t.scaleX,t.scale,t.originX),iT(e.y,t.y,t.scaleY,t.scale,t.originY)}function iA(e,t){return iv(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}let iP=({current:e})=>e?e.ownerDocument.defaultView:null,iM=new WeakMap;class ij{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=im(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){let{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let{dragSnapToOrigin:i}=this.getProps();this.panSession=new r3(e,{onSessionStart:e=>{let{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(r0(e).point)},onStart:(e,t)=>{let{drag:r,dragPropagation:i,onDragStart:n}=this.getProps();if(r&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===r||"y"===r?ei[r]?null:(ei[r]=!0,()=>{ei[r]=!1}):ei.x||ei.y?null:(ei.x=ei.y=!0,()=>{ei.x=ei.y=!1}),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ig(e=>{let t=this.getAxisMotionValue(e).get()||0;if(to.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let i=r.layout.layoutBox[e];if(i){let e=ie(i);t=parseFloat(t)/100*e}}}this.originPoint[e]=t}),n&&ex.postRender(()=>n(e,t)),eV(this.visualElement,"transform");let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{let{dragPropagation:r,dragDirectionLock:i,onDirectionLock:n,onDrag:s}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:o}=t;if(i&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(o),null!==this.currentDirection&&n&&n(this.currentDirection);return}this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>ig(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:iP(this.visualElement)})}stop(e,t){let r=this.isDragging;if(this.cancel(),!r)return;let{velocity:i}=t;this.startAnimation(i);let{onDragEnd:n}=this.getProps();n&&ex.postRender(()=>n(e,t))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){let{drag:i}=this.getProps();if(!r||!iO(e,i,this.currentDirection))return;let n=this.getAxisMotionValue(e),s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:r},i){return void 0!==t&&e<t?e=i?t4(t,e,i.min):Math.max(e,t):void 0!==r&&e>r&&(e=i?t4(r,e,i.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),n.set(s)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,n=this.constraints;t&&r7(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=function(e,{top:t,left:r,bottom:i,right:n}){return{x:ia(e.x,r,n),y:ia(e.y,t,i)}}(i.layoutBox,t):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:ic(e,"left","right"),y:ic(e,"top","bottom")}}(r),n!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ig(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){let r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(i.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!r7(t))return!1;let i=t.current;eg(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:n}=this.visualElement;if(!n||!n.layout)return!1;let s=function(e,t,r){let i=iA(e,r),{scroll:n}=t;return n&&(ix(i.x,n.offset.x),ix(i.y,n.offset.y)),i}(i,n.root,this.visualElement.getTransformPagePoint()),o={x:il((e=n.layout.layoutBox).x,s.x),y:il(e.y,s.y)};if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=iv(e))}return o}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:i,dragTransition:n,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{};return Promise.all(ig(o=>{if(!iO(o,t,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});let c={type:"inertia",velocity:r?e[o]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...n,...l};return this.startAxisValueAnimation(o,c)})).then(o)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return eV(this.visualElement,e),r.start(rq(e,r,0,t,this.visualElement,!1))}stopAnimation(){ig(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ig(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ig(t=>{let{drag:r}=this.getProps();if(!iO(t,r,this.currentDirection))return;let{projection:i}=this.visualElement,n=this.getAxisMotionValue(t);if(i&&i.layout){let{min:r,max:s}=i.layout.layoutBox[t];n.set(e[t]-t4(r,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!r7(t)||!r||!this.constraints)return;this.stopAnimation();let i={x:0,y:0};ig(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){let r=t.get();i[e]=function(e,t){let r=.5,i=ie(e),n=ie(t);return n>i?r=Z(t.min,t.max-i,e.min):i>n&&(r=Z(e.min,e.max-n,t.min)),e1(0,1,r)}({min:r,max:r},this.constraints[e])}});let{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ig(t=>{if(!iO(t,e,null))return;let r=this.getAxisMotionValue(t),{min:n,max:s}=this.constraints[t];r.set(t4(n,s,i[t]))})}addListeners(){if(!this.visualElement.current)return;iM.set(this.visualElement,this);let e=r2(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();r7(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ex.read(t);let n=rZ(window,"resize",()=>this.scalePositionWithinConstraints()),s=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(ig(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{n(),e(),i(),s&&s()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:n=!1,dragElastic:s=.35,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:n,dragElastic:s,dragMomentum:o}}}function iO(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}class iD extends rH{constructor(e){super(e),this.removeGroupControls=eg,this.removeListeners=eg,this.controls=new ij(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eg}unmount(){this.removeGroupControls(),this.removeListeners()}}let iI=e=>(t,r)=>{e&&ex.postRender(()=>e(t,r))};class iL extends rH{constructor(){super(...arguments),this.removePointerDownListener=eg}onPointerDown(e){this.session=new r3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iP(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:iI(e),onStart:iI(t),onMove:r,onEnd:(e,t)=>{delete this.session,i&&ex.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=r2(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let iN=(0,a.createContext)({}),iR={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iF(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let iV={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!ta.test(e))return e;e=parseFloat(e)}let r=iF(e,t.target.x),i=iF(e,t.target.y);return`${r}% ${i}%`}},iq={},{schedule:iU,cancel:iB}=eE(queueMicrotask,!1);class i$ extends a.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:n}=e;Object.assign(iq,iJ),n&&(t.group&&t.group.add(n),r&&r.register&&i&&r.register(n),n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),iR.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:i,isPresent:n}=this.props,s=r.projection;return s&&(s.isPresent=n,i||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent===n||(n?s.promote():s.relegate()||ex.postRender(()=>{let e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),iU.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iz(e){let[t,r]=C(),i=(0,a.useContext)(b);return(0,o.jsx)(i$,{...e,layoutGroup:i,switchLayoutGroup:(0,a.useContext)(iN),isPresent:t,safeToRemove:r})}let iJ={borderRadius:{...iV,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:iV,borderTopRightRadius:iV,borderBottomLeftRadius:iV,borderBottomRightRadius:iV,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let i=t_.parse(e);if(i.length>5)return e;let n=t_.createTransformer(e),s="number"!=typeof i[0]?1:0,o=r.x.scale*t.x,a=r.y.scale*t.y;i[0+s]/=o,i[1+s]/=a;let l=t4(o,a,.5);return"number"==typeof i[2+s]&&(i[2+s]/=l),"number"==typeof i[3+s]&&(i[3+s]/=l),n(i)}}},iG=(e,t)=>e.depth-t.depth;class iW{constructor(){this.children=[],this.isDirty=!1}add(e){ej(this.children,e),this.isDirty=!0}remove(e){eO(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(iG),this.isDirty=!1,this.children.forEach(e)}}function iY(e){let t=eF(e)?e.get():e;return ew(t)?t.toValue():t}let iH=["TopLeft","TopRight","BottomLeft","BottomRight"],iK=iH.length,iQ=e=>"string"==typeof e?parseFloat(e):e,iX=e=>"number"==typeof e||ta.test(e);function iZ(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let i0=i2(0,.5,eX),i1=i2(.5,.95,eg);function i2(e,t,r){return i=>i<e?0:i>t?1:r(Z(e,t,i))}function i5(e,t){e.min=t.min,e.max=t.max}function i3(e,t){i5(e.x,t.x),i5(e.y,t.y)}function i4(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function i9(e,t,r,i,n){return e-=t,e=i+1/r*(e-i),void 0!==n&&(e=i+1/n*(e-i)),e}function i6(e,t,[r,i,n],s,o){!function(e,t=0,r=1,i=.5,n,s=e,o=e){if(to.test(t)&&(t=parseFloat(t),t=t4(o.min,o.max,t/100)-o.min),"number"!=typeof t)return;let a=t4(s.min,s.max,i);e===s&&(a-=t),e.min=i9(e.min,t,r,a,n),e.max=i9(e.max,t,r,a,n)}(e,t[r],t[i],t[n],t.scale,s,o)}let i8=["x","scaleX","originX"],i7=["y","scaleY","originY"];function ne(e,t,r,i){i6(e.x,t,i8,r?r.x:void 0,i?i.x:void 0),i6(e.y,t,i7,r?r.y:void 0,i?i.y:void 0)}function nt(e){return 0===e.translate&&1===e.scale}function nr(e){return nt(e.x)&&nt(e.y)}function ni(e,t){return e.min===t.min&&e.max===t.max}function nn(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ns(e,t){return nn(e.x,t.x)&&nn(e.y,t.y)}function no(e){return ie(e.x)/ie(e.y)}function na(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class nl{constructor(){this.members=[]}add(e){ej(this.members,e),e.scheduleRender()}remove(e){if(eO(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t;let r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:i}=e.options;!1===i&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let nc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},nu="undefined"!=typeof window&&void 0!==window.MotionDebug,nd=["","X","Y","Z"],nh={visibility:"hidden"},np=0;function nm(e,t,r,i){let{latestValues:n}=t;n[e]&&(r[e]=n[e],t.setStaticValue(e,0),i&&(i[e]=0))}function nf({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:i,resetTransform:n}){return class{constructor(e={},r=null==t?void 0:t()){this.id=np++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,nu&&(nc.totalNodes=nc.resolvedTargetDeltas=nc.recalculatedProjection=0),this.nodes.forEach(ny),this.nodes.forEach(nx),this.nodes.forEach(nT),this.nodes.forEach(nb),nu&&window.MotionDebug.record(nc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new iW)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new eD),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;let{layoutId:i,layout:n,visualElement:s}=this.options;if(s&&!s.current&&s.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(n||i)&&(this.isLayoutDirty=!0),e){let r;let i=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){let r=eM.now(),i=({timestamp:t})=>{let n=t-r;n>=250&&(eT(i),e(n-250))};return ex.read(i,!0),()=>eT(i)}(i,250),iR.hasAnimatedSinceResize&&(iR.hasAnimatedSinceResize=!1,this.nodes.forEach(nE))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&s&&(i||n)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:i})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let n=this.options.transition||s.getDefaultTransition()||nO,{onLayoutAnimationStart:o,onLayoutAnimationComplete:a}=s.getProps(),l=!this.targetLayout||!ns(this.targetLayout,i)||r,c=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);let t={...G(n,"layout"),onPlay:o,onComplete:a};(s.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||nE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,eT(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nC),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let i=r.props[eU];if(window.MotionHasOptimisedAnimation(i,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",ex,!(e||r))}let{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&e(n)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(n_);return}this.isUpdating||this.nodes.forEach(nS),this.isUpdating=!1,this.nodes.forEach(nk),this.nodes.forEach(ng),this.nodes.forEach(nv),this.clearAllSnapshots();let e=eM.now();eC.delta=e1(0,1e3/60,e-eC.timestamp),eC.timestamp=e,eC.isProcessing=!0,eA.update.process(eC),eA.preRender.process(eC),eA.render.process(eC),eC.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,iU.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nw),this.sharedNodes.forEach(nA)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ex.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ex.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=im(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){let t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!n)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!nr(this.projectionDelta),r=this.getTransformTemplate(),i=r?r(this.latestValues,""):void 0,s=i!==this.prevTransformTemplateValue;e&&(t||iw(this.latestValues)||s)&&(n(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),i=this.removeElementScroll(r);return e&&(i=this.removeTransform(i)),nL((t=i).x),nL(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){var e;let{visualElement:t}=this.options;if(!t)return im();let r=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(nR))){let{scroll:e}=this.root;e&&(ix(r.x,e.offset.x),ix(r.y,e.offset.y))}return r}removeElementScroll(e){var t;let r=im();if(i3(r,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return r;for(let t=0;t<this.path.length;t++){let i=this.path[t],{scroll:n,options:s}=i;i!==this.root&&n&&s.layoutScroll&&(n.wasRoot&&i3(r,e),ix(r.x,n.offset.x),ix(r.y,n.offset.y))}return r}applyTransform(e,t=!1){let r=im();i3(r,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&iC(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),iw(i.latestValues)&&iC(r,i.latestValues)}return iw(this.latestValues)&&iC(r,this.latestValues),r}removeTransform(e){let t=im();i3(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!iw(r.latestValues))continue;ib(r.latestValues)&&r.updateSnapshot();let i=im();i3(i,r.measurePageBox()),ne(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}return iw(this.latestValues)&&ne(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==eC.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t,r,i,n;let s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);let o=!!this.resumingFrom||this!==s;if(!(e||o&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:a,layoutId:l}=this.options;if(this.layout&&(a||l)){if(this.resolvedRelativeTargetAt=eC.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=im(),this.relativeTargetOrigin=im(),io(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),i3(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=im(),this.targetWithTransforms=im()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),r=this.target,i=this.relativeTarget,n=this.relativeParent.target,ii(r.x,i.x,n.x),ii(r.y,i.y,n.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):i3(this.target,this.layout.layoutBox),iE(this.target,this.targetDelta)):i3(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=im(),this.relativeTargetOrigin=im(),io(this.relativeTargetOrigin,this.target,e.target),i3(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}nu&&nc.resolvedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||ib(this.parent.latestValues)||i_(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),r=!!this.resumingFrom||this!==t,i=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(i=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===eC.timestamp&&(i=!1),i)return;let{layout:n,layoutId:s}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(n||s))return;i3(this.layoutCorrected,this.layout.layoutBox);let o=this.treeScale.x,a=this.treeScale.y;(function(e,t,r,i=!1){let n,s;let o=r.length;if(o){t.x=t.y=1;for(let a=0;a<o;a++){s=(n=r[a]).projectionDelta;let{visualElement:o}=n.options;(!o||!o.props.style||"contents"!==o.props.style.display)&&(i&&n.options.layoutScroll&&n.scroll&&n!==n.root&&iC(e,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,iE(e,s)),i&&iw(n.latestValues)&&iC(e,n.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}})(this.layoutCorrected,this.treeScale,this.path,r),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=im());let{target:l}=t;if(!l){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(i4(this.prevProjectionDelta.x,this.projectionDelta.x),i4(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),ir(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&na(this.projectionDelta.x,this.prevProjectionDelta.x)&&na(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),nu&&nc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ih(),this.projectionDelta=ih(),this.projectionDeltaWithTransform=ih()}setAnimationOrigin(e,t=!1){let r;let i=this.snapshot,n=i?i.latestValues:{},s={...this.latestValues},o=ih();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let a=im(),l=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),u=!c||c.members.length<=1,d=!!(l&&!u&&!0===this.options.crossfade&&!this.path.some(nj));this.animationProgress=0,this.mixTargetDelta=t=>{let i=t/1e3;if(nP(o.x,e.x,i),nP(o.y,e.y,i),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var c,h,p,m;io(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,m=this.relativeTargetOrigin,nM(p.x,m.x,a.x,i),nM(p.y,m.y,a.y,i),r&&(c=this.relativeTarget,h=r,ni(c.x,h.x)&&ni(c.y,h.y))&&(this.isProjectionDirty=!1),r||(r=im()),i3(r,this.relativeTarget)}l&&(this.animationValues=s,function(e,t,r,i,n,s){n?(e.opacity=t4(0,void 0!==r.opacity?r.opacity:1,i0(i)),e.opacityExit=t4(void 0!==t.opacity?t.opacity:1,0,i1(i))):s&&(e.opacity=t4(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,i));for(let n=0;n<iK;n++){let s=`border${iH[n]}Radius`,o=iZ(t,s),a=iZ(r,s);(void 0!==o||void 0!==a)&&(o||(o=0),a||(a=0),0===o||0===a||iX(o)===iX(a)?(e[s]=Math.max(t4(iQ(o),iQ(a),i),0),(to.test(a)||to.test(o))&&(e[s]+="%")):e[s]=a)}(t.rotate||r.rotate)&&(e.rotate=t4(t.rotate||0,r.rotate||0,i))}(s,n,this.latestValues,i,d,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(eT(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ex.update(()=>{iR.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){let i=eF(0)?0:eR(0);return i.start(rq("",i,1e3,r)),i.animation}(0,0,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:i,latestValues:n}=e;if(t&&r&&i){if(this!==e&&this.layout&&i&&nN(this.options.animationType,this.layout.layoutBox,i.layoutBox)){r=this.target||im();let t=ie(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let i=ie(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+i}i3(t,r),iC(t,n),ir(this.projectionDeltaWithTransform,this.layoutCorrected,t,n)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new nl),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let i=this.getStack();i&&i.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let i={};r.z&&nm("z",e,i,this.animationValues);for(let t=0;t<nd.length;t++)nm(`rotate${nd[t]}`,e,i,this.animationValues),nm(`skew${nd[t]}`,e,i,this.animationValues);for(let t in e.render(),i)e.setStaticValue(t,i[t]),this.animationValues&&(this.animationValues[t]=i[t]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nh;let i={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=iY(null==e?void 0:e.pointerEvents)||"",i.transform=n?n(this.latestValues,""):"none",i;let s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){let t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=iY(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!iw(this.latestValues)&&(t.transform=n?n({},""):"none",this.hasProjected=!1),t}let o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),i.transform=function(e,t,r){let i="",n=e.x.translate/t.x,s=e.y.translate/t.y,o=(null==r?void 0:r.z)||0;if((n||s||o)&&(i=`translate3d(${n}px, ${s}px, ${o}px) `),(1!==t.x||1!==t.y)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:n,rotateY:s,skewX:o,skewY:a}=r;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),n&&(i+=`rotateX(${n}deg) `),s&&(i+=`rotateY(${s}deg) `),o&&(i+=`skewX(${o}deg) `),a&&(i+=`skewY(${a}deg) `)}let a=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==a||1!==l)&&(i+=`scale(${a}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),n&&(i.transform=n(o,i.transform));let{x:a,y:l}=this.projectionDelta;for(let e in i.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,s.animationValues?i.opacity=s===this?null!==(r=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:i.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0,iq){if(void 0===o[e])continue;let{correct:t,applyTo:r}=iq[e],n="none"===i.transform?o[e]:t(o[e],s);if(r){let e=r.length;for(let t=0;t<e;t++)i[r[t]]=n}else i[e]=n}return this.options.layoutId&&(i.pointerEvents=s===this?iY(null==e?void 0:e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(n_),this.root.sharedNodes.clear()}}}function ng(e){e.updateLayout()}function nv(e){var t;let r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:i}=e.layout,{animationType:n}=e.options,s=r.source!==e.layout.source;"size"===n?ig(e=>{let i=s?r.measuredBox[e]:r.layoutBox[e],n=ie(i);i.min=t[e].min,i.max=i.min+n}):nN(n,r.layoutBox,t)&&ig(i=>{let n=s?r.measuredBox[i]:r.layoutBox[i],o=ie(t[i]);n.max=n.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+o)});let o=ih();ir(o,t,r.layoutBox);let a=ih();s?ir(a,e.applyTransform(i,!0),r.measuredBox):ir(a,t,r.layoutBox);let l=!nr(o),c=!1;if(!e.resumeFrom){let i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){let{snapshot:n,layout:s}=i;if(n&&s){let o=im();io(o,r.layoutBox,n.layoutBox);let a=im();io(a,t,s.layoutBox),ns(o,a)||(c=!0),i.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ny(e){nu&&nc.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function nb(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nw(e){e.clearSnapshot()}function n_(e){e.clearMeasurements()}function nS(e){e.isLayoutDirty=!1}function nk(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function nx(e){e.resolveTargetDelta()}function nT(e){e.calcProjection()}function nC(e){e.resetSkewAndRotation()}function nA(e){e.removeLeadSnapshot()}function nP(e,t,r){e.translate=t4(t.translate,0,r),e.scale=t4(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function nM(e,t,r,i){e.min=t4(t.min,r.min,i),e.max=t4(t.max,r.max,i)}function nj(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let nO={duration:.45,ease:[.4,0,.1,1]},nD=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nI=nD("applewebkit/")&&!nD("chrome/")?Math.round:eg;function nL(e){e.min=nI(e.min),e.max=nI(e.max)}function nN(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(no(t)-no(r)))}function nR(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}let nF=nf({attachResizeListener:(e,t)=>rZ(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nV={current:void 0},nq=nf({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!nV.current){let e=new nF({});e.mount(window),e.setOptions({layoutScroll:!0}),nV.current=e}return nV.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function nU(e,t,r){let{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===r);let n=i["onHover"+r];n&&ex.postRender(()=>n(t,r0(t)))}class nB extends rH{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,n,s]=en(e,r),o=es(e=>{let{target:r}=e,i=t(e);if("function"!=typeof i||!r)return;let s=es(e=>{i(e),r.removeEventListener("pointerleave",s)});r.addEventListener("pointerleave",s,n)});return i.forEach(e=>{e.addEventListener("pointerenter",o,n)}),s}(e,e=>(nU(this.node,e,"Start"),e=>nU(this.node,e,"End"))))}unmount(){}}class n$ extends rH{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rn(rZ(this.node.current,"focus",()=>this.onFocus()),rZ(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nz(e,t,r){let{props:i}=e;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===r);let n=i["onTap"+("End"===r?"":r)];n&&ex.postRender(()=>n(t,r0(t)))}class nJ extends rH{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,n,s]=en(e,r),o=e=>{let i=e.currentTarget;if(!ep(e)||ec.has(i))return;ec.add(i);let s=t(e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),ep(e)&&ec.has(i)&&(ec.delete(i),"function"==typeof s&&s(e,{success:t}))},a=e=>{o(e,r.useGlobalTarget||eo(i,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,n),window.addEventListener("pointercancel",l,n)};return i.forEach(e=>{el.has(e.tagName)||-1!==e.tabIndex||null!==e.getAttribute("tabindex")||(e.tabIndex=0),(r.useGlobalTarget?window:e).addEventListener("pointerdown",o,n),e.addEventListener("focus",e=>eh(e,n),n)}),s}(e,e=>(nz(this.node,e,"Start"),(e,{success:t})=>nz(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}let nG=new WeakMap,nW=new WeakMap,nY=e=>{let t=nG.get(e.target);t&&t(e)},nH=e=>{e.forEach(nY)},nK={some:0,all:1};class nQ extends rH{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:n}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof i?i:nK[i]};return function(e,t,r){let i=function({root:e,...t}){let r=e||document;nW.has(r)||nW.set(r,{});let i=nW.get(r),n=JSON.stringify(t);return i[n]||(i[n]=new IntersectionObserver(nH,{root:e,...t})),i[n]}(t);return nG.set(e,r),i.observe(e),()=>{nG.delete(e),i.unobserve(e)}}(this.node.current,s,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,n&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:i}=this.node.getProps(),s=t?r:i;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}let nX=(0,a.createContext)({strict:!1}),nZ=(0,a.createContext)({});function n0(e){return D(e.animate)||U.some(t=>N(e[t]))}function n1(e){return!!(n0(e)||e.variants)}function n2(e){return Array.isArray(e)?e.join(" "):e}let n5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},n3={};for(let e in n5)n3[e]={isEnabled:t=>n5[e].some(e=>!!t[e])};let n4=Symbol.for("motionComponentSymbol"),n9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function n6(e){if("string"!=typeof e||e.includes("-"));else if(n9.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let n8=e=>(t,r)=>{let i=(0,a.useContext)(nZ),n=(0,a.useContext)(_),s=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},i,n,s){let o={latestValues:function(e,t,r,i){let n={},s=i(e,{});for(let e in s)n[e]=iY(s[e]);let{initial:o,animate:a}=e,l=n0(e),c=n1(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!r&&!1===r.initial,d=(u=u||!1===o)?a:o;if(d&&"boolean"!=typeof d&&!D(d)){let t=Array.isArray(d)?d:[d];for(let r=0;r<t.length;r++){let i=F(e,t[r]);if(i){let{transitionEnd:e,transition:t,...r}=i;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=u?t.length-1:0;t=t[e]}null!==t&&(n[e]=t)}for(let t in e)n[t]=e[t]}}}return n}(i,n,s,e),renderState:t()};return r&&(o.onMount=e=>r({props:i,current:e,...o}),o.onUpdate=e=>r(e)),o})(e,t,i,n);return r?s():w(s)},n7=(e,t)=>t&&"number"==typeof e?t.transform(e):e,se={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},st=ev.length;function sr(e,t,r){let{style:i,vars:n,transformOrigin:s}=e,o=!1,a=!1;for(let e in t){let r=t[e];if(ey.has(e)){o=!0;continue}if(tG(e)){n[e]=r;continue}{let t=n7(r,tC[e]);e.startsWith("origin")?(a=!0,s[e]=t):i[e]=t}}if(!t.transform&&(o||r?i.transform=function(e,t,r){let i="",n=!0;for(let s=0;s<st;s++){let o=ev[s],a=e[o];if(void 0===a)continue;let l=!0;if(!(l="number"==typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a))||r){let e=n7(a,tC[o]);if(!l){n=!1;let t=se[o]||o;i+=`${t}(${e}) `}r&&(t[o]=e)}}return i=i.trim(),r?i=r(t,n?"":i):n&&(i="none"),i}(t,e.transform,r):i.transform&&(i.transform="none")),a){let{originX:e="50%",originY:t="50%",originZ:r=0}=s;i.transformOrigin=`${e} ${t} ${r}`}}let si={offset:"stroke-dashoffset",array:"stroke-dasharray"},sn={offset:"strokeDashoffset",array:"strokeDasharray"};function ss(e,t,r){return"string"==typeof e?e:ta.transform(t+r*e)}function so(e,{attrX:t,attrY:r,attrScale:i,originX:n,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(sr(e,c,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:h,style:p,dimensions:m}=e;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(void 0!==n||void 0!==s||p.transform)&&(p.transformOrigin=function(e,t,r){let i=ss(t,e.x,e.width),n=ss(r,e.y,e.height);return`${i} ${n}`}(m,void 0!==n?n:.5,void 0!==s?s:.5)),void 0!==t&&(h.x=t),void 0!==r&&(h.y=r),void 0!==i&&(h.scale=i),void 0!==o&&function(e,t,r=1,i=0,n=!0){e.pathLength=1;let s=n?si:sn;e[s.offset]=ta.transform(-i);let o=ta.transform(t),a=ta.transform(r);e[s.array]=`${o} ${a}`}(h,o,a,l,!1)}let sa=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),sl=()=>({...sa(),attrs:{}}),sc=e=>"string"==typeof e&&"svg"===e.toLowerCase();function su(e,{style:t,vars:r},i,n){for(let s in Object.assign(e.style,t,n&&n.getProjectionStyles(i)),r)e.style.setProperty(s,r[s])}let sd=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sh(e,t,r,i){for(let r in su(e,t,void 0,i),t.attrs)e.setAttribute(sd.has(r)?r:eq(r),t.attrs[r])}function sp(e,{layout:t,layoutId:r}){return ey.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!iq[e]||"opacity"===e)}function sm(e,t,r){var i;let{style:n}=e,s={};for(let o in n)(eF(n[o])||t.style&&eF(t.style[o])||sp(o,e)||(null===(i=null==r?void 0:r.getValue(o))||void 0===i?void 0:i.liveStyle)!==void 0)&&(s[o]=n[o]);return s}function sf(e,t,r){let i=sm(e,t,r);for(let r in e)(eF(e[r])||eF(t[r]))&&(i[-1!==ev.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return i}let sg=["x","y","width","height","cx","cy","r"],sv={useVisualState:n8({scrapeMotionValuesFromProps:sf,createRenderState:sl,onUpdate:({props:e,prevProps:t,current:r,renderState:i,latestValues:n})=>{if(!r)return;let s=!!e.drag;if(!s){for(let e in n)if(ey.has(e)){s=!0;break}}if(!s)return;let o=!t;if(t)for(let r=0;r<sg.length;r++){let i=sg[r];e[i]!==t[i]&&(o=!0)}o&&ex.read(()=>{(function(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(e){t.dimensions={x:0,y:0,width:0,height:0}}})(r,i),ex.render(()=>{so(i,n,sc(r.tagName),e.transformTemplate),sh(r,i)})})}})},sy={useVisualState:n8({scrapeMotionValuesFromProps:sm,createRenderState:sa})};function sb(e,t,r){for(let i in t)eF(t[i])||sp(i,r)||(e[i]=t[i])}let sw=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function s_(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||sw.has(e)}let sS=e=>!s_(e);try{!function(e){e&&(sS=t=>t.startsWith("on")?!s_(t):e(t))}(require("@emotion/is-prop-valid").default)}catch(e){}let sk={current:null},sE={current:!1},sx=[...tX,th,t_],sT=e=>sx.find(tQ(e)),sC=new WeakMap,sA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sP{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:n,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=t$,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=eM.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ex.render(this.render,!1,!0))};let{latestValues:a,renderState:l,onUpdate:c}=s;this.onUpdate=c,this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!n,this.isControllingVariants=n0(t),this.isVariantNode=n1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in d){let t=d[e];void 0!==a[e]&&eF(t)&&t.set(a[e],!1)}}mount(e){this.current=e,sC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),sE.current||function(){if(sE.current=!0,M){if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sk.current=e.matches;e.addListener(t),t()}else sk.current=!1}}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||sk.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in sC.delete(this.current),this.projection&&this.projection.unmount(),eT(this.notifyUpdate),eT(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let i=ey.has(e),n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&ex.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in n3){let t=n3[e];if(!t)continue;let{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):im()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<sA.length;t++){let r=sA[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,r){for(let i in t){let n=t[i],s=r[i];if(eF(n))e.addValue(i,n);else if(eF(s))e.addValue(i,eR(n,{owner:e}));else if(s!==n){if(e.hasValue(i)){let t=e.getValue(i);!0===t.liveStyle?t.jump(n):t.hasAnimated||t.set(n)}else{let t=e.getStaticValue(i);e.addValue(i,eR(void 0!==t?t:n,{owner:e}))}}}for(let i in r)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=eR(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=void 0===this.latestValues[e]&&this.current?null!==(r=this.getBaseTargetFromProps(this.props,e))&&void 0!==r?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=i&&("string"==typeof i&&(tz(i)||e0(i))?i=parseFloat(i):!sT(i)&&t_.test(t)&&(i=tM(e,t)),this.setBaseTarget(e,eF(i)?i.get():i)),eF(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let r;let{initial:i}=this.props;if("string"==typeof i||"object"==typeof i){let n=F(this.props,i,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);n&&(r=n[e])}if(i&&void 0!==r)return r;let n=this.getBaseTargetFromProps(this.props,e);return void 0===n||eF(n)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:n}on(e,t){return this.events[e]||(this.events[e]=new eD),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class sM extends sP{constructor(){super(...arguments),this.KeyframeResolver=t0}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;eF(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class sj extends sM{constructor(){super(...arguments),this.type="html",this.renderInstance=su}readValueFromInstance(e,t){if(ey.has(t)){let e=tP(t);return e&&e.default||0}{let r=window.getComputedStyle(e),i=(tG(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return iA(e,t)}build(e,t,r){sr(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return sm(e,t,r)}}class sO extends sM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=im}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ey.has(t)){let e=tP(t);return e&&e.default||0}return t=sd.has(t)?t:eq(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return sf(e,t,r)}build(e,t,r){so(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){sh(e,t,r,i)}mount(e){this.isSVGTag=sc(e.tagName),super.mount(e)}}let sD=function(e){if("undefined"==typeof Proxy)return e;let t=new Map;return new Proxy((...t)=>e(...t),{get:(r,i)=>"create"===i?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}((n={animation:{Feature:rK},exit:{Feature:rX},inView:{Feature:nQ},tap:{Feature:nJ},focus:{Feature:n$},hover:{Feature:nB},pan:{Feature:iL},drag:{Feature:iD,ProjectionNode:nq,MeasureLayout:iz},layout:{ProjectionNode:nq,MeasureLayout:iz}},s=(e,t)=>n6(e)?new sO(t):new sj(t,{allowProjection:e!==a.Fragment}),function(e,{forwardMotionProps:t}={forwardMotionProps:!1}){return function({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:i,Component:n}){var s,l;function c(e,s){var l;let c;let u={...(0,a.useContext)(S),...e,layoutId:function({layoutId:e}){let t=(0,a.useContext)(b).id;return t&&void 0!==e?t+"-"+e:e}(e)},{isStatic:d}=u,h=function(e){let{initial:t,animate:r}=function(e,t){if(n0(e)){let{initial:t,animate:r}=e;return{initial:!1===t||N(t)?t:void 0,animate:N(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,a.useContext)(nZ));return(0,a.useMemo)(()=>({initial:t,animate:r}),[n2(t),n2(r)])}(e),p=i(e,d);if(!d&&M){(0,a.useContext)(nX).strict;let e=function(e){let{drag:t,layout:r}=n3;if(!t&&!r)return{};let i={...t,...r};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(u);c=e.MeasureLayout,h.visualElement=function(e,t,r,i,n){var s,o;let{visualElement:l}=(0,a.useContext)(nZ),c=(0,a.useContext)(nX),u=(0,a.useContext)(_),d=(0,a.useContext)(S).reducedMotion,h=(0,a.useRef)(null);i=i||c.renderer,!h.current&&i&&(h.current=i(e,{visualState:t,parent:l,props:r,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:d}));let p=h.current,m=(0,a.useContext)(iN);p&&!p.projection&&n&&("html"===p.type||"svg"===p.type)&&function(e,t,r,i){let{layoutId:n,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:n,layout:s,alwaysMeasureLayout:!!o||a&&r7(a),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}(h.current,r,n,m);let f=(0,a.useRef)(!1);(0,a.useInsertionEffect)(()=>{p&&f.current&&p.update(r,u)});let g=r[eU],v=(0,a.useRef)(!!g&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,g))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,g)));return j(()=>{p&&(f.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),iU.render(p.render),v.current&&p.animationState&&p.animationState.animateChanges())}),(0,a.useEffect)(()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)}),v.current=!1))}),p}(n,p,u,t,e.ProjectionNode)}return(0,o.jsxs)(nZ.Provider,{value:h,children:[c&&h.visualElement?(0,o.jsx)(c,{visualElement:h.visualElement,...u}):null,r(n,e,(l=h.visualElement,(0,a.useCallback)(e=>{e&&p.onMount&&p.onMount(e),l&&(e?l.mount(e):l.unmount()),s&&("function"==typeof s?s(e):r7(s)&&(s.current=e))},[l])),p,d,h.visualElement)]})}e&&function(e){for(let t in e)n3[t]={...n3[t],...e[t]}}(e),c.displayName=`motion.${"string"==typeof n?n:`create(${null!==(l=null!==(s=n.displayName)&&void 0!==s?s:n.name)&&void 0!==l?l:""})`}`;let u=(0,a.forwardRef)(c);return u[n4]=n,u}({...n6(e)?sv:sy,preloadedFeatures:n,useRender:function(e=!1){return(t,r,i,{latestValues:n},s)=>{let o=(n6(t)?function(e,t,r,i){let n=(0,a.useMemo)(()=>{let r=sl();return so(r,t,sc(i),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};sb(t,e.style,e),n.style={...t,...n.style}}return n}:function(e,t){let r={},i=function(e,t){let r=e.style||{},i={};return sb(i,r,e),Object.assign(i,function({transformTemplate:e},t){return(0,a.useMemo)(()=>{let r=sa();return sr(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),i}(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r})(r,n,s,t),l=function(e,t,r){let i={};for(let n in e)("values"!==n||"object"!=typeof e.values)&&(sS(n)||!0===r&&s_(n)||!t&&!s_(n)||e.draggable&&n.startsWith("onDrag"))&&(i[n]=e[n]);return i}(r,"string"==typeof t,e),c=t!==a.Fragment?{...l,...o,ref:i}:{},{children:u}=r,d=(0,a.useMemo)(()=>eF(u)?u.get():u,[u]);return(0,a.createElement)(t,{...c,children:d})}}(t),createVisualElement:s,Component:e})})),sI=e=>{let t=sF(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),sL(r,t)||sR(e)},getConflictingClassGroupIds:(e,t)=>{let n=r[e]||[];return t&&i[e]?[...n,...i[e]]:n}}},sL=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],i=t.nextPart.get(r),n=i?sL(e.slice(1),i):void 0;if(n)return n;if(0===t.validators.length)return;let s=e.join("-");return t.validators.find(({validator:e})=>e(s))?.classGroupId},sN=/^\[(.+)\]$/,sR=e=>{if(sN.test(e)){let t=sN.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},sF=e=>{let{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return sB(Object.entries(e.classGroups),r).forEach(([e,r])=>{sV(r,i,e,t)}),i},sV=(e,t,r,i)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:sq(t,e)).classGroupId=r;return}if("function"==typeof e){if(sU(e)){sV(e(i),t,r,i);return}t.validators.push({validator:e,classGroupId:r});return}Object.entries(e).forEach(([e,n])=>{sV(n,sq(t,e),r,i)})})},sq=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},sU=e=>e.isThemeGetter,sB=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,s$=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,i=new Map,n=(n,s)=>{r.set(n,s),++t>e&&(t=0,i=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=i.get(e))?(n(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):n(e,t)}}},sz=e=>{let{separator:t,experimentalParseClassName:r}=e,i=1===t.length,n=t[0],s=t.length,o=e=>{let r;let o=[],a=0,l=0;for(let c=0;c<e.length;c++){let u=e[c];if(0===a){if(u===n&&(i||e.slice(c,c+s)===t)){o.push(e.slice(l,c)),l=c+s;continue}if("/"===u){r=c;continue}}"["===u?a++:"]"===u&&a--}let c=0===o.length?e:e.substring(l),u=c.startsWith("!"),d=u?c.substring(1):c;return{modifiers:o,hasImportantModifier:u,baseClassName:d,maybePostfixModifierPosition:r&&r>l?r-l:void 0}};return r?e=>r({className:e,parseClassName:o}):o},sJ=e=>{if(e.length<=1)return e;let t=[],r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},sG=e=>({cache:s$(e.cacheSize),parseClassName:sz(e),...sI(e)}),sW=/\s+/,sY=(e,t)=>{let{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:n}=t,s=[],o=e.trim().split(sW),a="";for(let e=o.length-1;e>=0;e-=1){let t=o[e],{modifiers:l,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=r(t),h=!!d,p=i(h?u.substring(0,d):u);if(!p){if(!h||!(p=i(u))){a=t+(a.length>0?" "+a:a);continue}h=!1}let m=sJ(l).join(":"),f=c?m+"!":m,g=f+p;if(s.includes(g))continue;s.push(g);let v=n(p,h);for(let e=0;e<v.length;++e){let t=v[e];s.push(f+t)}a=t+(a.length>0?" "+a:a)}return a};function sH(){let e,t,r=0,i="";for(;r<arguments.length;)(e=arguments[r++])&&(t=sK(e))&&(i&&(i+=" "),i+=t);return i}let sK=e=>{let t;if("string"==typeof e)return e;let r="";for(let i=0;i<e.length;i++)e[i]&&(t=sK(e[i]))&&(r&&(r+=" "),r+=t);return r},sQ=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},sX=/^\[(?:([a-z-]+):)?(.+)\]$/i,sZ=/^\d+\/\d+$/,s0=new Set(["px","full","screen"]),s1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,s5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,s3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,s9=e=>s8(e)||s0.has(e)||sZ.test(e),s6=e=>od(e,"length",oh),s8=e=>!!e&&!Number.isNaN(Number(e)),s7=e=>od(e,"number",s8),oe=e=>!!e&&Number.isInteger(Number(e)),ot=e=>e.endsWith("%")&&s8(e.slice(0,-1)),or=e=>sX.test(e),oi=e=>s1.test(e),on=new Set(["length","size","percentage"]),os=e=>od(e,on,op),oo=e=>od(e,"position",op),oa=new Set(["image","url"]),ol=e=>od(e,oa,of),oc=e=>od(e,"",om),ou=()=>!0,od=(e,t,r)=>{let i=sX.exec(e);return!!i&&(i[1]?"string"==typeof t?i[1]===t:t.has(i[1]):r(i[2]))},oh=e=>s2.test(e)&&!s5.test(e),op=()=>!1,om=e=>s3.test(e),of=e=>s4.test(e);Symbol.toStringTag;let og=function(e,...t){let r,i,n;let s=function(a){return i=(r=sG(t.reduce((e,t)=>t(e),e()))).cache.get,n=r.cache.set,s=o,o(a)};function o(e){let t=i(e);if(t)return t;let s=sY(e,r);return n(e,s),s}return function(){return s(sH.apply(null,arguments))}}(()=>{let e=sQ("colors"),t=sQ("spacing"),r=sQ("blur"),i=sQ("brightness"),n=sQ("borderColor"),s=sQ("borderRadius"),o=sQ("borderSpacing"),a=sQ("borderWidth"),l=sQ("contrast"),c=sQ("grayscale"),u=sQ("hueRotate"),d=sQ("invert"),h=sQ("gap"),p=sQ("gradientColorStops"),m=sQ("gradientColorStopPositions"),f=sQ("inset"),g=sQ("margin"),v=sQ("opacity"),y=sQ("padding"),b=sQ("saturate"),w=sQ("scale"),_=sQ("sepia"),S=sQ("skew"),k=sQ("space"),E=sQ("translate"),x=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",or,t],A=()=>[or,t],P=()=>["",s9,s6],M=()=>["auto",s8,or],j=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",or],N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>[s8,or];return{cacheSize:500,separator:":",theme:{colors:[ou],spacing:[s9,s6],blur:["none","",oi,or],brightness:R(),borderColor:[e],borderRadius:["none","","full",oi,or],borderSpacing:A(),borderWidth:P(),contrast:R(),grayscale:L(),hueRotate:R(),invert:L(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[ot,s6],inset:C(),margin:C(),opacity:R(),padding:A(),saturate:R(),scale:R(),sepia:L(),skew:R(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",or]}],container:["container"],columns:[{columns:[oi]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...j(),or]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",oe,or]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",or]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",oe,or]}],"grid-cols":[{"grid-cols":[ou]}],"col-start-end":[{col:["auto",{span:["full",oe,or]},or]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[ou]}],"row-start-end":[{row:["auto",{span:[oe,or]},or]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",or]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",or]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",or,t]}],"min-w":[{"min-w":[or,t,"min","max","fit"]}],"max-w":[{"max-w":[or,t,"none","full","min","max","fit","prose",{screen:[oi]},oi]}],h:[{h:[or,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[or,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[or,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[or,t,"auto","min","max","fit"]}],"font-size":[{text:["base",oi,s6]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",s7]}],"font-family":[{font:[ou]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",or]}],"line-clamp":[{"line-clamp":["none",s8,s7]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",s9,or]}],"list-image":[{"list-image":["none",or]}],"list-style-type":[{list:["none","disc","decimal",or]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",s9,s6]}],"underline-offset":[{"underline-offset":["auto",s9,or]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",or]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",or]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...j(),oo]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",os]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ol]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:O()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[s9,or]}],"outline-w":[{outline:[s9,s6]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[s9,s6]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",oi,oc]}],"shadow-color":[{shadow:[ou]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",oi,or]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",or]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",or]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",or]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[oe,or]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",or]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",or]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",or]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[s9,s6,s7]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function ov(...e){return og(function(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i)}return n}(e))&&(i&&(i+=" "),i+=t);return i}(e))}function oy(){let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)([{id:"1",role:"assistant",content:"Welcome to Empire Unified. I am your concierge. How can I assist you today?",timestamp:new Date}]),[n,s]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[u,d]=(0,a.useState)("idle"),h=async r=>{if(r.preventDefault(),!e.trim())return;let n={id:Date.now().toString(),role:"user",content:e,timestamp:new Date};i(e=>[...e,n]),t(""),s(!0);try{let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}),r=await t.json(),n={id:(Date.now()+1).toString(),role:"assistant",content:r.response||"Communication Error. Intelligence Module Offline.",timestamp:new Date};i(e=>[...e,n])}catch(t){console.error(t);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Error connecting to Sovereign Brain. Check API routes.",timestamp:new Date};i(t=>[...t,e])}finally{s(!1)}};return(0,o.jsxs)("div",{className:"w-full max-w-md bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-xl overflow-hidden flex flex-col h-[600px]",children:[(0,o.jsxs)("div",{className:"p-4 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur flex justify-between items-center",children:[(0,o.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[o.jsx(m,{className:"w-4 h-4 text-blue-500"}),"Empire Concierge"]}),o.jsx("button",{onClick:()=>{l&&("active"===u?(l.stop(),d("idle")):(d("connecting"),l.start("033ec1d3-e17d-4611-a497-b47cab1fdb4e")))},"aria-label":"active"===u?"End Call":"Call Office Manager",className:ov("p-2 rounded-full transition-all duration-300 flex items-center gap-2 text-sm font-medium","active"===u?"bg-red-500/10 text-red-500 hover:bg-red-500/20":"bg-green-500/10 text-green-500 hover:bg-green-500/20"),children:"connecting"===u?o.jsx(f,{className:"w-4 h-4 animate-spin"}):"active"===u?(0,o.jsxs)(o.Fragment,{children:[o.jsx(g,{className:"w-4 h-4"}),o.jsx("span",{children:"End"})]}):(0,o.jsxs)(o.Fragment,{children:[o.jsx(v,{className:"w-4 h-4"}),o.jsx("span",{children:"Call Agent"})]})})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.jsx(O,{initial:!1,children:r.map(e=>o.jsx(sD.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:ov("flex w-full","user"===e.role?"justify-end":"justify-start"),children:o.jsx("div",{className:ov("max-w-[80%] rounded-2xl px-4 py-2 text-sm","user"===e.role?"bg-blue-600 text-white rounded-br-none":"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 rounded-bl-none"),children:e.content})},e.id))}),n&&o.jsx(sD.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:o.jsx("div",{className:"bg-zinc-100 dark:bg-zinc-800 rounded-2xl rounded-bl-none px-4 py-2",children:o.jsx(f,{className:"w-4 h-4 animate-spin text-zinc-500"})})})]}),o.jsx("form",{onSubmit:h,className:"p-4 border-t border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900",children:(0,o.jsxs)("div",{className:"relative",children:[o.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Type your request...",className:"w-full bg-zinc-100 dark:bg-zinc-800 border-none rounded-full px-4 py-3 pr-12 text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),o.jsx("button",{type:"submit","aria-label":"Send message",disabled:n||!e.trim(),className:"absolute right-1 top-1 p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.jsx(y,{className:"w-4 h-4"})})]})})]})}r(58166);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ob=p("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ow=p("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);function o_(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[n,s]=(0,a.useState)(null),l=async()=>{i(!0);try{let e=await fetch("/api/crm/clients"),r=await e.json();t(r.clients||[])}catch(e){console.error("API Fetch Failed, using Fallback Data",e),t([{name:"David Miller",phone:"555-0123",industry:"HVAC",status:"New",created_at:new Date().toISOString()},{name:"Sarah Connor",phone:"555-0999",industry:"Plumbing",status:"Qualified",created_at:new Date(Date.now()-864e5).toISOString()},{name:"Mike Ross",phone:"555-0777",industry:"Legal",status:"Closed",created_at:new Date(Date.now()-1728e5).toISOString()}])}finally{i(!1)}};return(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full max-h-[600px]",children:[(0,o.jsxs)("div",{className:"lg:col-span-1 bg-zinc-900 border border-white/10 rounded-2xl overflow-hidden flex flex-col",children:[(0,o.jsxs)("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-zinc-950",children:[o.jsx("h2",{className:"font-bold text-lg",children:"Inbound Leads"}),o.jsx("button",{title:"Refresh Leads",onClick:l,className:"text-zinc-400 hover:text-white",children:o.jsx(ob,{className:`w-4 h-4 ${r?"animate-spin":""}`})})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[e.map((e,t)=>(0,o.jsxs)("div",{onClick:()=>s(e),className:`p-3 rounded-lg cursor-pointer transition-colors border ${n===e?"bg-blue-600/20 border-blue-500":"bg-white/5 border-transparent hover:bg-white/10"}`,children:[o.jsx("div",{className:"font-bold text-white",children:e.name}),(0,o.jsxs)("div",{className:"text-xs text-zinc-400 flex justify-between mt-1",children:[o.jsx("span",{children:e.industry}),o.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},t)),0===e.length&&!r&&o.jsx("div",{className:"text-center text-zinc-500 py-8",children:"No active leads found."})]})]}),o.jsx("div",{className:"lg:col-span-2 bg-zinc-900 border border-white/10 rounded-2xl overflow-hidden flex flex-col relative",children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"p-4 border-b border-white/10 bg-zinc-950 flex justify-between items-center",children:[(0,o.jsxs)("div",{children:[o.jsx("h2",{className:"font-bold text-lg",children:n.name}),(0,o.jsxs)("span",{className:"text-xs text-zinc-400",children:[n.phone,"  ",n.industry]})]}),o.jsx("div",{className:"px-3 py-1 bg-green-500/20 text-green-400 text-xs rounded-full border border-green-500/50",children:"AI Active"})]}),(0,o.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[o.jsx("div",{className:"flex justify-end",children:(0,o.jsxs)("div",{className:"bg-blue-600 text-white p-3 rounded-2xl rounded-tr-none max-w-[80%]",children:[(0,o.jsxs)("p",{className:"text-sm",children:["Hey ",n.name,", this is your AI Onboarding Specialist. When is a good time to call?"]}),o.jsx("span",{className:"text-[10px] opacity-70 block mt-1 text-right",children:"Sent via Sovereign SMS"})]})}),o.jsx("div",{className:"text-center py-4",children:o.jsx("span",{className:"text-xs text-zinc-600 bg-zinc-900 px-3 py-1 rounded-full border border-zinc-800",children:"Waiting for reply..."})})]}),o.jsx("div",{className:"p-4 border-t border-white/10 bg-zinc-950",children:(0,o.jsxs)("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Type a manual message...",className:"flex-1 bg-zinc-900 border border-zinc-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),o.jsx("button",{title:"Send Message",className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors",children:o.jsx(y,{className:"w-5 h-5"})})]})})]}):(0,o.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-500 p-8 text-center",children:[o.jsx(ow,{className:"w-12 h-12 mb-4 opacity-20"}),o.jsx("p",{children:"Select a lead to view the secure conversation logs."}),o.jsx("p",{className:"text-xs mt-2 text-zinc-600",children:"Encrypted  Locally Hosted"})]})})]})}/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let oS=p("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ok=p("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),oE=p("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),ox=p("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),oT=p("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var oC=r(79404),oA=r.n(oC);function oP(){let[e,t]=l().useState("command"),[r,i]=l().useState({active_agents:"-",system_load:"-",network:"Connecting...",notifications:"-"});return(0,o.jsxs)("main",{className:"flex min-h-screen bg-[#0a0a0a] text-white selection:bg-blue-500/30",children:[(0,o.jsxs)("aside",{className:"w-20 lg:w-64 border-r border-white/10 flex flex-col items-center lg:items-stretch py-8 bg-[#0f0f0f]",children:[(0,o.jsxs)("div",{className:"mb-12 px-4 flex items-center justify-center lg:justify-start gap-3",children:[o.jsx(oS,{className:"w-8 h-8 text-blue-500"}),o.jsx("span",{className:"hidden lg:block font-bold text-xl tracking-wider",children:"EMPIRE"})]}),(0,o.jsxs)("nav",{className:"flex-1 flex flex-col gap-2 px-2",children:[o.jsx(oM,{icon:o.jsx(ok,{}),label:"Command",active:"command"===e,onClick:()=>t("command")}),o.jsx(oM,{icon:o.jsx(oE,{}),label:"Communications",active:"communications"===e,onClick:()=>t("communications")}),o.jsx(oM,{icon:o.jsx(ox,{}),label:"Personnel",active:"personnel"===e,onClick:()=>t("personnel")}),(0,o.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 px-2 flex flex-col gap-2",children:[o.jsx("span",{className:"text-xs text-zinc-500 font-bold px-2 uppercase tracking-wider mb-1",children:"AI Services"}),o.jsx(oA(),{href:"/ai-secretary",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 transition-colors",children:"\uD83E\uDD16 AI Secretary"}),o.jsx(oA(),{href:"/automation-workflows",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 transition-colors",children:" Workflows"}),o.jsx(oA(),{href:"/custom-ai-solutions",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 transition-colors",children:" Custom AI"})]}),(0,o.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 px-2 flex flex-col gap-2",children:[o.jsx("span",{className:"text-xs text-zinc-500 font-bold px-2 uppercase tracking-wider mb-1",children:"Local Directory"}),o.jsx(oA(),{href:"/lakeland/plumbers",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-amber-500 hover:text-amber-400 hover:bg-white/5 transition-colors bg-amber-900/10 border border-amber-500/20",children:"\uD83C\uDF34 Lakeland Finds"})]}),(0,o.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 px-2 flex flex-col gap-2",children:[o.jsx("span",{className:"text-xs text-zinc-500 font-bold px-2 uppercase tracking-wider mb-1",children:"Growth"}),o.jsx(oA(),{href:"/assessment",className:"flex items-center justify-between px-3 py-2 rounded-lg text-sm font-bold text-blue-400 bg-blue-900/10 border border-blue-500/20 hover:bg-blue-900/30 transition-colors",children:o.jsx("div",{className:"flex items-center gap-3",children:"\uD83D\uDCC8 AI Readiness Score"})})]}),o.jsx("div",{className:"mt-auto",children:o.jsx(oM,{icon:o.jsx(oT,{}),label:"Settings",active:"settings"===e,onClick:()=>t("settings")})})]}),o.jsx("div",{className:"px-4 py-4 border-t border-white/10",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500"}),(0,o.jsxs)("div",{className:"hidden lg:block",children:[o.jsx("p",{className:"text-sm font-medium",children:"Verified User"}),o.jsx("p",{className:"text-xs text-zinc-500",children:"Level 5 Authority"})]})]})})]}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-[-50%] left-[-10%] w-[1000px] h-[1000px] bg-blue-600/10 rounded-full blur-[120px] pointer-events-none"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[800px] h-[800px] bg-purple-600/5 rounded-full blur-[100px] pointer-events-none"}),(0,o.jsxs)("header",{className:"h-16 border-b border-white/5 flex items-center justify-between px-8 bg-[#0a0a0a]/50 backdrop-blur-md z-10",children:[(0,o.jsxs)("h1",{className:"text-lg font-medium text-zinc-300",children:["Operations / ",e.charAt(0).toUpperCase()+e.slice(1)]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),o.jsx("span",{className:"text-xs text-green-500 font-mono",children:"SYSTEM ONLINE"})]})]}),(0,o.jsxs)("div",{className:"flex-1 p-8 grid lg:grid-cols-2 gap-8 z-0",children:[o.jsx("div",{className:"flex flex-col justify-center gap-6 relative",children:(()=>{switch(e){case"communications":return o.jsx(o_,{});case"personnel":return(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[o.jsx("h2",{className:"text-3xl font-bold text-white",children:"Active Agents"}),o.jsx("div",{className:"p-6 bg-zinc-900/50 border border-white/10 rounded-xl",children:(0,o.jsxs)("ul",{className:"space-y-3",children:[(0,o.jsxs)("li",{className:"flex justify-between border-b border-white/5 pb-2",children:[o.jsx("span",{children:"Cooling Cal (HVAC)"})," ",o.jsx("span",{className:"text-green-500",children:"Live"})]}),(0,o.jsxs)("li",{className:"flex justify-between border-b border-white/5 pb-2",children:[o.jsx("span",{children:"Dispatch Dan (Plumber)"})," ",o.jsx("span",{className:"text-green-500",children:"Live"})]}),(0,o.jsxs)("li",{className:"flex justify-between border-b border-white/5 pb-2",children:[o.jsx("span",{children:"Estimator Eric (Roofer)"})," ",o.jsx("span",{className:"text-green-500",children:"Live"})]}),(0,o.jsxs)("li",{className:"flex justify-between border-b border-white/5 pb-2",children:[o.jsx("span",{children:"Electrician Ellie"})," ",o.jsx("span",{className:"text-green-500",children:"Live"})]})]})})]});case"settings":return(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[o.jsx("h2",{className:"text-3xl font-bold text-white",children:"System Settings"}),(0,o.jsxs)("div",{className:"p-6 bg-zinc-900/50 border border-white/10 rounded-xl",children:[(0,o.jsxs)("p",{className:"text-zinc-400",children:["Mode: ",o.jsx("span",{className:"text-white font-mono",children:"SOVEREIGN_LIVE"})]}),(0,o.jsxs)("p",{className:"text-zinc-400",children:["Host: ",o.jsx("span",{className:"text-white font-mono",children:"localhost:3000"})]}),(0,o.jsxs)("p",{className:"text-zinc-400",children:["Version: ",o.jsx("span",{className:"text-white font-mono",children:"v45.0"})]})]})]});default:return(0,o.jsxs)("div",{className:"flex flex-col justify-center gap-6",children:[(0,o.jsxs)("div",{children:[o.jsx("h2",{className:"text-5xl font-bold tracking-tight mb-2 bg-gradient-to-br from-white to-zinc-500 bg-clip-text text-transparent",children:"Welcome to Empire"}),o.jsx("p",{className:"text-zinc-400 text-lg max-w-md",children:"Your autonomous operations center. Call your office manager or chat with the concierge below."})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(oj,{label:"Active Agents",value:r.active_agents}),o.jsx(oj,{label:"System Load",value:r.system_load}),o.jsx(oj,{label:"Network",value:r.network}),o.jsx(oj,{label:"Notifications",value:r.notifications})]})]})}})()}),o.jsx("div",{className:"h-full max-h-[700px] flex flex-col",children:o.jsx("div",{className:"flex-1 bg-zinc-900/50 border border-white/10 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm",children:o.jsx(oy,{})})})]})]})]})}function oM({icon:e,label:t,active:r=!1,onClick:i}){return(0,o.jsxs)("button",{onClick:i,className:`flex items-center gap-3 p-3 rounded-xl transition-all ${r?"bg-blue-600/10 text-blue-400":"text-zinc-400 hover:bg-white/5 hover:text-white"}`,children:[e,o.jsx("span",{className:"hidden lg:block font-medium",children:t})]})}function oj({label:e,value:t}){return(0,o.jsxs)("div",{className:"p-4 rounded-xl border border-white/5 bg-white/5 hover:bg-white/10 transition-colors",children:[o.jsx("p",{className:"text-zinc-500 text-xs uppercase tracking-wider mb-1",children:e}),o.jsx("p",{className:"text-xl font-mono text-white",children:t})]})}},32029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>o});var i=r(19510),n=r(25384),s=r.n(n);r(5023);let o={title:"Empire Client Portal",description:"Manage your services and interact with our AI agents."};function a({children:e}){return i.jsx("html",{lang:"en",children:i.jsx("body",{className:s().className,children:e})})}},35480:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>s,default:()=>a});var i=r(68570);let n=(0,i.createProxy)(String.raw`C:\Users\nearm\.gemini\antigravity\scratch\empire-unified\apps\portal\src\app\page.tsx`),{__esModule:s,$$typeof:o}=n;n.default;let a=(0,i.createProxy)(String.raw`C:\Users\nearm\.gemini\antigravity\scratch\empire-unified\apps\portal\src\app\page.tsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,349,404],()=>r(6194));module.exports=i})();