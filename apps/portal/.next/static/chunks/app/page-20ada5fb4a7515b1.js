(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4726:function(e,t,s){Promise.resolve().then(s.bind(s,9986))},9986:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var n=s(7437),l=s(2265),a=s(8954),i=s(3274),r=s(523),c=s(9832),o=s(994),d=s(4446),x=s(1513),m=s(4839),h=s(6164),b=s(8764),u=s.n(b);function p(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,h.m6)((0,m.W)(t))}function f(){let[e,t]=(0,l.useState)(""),[s,m]=(0,l.useState)([{id:"1",role:"assistant",content:"Welcome to Empire Unified. I am your concierge. How can I assist you today?",timestamp:new Date}]),[h,b]=(0,l.useState)(!1),[f,g]=(0,l.useState)(null),[j,w]=(0,l.useState)("idle");(0,l.useEffect)(()=>{let e=new(u())("3b065ff0-a721-4b66-8255-30b6b8d6daab");return g(e),e.on("call-start",()=>w("active")),e.on("call-end",()=>w("idle")),e.on("error",e=>{console.error("Vapi Error:",e),w("idle")}),()=>{e.stop()}},[]);let v=async s=>{if(s.preventDefault(),!e.trim())return;let n={id:Date.now().toString(),role:"user",content:e,timestamp:new Date};m(e=>[...e,n]),t(""),b(!0);try{let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}),s=await t.json(),n={id:(Date.now()+1).toString(),role:"assistant",content:s.response||"Communication Error. Intelligence Module Offline.",timestamp:new Date};m(e=>[...e,n])}catch(t){console.error(t);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Error connecting to Sovereign Brain. Check API routes.",timestamp:new Date};m(t=>[...t,e])}finally{b(!1)}};return(0,n.jsxs)("div",{className:"w-full max-w-md bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-xl overflow-hidden flex flex-col h-[600px]",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur flex justify-between items-center",children:[(0,n.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,n.jsx)(a.Z,{className:"w-4 h-4 text-blue-500"}),"Empire Concierge"]}),(0,n.jsx)("button",{onClick:()=>{f&&("active"===j?(f.stop(),w("idle")):(w("connecting"),f.start("033ec1d3-e17d-4611-a497-b47cab1fdb4e")))},"aria-label":"active"===j?"End Call":"Call Office Manager",className:p("p-2 rounded-full transition-all duration-300 flex items-center gap-2 text-sm font-medium","active"===j?"bg-red-500/10 text-red-500 hover:bg-red-500/20":"bg-green-500/10 text-green-500 hover:bg-green-500/20"),children:"connecting"===j?(0,n.jsx)(i.Z,{className:"w-4 h-4 animate-spin"}):"active"===j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"End"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Call Agent"})]})})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,n.jsx)(d.M,{initial:!1,children:s.map(e=>(0,n.jsx)(x.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:p("flex w-full","user"===e.role?"justify-end":"justify-start"),children:(0,n.jsx)("div",{className:p("max-w-[80%] rounded-2xl px-4 py-2 text-sm","user"===e.role?"bg-blue-600 text-white rounded-br-none":"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 rounded-bl-none"),children:e.content})},e.id))}),h&&(0,n.jsx)(x.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:(0,n.jsx)("div",{className:"bg-zinc-100 dark:bg-zinc-800 rounded-2xl rounded-bl-none px-4 py-2",children:(0,n.jsx)(i.Z,{className:"w-4 h-4 animate-spin text-zinc-500"})})})]}),(0,n.jsx)("form",{onSubmit:v,className:"p-4 border-t border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Type your request...",className:"w-full bg-zinc-100 dark:bg-zinc-800 border-none rounded-full px-4 py-3 pr-12 text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),(0,n.jsx)("button",{type:"submit","aria-label":"Send message",disabled:h||!e.trim(),className:"absolute right-1 top-1 p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,n.jsx)(o.Z,{className:"w-4 h-4"})})]})})]})}var g=s(6706),j=s(7390);function w(){let[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)(!0),[i,r]=(0,l.useState)(null),c=async()=>{a(!0);try{let e=await fetch("/api/crm/clients"),s=await e.json();t(s.clients||[])}catch(e){console.error("API Fetch Failed, using Fallback Data",e),t([{name:"David Miller",phone:"555-0123",industry:"HVAC",status:"New",created_at:new Date().toISOString()},{name:"Sarah Connor",phone:"555-0999",industry:"Plumbing",status:"Qualified",created_at:new Date(Date.now()-864e5).toISOString()},{name:"Mike Ross",phone:"555-0777",industry:"Legal",status:"Closed",created_at:new Date(Date.now()-1728e5).toISOString()}])}finally{a(!1)}};return(0,l.useEffect)(()=>{c()},[]),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full max-h-[600px]",children:[(0,n.jsxs)("div",{className:"lg:col-span-1 bg-zinc-900 border border-white/10 rounded-2xl overflow-hidden flex flex-col",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-zinc-950",children:[(0,n.jsx)("h2",{className:"font-bold text-lg",children:"Inbound Leads"}),(0,n.jsx)("button",{title:"Refresh Leads",onClick:c,className:"text-zinc-400 hover:text-white",children:(0,n.jsx)(g.Z,{className:"w-4 h-4 ".concat(s?"animate-spin":"")})})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[e.map((e,t)=>(0,n.jsxs)("div",{onClick:()=>r(e),className:"p-3 rounded-lg cursor-pointer transition-colors border ".concat(i===e?"bg-blue-600/20 border-blue-500":"bg-white/5 border-transparent hover:bg-white/10"),children:[(0,n.jsx)("div",{className:"font-bold text-white",children:e.name}),(0,n.jsxs)("div",{className:"text-xs text-zinc-400 flex justify-between mt-1",children:[(0,n.jsx)("span",{children:e.industry}),(0,n.jsx)("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},t)),0===e.length&&!s&&(0,n.jsx)("div",{className:"text-center text-zinc-500 py-8",children:"No active leads found."})]})]}),(0,n.jsx)("div",{className:"lg:col-span-2 bg-zinc-900 border border-white/10 rounded-2xl overflow-hidden flex flex-col relative",children:i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-4 border-b border-white/10 bg-zinc-950 flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-bold text-lg",children:i.name}),(0,n.jsxs)("span",{className:"text-xs text-zinc-400",children:[i.phone," • ",i.industry]})]}),(0,n.jsx)("div",{className:"px-3 py-1 bg-green-500/20 text-green-400 text-xs rounded-full border border-green-500/50",children:"AI Active"})]}),(0,n.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)("div",{className:"bg-blue-600 text-white p-3 rounded-2xl rounded-tr-none max-w-[80%]",children:[(0,n.jsxs)("p",{className:"text-sm",children:["Hey ",i.name,", this is your AI Onboarding Specialist. When is a good time to call?"]}),(0,n.jsx)("span",{className:"text-[10px] opacity-70 block mt-1 text-right",children:"Sent via Sovereign SMS"})]})}),(0,n.jsx)("div",{className:"text-center py-4",children:(0,n.jsx)("span",{className:"text-xs text-zinc-600 bg-zinc-900 px-3 py-1 rounded-full border border-zinc-800",children:"Waiting for reply..."})})]}),(0,n.jsx)("div",{className:"p-4 border-t border-white/10 bg-zinc-950",children:(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"text",placeholder:"Type a manual message...",className:"flex-1 bg-zinc-900 border border-zinc-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),(0,n.jsx)("button",{title:"Send Message",className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors",children:(0,n.jsx)(o.Z,{className:"w-5 h-5"})})]})})]}):(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-500 p-8 text-center",children:[(0,n.jsx)(j.Z,{className:"w-12 h-12 mb-4 opacity-20"}),(0,n.jsx)("p",{children:"Select a lead to view the secure conversation logs."}),(0,n.jsx)("p",{className:"text-xs mt-2 text-zinc-600",children:"Encrypted • Locally Hosted"})]})})]})}var v=s(500),N=s(7140),y=s(5404),z=s(4174),k=s(4258),S=s(7138);function C(){let[e,t]=l.useState("command"),[s,a]=l.useState({active_agents:"-",system_load:"-",network:"Connecting...",notifications:"-"});return l.useEffect(()=>{let e=()=>{fetch("/api/status").then(e=>e.json()).then(e=>{a({active_agents:e.active_agents.toString(),system_load:e.system_load,network:e.network_status,notifications:e.notifications.toString()})}).catch(e=>console.error("Stats Fetch Failed:",e))};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,n.jsxs)("main",{className:"flex min-h-screen bg-[#0a0a0a] text-white selection:bg-blue-500/30",children:[(0,n.jsxs)("aside",{className:"w-20 lg:w-64 border-r border-white/10 flex flex-col items-center lg:items-stretch py-8 bg-[#0f0f0f]",children:[(0,n.jsxs)("div",{className:"mb-12 px-4 flex items-center justify-center lg:justify-start gap-3",children:[(0,n.jsx)(v.Z,{className:"w-8 h-8 text-blue-500"}),(0,n.jsx)("span",{className:"hidden lg:block font-bold text-xl tracking-wider",children:"EMPIRE"})]}),(0,n.jsxs)("nav",{className:"flex-1 flex flex-col gap-2 px-2",children:[(0,n.jsx)(E,{icon:(0,n.jsx)(N.Z,{}),label:"Command",active:"command"===e,onClick:()=>t("command")}),(0,n.jsx)(E,{icon:(0,n.jsx)(y.Z,{}),label:"Communications",active:"communications"===e,onClick:()=>t("communications")}),(0,n.jsx)(E,{icon:(0,n.jsx)(z.Z,{}),label:"Personnel",active:"personnel"===e,onClick:()=>t("personnel")}),(0,n.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 px-2 flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-xs text-zinc-500 font-bold px-2 uppercase tracking-wider mb-1",children:"AI Services"}),(0,n.jsx)(S.default,{href:"/ai-secretary",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 transition-colors",children:"\uD83E\uDD16 AI Secretary"}),(0,n.jsx)(S.default,{href:"/automation-workflows",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 transition-colors",children:"⚡ Workflows"}),(0,n.jsx)(S.default,{href:"/custom-ai-solutions",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 transition-colors",children:"⚙️ Custom AI"})]}),(0,n.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 px-2 flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-xs text-zinc-500 font-bold px-2 uppercase tracking-wider mb-1",children:"Local Directory"}),(0,n.jsx)(S.default,{href:"/lakeland/plumbers",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-amber-500 hover:text-amber-400 hover:bg-white/5 transition-colors bg-amber-900/10 border border-amber-500/20",children:"\uD83C\uDF34 Lakeland Finds"})]}),(0,n.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 px-2 flex flex-col gap-2",children:[(0,n.jsx)("span",{className:"text-xs text-zinc-500 font-bold px-2 uppercase tracking-wider mb-1",children:"Growth"}),(0,n.jsx)(S.default,{href:"/assessment",className:"flex items-center justify-between px-3 py-2 rounded-lg text-sm font-bold text-blue-400 bg-blue-900/10 border border-blue-500/20 hover:bg-blue-900/30 transition-colors",children:(0,n.jsx)("div",{className:"flex items-center gap-3",children:"\uD83D\uDCC8 AI Readiness Score"})})]}),(0,n.jsx)("div",{className:"mt-auto",children:(0,n.jsx)(E,{icon:(0,n.jsx)(k.Z,{}),label:"Settings",active:"settings"===e,onClick:()=>t("settings")})})]}),(0,n.jsx)("div",{className:"px-4 py-4 border-t border-white/10",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500"}),(0,n.jsxs)("div",{className:"hidden lg:block",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Verified User"}),(0,n.jsx)("p",{className:"text-xs text-zinc-500",children:"Level 5 Authority"})]})]})})]}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute top-[-50%] left-[-10%] w-[1000px] h-[1000px] bg-blue-600/10 rounded-full blur-[120px] pointer-events-none"}),(0,n.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[800px] h-[800px] bg-purple-600/5 rounded-full blur-[100px] pointer-events-none"}),(0,n.jsxs)("header",{className:"h-16 border-b border-white/5 flex items-center justify-between px-8 bg-[#0a0a0a]/50 backdrop-blur-md z-10",children:[(0,n.jsxs)("h1",{className:"text-lg font-medium text-zinc-300",children:["Operations / ",e.charAt(0).toUpperCase()+e.slice(1)]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,n.jsx)("span",{className:"text-xs text-green-500 font-mono",children:"SYSTEM ONLINE"})]})]}),(0,n.jsxs)("div",{className:"flex-1 p-8 grid lg:grid-cols-2 gap-8 z-0",children:[(0,n.jsx)("div",{className:"flex flex-col justify-center gap-6 relative",children:(()=>{switch(e){case"communications":return(0,n.jsx)(w,{});case"personnel":return(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Active Agents"}),(0,n.jsx)("div",{className:"p-6 bg-zinc-900/50 border border-white/10 rounded-xl",children:(0,n.jsxs)("ul",{className:"space-y-3",children:[(0,n.jsxs)("li",{className:"flex justify-between border-b border-white/5 pb-2",children:[(0,n.jsx)("span",{children:"Cooling Cal (HVAC)"})," ",(0,n.jsx)("span",{className:"text-green-500",children:"Live"})]}),(0,n.jsxs)("li",{className:"flex justify-between border-b border-white/5 pb-2",children:[(0,n.jsx)("span",{children:"Dispatch Dan (Plumber)"})," ",(0,n.jsx)("span",{className:"text-green-500",children:"Live"})]}),(0,n.jsxs)("li",{className:"flex justify-between border-b border-white/5 pb-2",children:[(0,n.jsx)("span",{children:"Estimator Eric (Roofer)"})," ",(0,n.jsx)("span",{className:"text-green-500",children:"Live"})]}),(0,n.jsxs)("li",{className:"flex justify-between border-b border-white/5 pb-2",children:[(0,n.jsx)("span",{children:"Electrician Ellie"})," ",(0,n.jsx)("span",{className:"text-green-500",children:"Live"})]})]})})]});case"settings":return(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold text-white",children:"System Settings"}),(0,n.jsxs)("div",{className:"p-6 bg-zinc-900/50 border border-white/10 rounded-xl",children:[(0,n.jsxs)("p",{className:"text-zinc-400",children:["Mode: ",(0,n.jsx)("span",{className:"text-white font-mono",children:"SOVEREIGN_LIVE"})]}),(0,n.jsxs)("p",{className:"text-zinc-400",children:["Host: ",(0,n.jsx)("span",{className:"text-white font-mono",children:"localhost:3000"})]}),(0,n.jsxs)("p",{className:"text-zinc-400",children:["Version: ",(0,n.jsx)("span",{className:"text-white font-mono",children:"v45.0"})]})]})]});default:return(0,n.jsxs)("div",{className:"flex flex-col justify-center gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-5xl font-bold tracking-tight mb-2 bg-gradient-to-br from-white to-zinc-500 bg-clip-text text-transparent",children:"Welcome to Empire"}),(0,n.jsx)("p",{className:"text-zinc-400 text-lg max-w-md",children:"Your autonomous operations center. Call your office manager or chat with the concierge below."})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(D,{label:"Active Agents",value:s.active_agents}),(0,n.jsx)(D,{label:"System Load",value:s.system_load}),(0,n.jsx)(D,{label:"Network",value:s.network}),(0,n.jsx)(D,{label:"Notifications",value:s.notifications})]})]})}})()}),(0,n.jsx)("div",{className:"h-full max-h-[700px] flex flex-col",children:(0,n.jsx)("div",{className:"flex-1 bg-zinc-900/50 border border-white/10 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm",children:(0,n.jsx)(f,{})})})]})]})]})}function E(e){let{icon:t,label:s,active:l=!1,onClick:a}=e;return(0,n.jsxs)("button",{onClick:a,className:"flex items-center gap-3 p-3 rounded-xl transition-all ".concat(l?"bg-blue-600/10 text-blue-400":"text-zinc-400 hover:bg-white/5 hover:text-white"),children:[t,(0,n.jsx)("span",{className:"hidden lg:block font-medium",children:s})]})}function D(e){let{label:t,value:s}=e;return(0,n.jsxs)("div",{className:"p-4 rounded-xl border border-white/5 bg-white/5 hover:bg-white/10 transition-colors",children:[(0,n.jsx)("p",{className:"text-zinc-500 text-xs uppercase tracking-wider mb-1",children:t}),(0,n.jsx)("p",{className:"text-xl font-mono text-white",children:s})]})}}},function(e){e.O(0,[878,231,392,971,23,744],function(){return e(e.s=4726)}),_N_E=e.O()}]);